import{j as e}from"./vendor-mui-C1GmDdcn.js";import{r as t}from"./vendor-react-EzoxUMNY.js";import{a7 as n}from"./vendor-utils-QXd9EeNt.js";import{g as s,q as a}from"./lead-components-CxEP6yWP.js";import"./vendor-antd-BB3a0mYC.js";const r="/api";function o({onClose:n,onSelect:s,users:a=[],selectedPersons:r=[]}){const[o,l]=t.useState(""),[i,d]=t.useState(r),c=a.length>0?a.filter(e=>(e.department_name||e.department||"").toLowerCase().includes("login")).map(e=>({id:e.id||e._id||e.user_id,name:e.name||`${e.first_name||""} ${e.last_name||""}`.trim()||e.username||e.id,designation:e.designation||e.designation_name||e.role_name||"No designation",department:e.department_name||e.department||"No department"})):[],[u,m]=t.useState(c);t.useEffect(()=>{m(c)},[c]),t.useEffect(()=>{""===o.trim()?m(c):m(c.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())))},[o,a,c]);const p=e=>{d(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent",children:e.jsxs("div",{className:"bg-white backdrop-blur-sm p-6 rounded-2xl shadow-2xl w-[90%] max-w-md mx-auto relative",children:[e.jsxs("div",{className:"flex items-center mb-4 p-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx("h3",{className:"font-bold text-lg text-black",children:"Select Login Department Persons"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose employees from the login department with their designations"})]}),e.jsxs("div",{className:"mb-4 p-3",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:"Search Login Persons"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-cyan-400 rounded text-black font-bold",value:o,onChange:e=>l(e.target.value),placeholder:"Search login department employees..."}),o&&e.jsx("button",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",onClick:()=>l(""),type:"button",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),i.length>0&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("span",{className:"text-sm text-blue-800 font-semibold",children:[i.length," person(s) selected"]})}),e.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 border rounded-lg",children:c.length>0?u.length>0?u.map(t=>{return e.jsx("li",{className:"p-3 border-b last:border-b-0 cursor-pointer text-black transition hover:bg-gray-100 flex items-center",onClick:()=>p(t),children:e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("input",{type:"checkbox",checked:(n=t.id,i.some(e=>e.id===n)),onChange:()=>p(t),className:"mr-3 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#00bcd4] text-white flex items-center justify-center mr-3 flex-shrink-0 font-semibold",children:t.name.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase()}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-black",children:t.name}),e.jsx("span",{className:"text-sm text-gray-600",children:t.designation}),e.jsx("span",{className:"text-xs text-gray-500",children:t.department})]})]})},t.id||t.name);var n}):""!==o.trim()&&e.jsx("li",{className:"p-3 text-gray-500 text-center",children:"No matching users found in login department."}):e.jsx("li",{className:"p-3 text-gray-500 text-center",children:"Loading login department users..."})}),e.jsxs("div",{className:"flex justify-end gap-4 mt-4 p-3",children:[e.jsxs("button",{className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition",onClick:()=>{s(i),n()},children:["Confirm Selection (",i.length,")"]}),e.jsx("button",{className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition",onClick:n,children:"Cancel"})]}),e.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:n,children:"×"})]})})}function l({lead:l,onSave:i,canEdit:d=!0}){const c=l||{},u=t.useRef(null),[m,p]=t.useState(!1),[h,g]=t.useState(""),[x,b]=t.useState(!1),[f,_]=t.useState({login_sent_date:c.login_sent_date||(new Date).toISOString().split("T")[0],login_person:c.login_person||[],channel_name:c.channel_name||"",los_number:c.los_number||"",amount_approved:c.amount_approved||"",amount_disbursed:c.amount_disbursed||"",internal_top:c.internal_top||"",cashback_to_customer:c.cashback_to_customer||"",net_disbursement_amount:c.net_disbursement_amount||"",rate_percentage:c.rate_percentage||"",tenure_given:c.tenure_given||"",pf_and_insurance:c.pf_and_insurance||"",disbursement_date:c.disbursement_date||""}),[v,w]=t.useState(!1),[y,j]=t.useState(!1),[N,k]=t.useState([]),[S,C]=t.useState(""),[$,L]=t.useState([]),[A,z]=t.useState(null),[B,T]=t.useState({top:0,left:0}),M={color:"black",fontWeight:650,fontSize:"15px"},D=t.useRef(null),E=e=>{if(!e)return"";let t=e.toString().replace(/[^\d]/g,"");if(!t)return"";let n="",s=t;if(s.length<=3)n=s;else if(s.length<=5)n=s.slice(0,-3)+","+s.slice(-3);else if(s.length<=7)n=s.slice(0,-5)+","+s.slice(-5,-3)+","+s.slice(-3);else if(s.length<=9)n=s.slice(0,-7)+","+s.slice(-7,-5)+","+s.slice(-5,-3)+","+s.slice(-3);else{let e=[],t=s;for(e.unshift(t.slice(-3)),t=t.slice(0,-3);t.length>0;){if(t.length<=2){e.unshift(t);break}e.unshift(t.slice(-2)),t=t.slice(0,-2)}n=e.join(",")}return"Rs "+n},R=e=>{if(!e)return"";const t=new Date(e),n=t.getDate(),s=t.toLocaleString("en",{month:"short"}),a=t.getFullYear();let r;if(n>=11&&n<=13)r=n+"th";else switch(n%10){case 1:r=n+"st";break;case 2:r=n+"nd";break;case 3:r=n+"rd";break;default:r=n+"th"}return`${r} ${s} ${a}`},I=e=>{if(!e)return"";const t=new Date(e),n=t.getDate(),s=t.toLocaleString("en",{month:"short"}),a=t.getFullYear();let r=t.getHours(),o=t.getMinutes();const l=r>=12?"PM":"AM";r%=12,r=r||12,o=o<10?"0"+o:o;const i=`${r}:${o} ${l}`;let d;if(n>=11&&n<=13)d=n+"th";else switch(n%10){case 1:d=n+"st";break;case 2:d=n+"nd";break;case 3:d=n+"rd";break;default:d=n+"th"}return`${d} ${s} ${a} ${i}`},O=()=>{const e=s(),t=a(e,"login","channel"),n=a(e,"*","*");return t||n},P=(e,t)=>{if(t&&t.target){const e=t.target.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;T({top:e.top+n-10,left:e.left+s-250})}z(e)},F=()=>{z(null)},W=e=>{const t=N.find(t=>("string"==typeof t?t:t.name)===e);return t&&"object"==typeof t&&t.description&&t.description.trim()?t.description:`Channel: ${e}\nNo description available\nContact admin to add description`},U=N.filter(e=>{const t="string"==typeof e?e:e.name,n="string"==typeof e||!1!==e.is_active;return t&&n&&t.toLowerCase().includes(S.toLowerCase())});t.useEffect(()=>{const e=e=>{e.target.closest(".dropdown-container")||(w(!1),C(""),z(null))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),t.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("userData");if(!t)return;const{user_id:s}=JSON.parse(t);if(O())try{const e="/api",t=await n.get(`${e}/settings/channel-names?user_id=${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}});Array.isArray(t.data)?k(t.data):t.data.channel_names&&Array.isArray(t.data.channel_names)&&k(t.data.channel_names)}catch(e){}await H()}catch(e){}})()},[]);const H=async()=>{try{const t=localStorage.getItem("userId"),n=await fetch(`${r}/leads/assignment-options?user_id=${t}&show_all_users=true`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(n.ok){const s=await n.json();let a=[];if(s.departments&&s.departments.length>0)for(const n of s.departments)try{const e=await fetch(`${r}/leads/assignment-options?user_id=${t}&department_id=${n.id}&show_all_users=true`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(e.ok){const t=await e.json();if(t.users&&t.users.length>0){const e=t.users.map(e=>({...e,department_name:n.name||n.department_name||"Unknown Department",department_id:n.id}));a.push(...e)}}}catch(e){}0===a.length&&s.users&&(a=s.users),L(a)}}catch(e){L([])}},Y=e=>e&&Array.isArray(e)?e.map(e=>{const t=$.find(t=>t.id===e||t._id===e);return t?{id:t.id||t._id,name:t.name||`${t.first_name||""} ${t.last_name||""}`.trim(),designation:t.designation||t.designation_name||t.role_name||"No designation",department:t.department_name||t.department||"No department"}:{id:e,name:"Unknown Person",designation:"Unknown",department:"Unknown"}}):[],J=[{label:"Login Sent Date",key:"login_sent_date",type:"date",readOnly:!0},{label:"Login Person",key:"login_person",type:"popup"},...O()?[{label:"Channel Name",key:"channel_name",type:"dropdown"}]:[],{label:"LOS Number",key:"los_number"},{label:"Amount Approved",key:"amount_approved",type:"currency"},{label:"Amount Disbursed",key:"amount_disbursed",type:"currency"},{label:"Internal TOP",key:"internal_top",type:"currency"},{label:"Cashback to Customer",key:"cashback_to_customer",type:"currency"},{label:"Net Disbursement Amount",key:"net_disbursement_amount",type:"currency",readOnly:!0},{label:"Rate %",key:"rate_percentage",type:"percentage"},{label:"Tenure Given",key:"tenure_given",type:"months"},{label:"PF and Insurance",key:"pf_and_insurance",type:"currency"},{label:"Disbursement Date",key:"disbursement_date",type:"date"}],V=e=>{const t=e.target,n=t.selectionStart,s=t.value.replace("%","");"ArrowRight"===e.key&&n>=s.length&&e.preventDefault(),n>s.length&&/\d/.test(e.key)&&(e.preventDefault(),t.setSelectionRange(s.length,s.length),q("rate_percentage",s+e.key))},q=(e,t)=>{let n=t;if("rate_percentage"===e){let e=t.replace("%","");const s=u.current,a=s?s.selectionStart:0;/^\d*\.?\d*$/.test(e)&&""!==e?(n=e+"%",setTimeout(()=>{if(u.current&&document.activeElement===u.current){const t=Math.min(a,e.length);u.current.setSelectionRange(t,t)}},0)):n=""===e?"":t}else if("tenure_given"===e){let e=t.replace(/\s*months?$/i,"");n=/^\d*$/.test(e)||""===e?e:t}else if(["amount_approved","amount_disbursed","internal_top","cashback_to_customer"].includes(e))if(""===t)n="";else{const e=t.replace(/[^\d]/g,"");n=e?t.endsWith(" ")||e.length>=4?E(e):e:t}else if("pf_and_insurance"===e)if(""===t)n="";else if(t.includes(" ")&&!t.includes(" & ")){const e=t.split(" ")[0];if(/^\d+$/.test(e)){const t=E(e);n=t+" & "}else n=t}else n=t;else["amount_approved","amount_disbursed","internal_top","cashback_to_customer","net_disbursement_amount","rate_percentage","tenure_given","pf_and_insurance","login_sent_date","disbursement_date"].includes(e)||"string"!=typeof t||(n=t.toUpperCase());_(t=>{const s={...t,[e]:n};if("amount_disbursed"===e||"internal_top"===e){const t=("amount_disbursed"===e?n:s.amount_disbursed)||"",a=("internal_top"===e?n:s.internal_top)||"",r=parseFloat(t.replace(/[^\d]/g,""))||0,o=parseFloat(a.replace(/[^\d]/g,""))||0,l=r-o;s.net_disbursement_amount=l>0?E(l.toString()):0===l&&(r>0||o>0)?"Rs 0":""}return window.autoSaveTimeout&&clearTimeout(window.autoSaveTimeout),window.autoSaveTimeout=setTimeout(()=>{K(s)},1e3),s})},G=(e,t)=>{if(m)return;window.autoSaveTimeout&&clearTimeout(window.autoSaveTimeout);let n=t;if("rate_percentage"===e){let e=t.replace("%","");e&&/^\d*\.?\d*$/.test(e)&&(n=e+"%")}else if("tenure_given"===e){let e=t.replace(/\s*months?$/i,"");e&&/^\d+$/.test(e)&&(n=e+(1===parseInt(e)?" month":" months"))}else if(["amount_approved","amount_disbursed","internal_top","cashback_to_customer"].includes(e)){if(t&&!t.startsWith("Rs ")){const e=t.replace(/[^\d]/g,"");e&&(n=E(e))}}else if("pf_and_insurance"===e)if(t.includes(" & ")){const e=t.split(" & ");let s=[];e.forEach(e=>{const t=e.replace(/[^\d]/g,"");t?s.push(E(t)):e.startsWith("Rs ")&&s.push(e)}),2===s.length&&(n=s.join(" & "))}else{const e=t.replace(/[^\d]/g,"");e&&(n=E(e))}const s={...f,[e]:n};_(s),"function"==typeof i&&i(e,n),K(s)},K=async e=>{if(!m)try{p(!0);const t={login_sent_date:e.login_sent_date,login_person:e.login_person,channel_name:e.channel_name,los_number:e.los_number,amount_approved:e.amount_approved,amount_disbursed:e.amount_disbursed,internal_top:e.internal_top,cashback_to_customer:e.cashback_to_customer,net_disbursement_amount:e.net_disbursement_amount,rate_percentage:e.rate_percentage,tenure_given:e.tenure_given,pf_and_insurance:e.pf_and_insurance,disbursement_date:e.disbursement_date},n=localStorage.getItem("userId")||"",s=await fetch(`${r}/lead-login/update-operations/${l._id}?user_id=${n}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify(t)});if(!s.ok){const e=await s.text();throw new Error(`Failed to update operations data: ${s.status} - ${e}`)}await s.json(),b(!0),g("Operations data updated successfully"),setTimeout(()=>{b(!1),g("")},2e3)}catch(t){g(`Failed to update operations data: ${t.message}`),setTimeout(()=>g(""),3e3)}finally{p(!1)}};return e.jsxs("div",{className:"p-7 rounded-2xl border-2 border-cyan-400/70 bg-white shadow-2xl text-[1.1rem] relative overflow-hidden",children:[e.jsx("div",{className:"absolute -right-12 -top-10 w-40 h-40 bg-white rounded-full blur-2xl"}),e.jsx("div",{className:"absolute -left-16 top-20 w-28 h-28 bg-white rounded-full blur-2xl"}),e.jsxs("div",{className:"flex items-center justify-between mb-4 z-10 relative min-h-[24px]",children:[e.jsx("div",{})," ",e.jsx("div",{className:"flex items-center gap-2 h-6 w-20 justify-end",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-cyan-500"}),e.jsx("span",{className:"text-sm text-cyan-500",children:"Saving..."})]}):x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-sm text-green-500",children:"Saved"})]}):h&&h.includes("Failed")?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("span",{className:"text-sm text-red-500",children:"Failed"})]}):e.jsx("div",{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 font-bold z-10 relative",children:J.map(({label:t,key:n,type:s,readOnly:a})=>{const r=a||!d;return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"block font-bold mb-2 uppercase",style:M,children:t}),"channel_name"===n?e.jsxs("div",{className:"relative w-full dropdown-container",ref:D,children:[e.jsxs("div",{className:"w-full p-3 border-2 border-[#00bcd4] rounded-md bg-white text-green-600 text-md font-bold cursor-pointer flex items-center justify-between transition-all duration-300 focus-within:border-[#0097a7] focus-within:shadow-[0_0_0_3px_rgba(0,188,212,0.1)] "+(r?"bg-gray-100 cursor-not-allowed":""),onClick:()=>!r&&w(!v),onBlur:()=>{f[n]&&G(n,f[n])},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:f[n]||"Select Channel"}),f[n]&&e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500 hover:text-blue-700 cursor-help",fill:"currentColor",viewBox:"0 0 20 20",onMouseEnter:e=>P(`selected_${f[n]}`,e),onMouseLeave:F,onClick:e=>e.stopPropagation(),children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),A===`selected_${f[n]}`&&e.jsxs("div",{className:"absolute left-0 bottom-full mb-2 w-64 bg-gray-800 text-white text-sm rounded-lg shadow-lg z-50 p-3",children:[e.jsx("div",{className:"whitespace-pre-wrap",children:W(f[n])}),e.jsx("div",{className:"absolute top-full left-4 -mt-1 border-4 border-transparent border-t-gray-800"})]})]})]}),e.jsx("svg",{className:"w-4 h-4 text-[#00bcd4]",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"m6 8 4 4 4-4"})})]}),v&&!r&&e.jsxs("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto mt-1",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search channels...",value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:border-[#00bcd4]"})})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:U.length>0?U.map(t=>{const n="string"==typeof t?t:t.name,s="string"==typeof t?t:t.name;return e.jsxs("div",{className:"px-4 py-2 text-md font-bold text-green-600 hover:bg-gray-100 cursor-pointer flex items-center justify-between relative",onClick:()=>(e=>{const t="string"==typeof e?e:e.name;q("channel_name",t),w(!1),C(""),z(null),G("channel_name",t)})(t),children:[e.jsx("span",{children:n}),e.jsx("div",{className:"relative ml-2",children:e.jsx("svg",{className:"w-4 h-4 text-blue-500 hover:text-blue-700 cursor-help",fill:"currentColor",viewBox:"0 0 20 20",onMouseEnter:e=>P(n,e),onMouseLeave:F,onClick:e=>e.stopPropagation(),children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]},s)}):e.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No channels found"})})]})]}):"popup"===s?e.jsxs("div",{className:"relative w-full dropdown-container",children:[e.jsxs("div",{className:"w-full p-3 border-2 border-[#00bcd4] rounded-md bg-white text-green-600 text-md font-bold cursor-pointer flex items-center justify-between transition-all duration-300 focus-within:border-[#0097a7] focus-within:shadow-[0_0_0_3px_rgba(0,188,212,0.1)] "+(r?"bg-gray-100 cursor-not-allowed":""),onClick:()=>!r&&j(!0),children:[e.jsx("span",{children:f[n]&&Array.isArray(f[n])&&f[n].length>0?`${f[n].length} person(s) selected`:"Click to select login department persons"}),e.jsx("svg",{className:"w-4 h-4 text-[#00bcd4]",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"m6 8 4 4 4-4"})})]}),f[n]&&Array.isArray(f[n])&&f[n].length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Y(f[n]).map(t=>e.jsxs("div",{className:"inline-flex items-center bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{className:"mr-2",children:t.name}),!r&&e.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{const t=f.login_person.filter(t=>t!==e);q("login_person",t),G("login_person",t)})(t.id)},className:"text-blue-600 hover:text-blue-800 font-bold ml-1",type:"button",children:"×"})]},t.id))})]}):"date"===s?e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:f[n]?new Date(f[n]).toISOString().split("T")[0]:"",onChange:e=>r?null:q(n,e.target.value),onBlur:e=>r?null:G(n,e.target.value),readOnly:r,className:"absolute inset-0 opacity-0 cursor-pointer",id:`${n}_hidden`}),e.jsx("input",{type:"text",value:f[n]?"login_sent_date"===n?I(f[n]):R(f[n]):"",readOnly:!0,onClick:()=>!r&&document.getElementById(`${n}_hidden`).showPicker(),className:"w-full p-3 border-2 border-[#00bcd4] rounded-md text-green-600 text-md font-bold transition-all duration-300 focus:border-[#0097a7] focus:shadow-[0_0_0_3px_rgba(0,188,212,0.1)] cursor-pointer "+(r?"bg-gray-100 cursor-not-allowed":"bg-white"),placeholder:"login_sent_date"===n?"Login sent date and time":"Select date"})]}):"currency"===s||"percentage"===s||"months"===s?e.jsx("input",{ref:"rate_percentage"===n?u:null,type:"text",value:f[n]||"",onChange:e=>r?null:q(n,e.target.value),onBlur:e=>r?null:G(n,e.target.value),onKeyDown:"rate_percentage"===n?V:null,className:"w-full p-3 border-2 border-[#00bcd4] rounded-md text-green-600 text-md font-bold transition-all duration-300 focus:border-[#0097a7] focus:shadow-[0_0_0_3px_rgba(0,188,212,0.1)] "+(r?"bg-gray-100 cursor-not-allowed":"bg-white"),placeholder:r?"Read-only: No edit permission":`Enter ${t.toLowerCase()}`,disabled:r}):e.jsx("input",{type:"text",value:f[n]||"",onChange:e=>r?null:q(n,e.target.value),onBlur:e=>r?null:G(n,e.target.value),className:"w-full p-3 border-2 border-[#00bcd4] rounded-md text-green-600 text-md font-bold transition-all duration-300 focus:border-[#0097a7] focus:shadow-[0_0_0_3px_rgba(0,188,212,0.1)] "+(r?"bg-gray-100 cursor-not-allowed":"bg-white"),placeholder:r?"Read-only: No edit permission":`Enter ${t.toLowerCase()}`,disabled:r})]},n)})}),e.jsx("div",{className:"flex justify-between items-center mt-6 z-10 relative",children:e.jsx("div",{className:"text-sm text-gray-500 italic",children:"Operations data for this lead."})}),y&&e.jsx(o,{onClose:()=>j(!1),onSelect:e=>{const t=e.map(e=>e.id);q("login_person",t),j(!1),G("login_person",t)},users:$,selectedPersons:Y(f.login_person||[])}),A&&!A.startsWith("selected_")&&e.jsxs("div",{className:"fixed w-64 bg-gray-800 text-white text-sm rounded-lg shadow-lg z-[9999] p-3 pointer-events-none",style:{top:`${B.top}px`,left:`${B.left}px`},children:[e.jsx("div",{className:"whitespace-pre-wrap",children:W(A)}),e.jsx("div",{className:"absolute top-full right-4 -mt-1 border-4 border-transparent border-t-gray-800"})]})]})}export{l as default};
