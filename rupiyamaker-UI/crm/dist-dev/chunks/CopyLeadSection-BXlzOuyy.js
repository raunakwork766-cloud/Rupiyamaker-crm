import{j as e}from"./vendor-mui-C1GmDdcn.js";import{r}from"./vendor-react-EzoxUMNY.js";import"./vendor-utils-QXd9EeNt.js";import"./vendor-antd-BB3a0mYC.js";const t=({leadData:t,lead:s,onClose:a})=>{const[l,o]=r.useState(!1),[i,d]=r.useState("pending"),[n,c]=r.useState(""),x=t||s;return x?e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gradient-to-b from-gray-900 to-black p-8 rounded-xl shadow-2xl max-w-lg w-full border border-cyan-800",children:[e.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-6",children:"Copy Lead"}),"pending"===i&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-white mb-6 text-center",children:"Copy this lead with ALL original details?"}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-blue-400 text-sm",children:["✓ ALL fields will be copied exactly (created_by, assigned_to, status, dates, etc.)",e.jsx("br",{}),"✓ Activities, attachments, tasks, and remarks will be included",e.jsx("br",{}),'✓ A new activity "Lead copied by [your name]" will be added',e.jsx("br",{}),"✓ Everything will remain exactly as the original lead"]})}),"            ",n&&e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-yellow-400",children:n})}),e.jsxs("div",{className:"flex justify-center space-x-4 mt-8",children:[e.jsx("button",{onClick:a,className:"px-5 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition",children:"Cancel"}),e.jsx("button",{onClick:async()=>{o(!0);try{if(!x||!x._id&&!x.id)throw new Error("No lead selected or lead ID missing");const e=`/api/leads/copy?user_id=${localStorage.getItem("userId")}`,r={lead_id:x._id||x.id,copy_options:{keep_custom_lead_id:!0,copy_activities:!0,copy_attachments:!0,copy_tasks:!0,copy_remarks:!0,copy_obligations:!0,preserve_original_metadata:!0,preserve_assigned_to:!0,preserve_created_by:!0,preserve_all_fields:!0,preserve_status:!0,add_copy_activity:!0},override_values:{}},t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();s.lead_id||s._id||s.id,d("success"),c("Lead copied with all original details preserved!")}catch(e){d("error"),c(`Failed to copy lead: ${e.message}`)}finally{o(!1)}},disabled:l,className:"px-5 py-2 rounded-lg text-white transition "+(l?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-blue-600 hover:to-cyan-500"),children:l?"Copying...":"Copy Lead"})]})]}),"success"===i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("p",{className:"text-green-400 font-medium",children:n})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:a,className:"px-5 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-500 transition",children:"Close"})})]}),"error"===i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),e.jsx("p",{className:"text-red-400 font-medium",children:n})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:a,className:"px-5 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-cyan-500 transition",children:"Close"})})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gradient-to-b from-gray-900 to-black p-8 rounded-xl shadow-2xl max-w-lg w-full border border-cyan-800",children:[e.jsx("h2",{className:"text-2xl font-bold text-cyan-400 mb-6",children:"Error"}),e.jsx("p",{className:"text-red-400 mb-6 text-center",children:"No lead selected for copying"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:a,className:"px-5 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition",children:"Close"})})]})})};export{t as default};
