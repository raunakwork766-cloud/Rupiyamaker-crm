import{j as e}from"./vendor-mui-C1GmDdcn.js";import{r as s}from"./vendor-react-EzoxUMNY.js";import{r as t}from"./leadApiHelper-Bq4A4HGf.js";import{C as a}from"./lead-components-D4SHX7AQ.js";import"./vendor-utils-QXd9EeNt.js";import"./vendor-antd-BB3a0mYC.js";const r=({leadId:r,assignableUsers:n=[],onRequestSubmitted:l=()=>{},buttonClassName:i=""})=>{const[d,o]=s.useState(!1),[m,c]=s.useState(!1),[u,x]=s.useState(""),[b,g]=s.useState(""),[p,h]=s.useState(null),f=localStorage.getItem("userId");return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(!0),className:i||"px-3 py-1.5 bg-amber-500 text-white rounded-md hover:bg-amber-600 text-xs",children:"Request Reassignment"}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Request Lead Reassignment"}),p&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded flex items-center",children:[e.jsx(a,{size:16,className:"mr-2"}),p]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),h(null);try{await t(r,f,u,b),o(!1),l(!0)}catch(s){h(s.message||"Failed to submit reassignment request")}finally{c(!1)}},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Target User (Optional)"}),e.jsxs("select",{value:u,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[e.jsx("option",{value:"",children:"-- Select User --"}),n.map(s=>e.jsx("option",{value:s.id,children:s.name||`${s.first_name} ${s.last_name}`},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If not selected, admin will assign to appropriate user"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Reason for Reassignment"}),e.jsx("textarea",{value:b,onChange:e=>g(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Explain why this lead needs to be reassigned..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:m?"Submitting...":"Submit Request"})]})]})]})})]})};export{r as default};
