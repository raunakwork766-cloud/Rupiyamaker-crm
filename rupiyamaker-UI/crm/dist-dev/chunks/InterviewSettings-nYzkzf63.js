import{j as e}from"./vendor-mui-C1GmDdcn.js";import{u as t,r as s}from"./vendor-react-EzoxUMNY.js";import{b as a}from"./employee-components-D5mp2BtY.js";import{ap as r,X as n,s as i,aq as l,ab as o}from"./lead-components-CR6vCRpQ.js";import"./vendor-utils-QXd9EeNt.js";import"./vendor-antd-BB3a0mYC.js";import"./vendor-office-CbbGW2MO.js";const c=()=>{const c=t(),[d,u]=s.useState(""),[m,x]=s.useState(null),[h,g]=s.useState(""),[p,b]=s.useState([]),[y,j]=s.useState(""),[v,f]=s.useState(null),[w,N]=s.useState(""),[k,C]=s.useState([]),[S,O]=s.useState(""),[_,E]=s.useState("Open"),[P,L]=s.useState(null),[I,T]=s.useState(""),[F,A]=s.useState("Open"),[M,B]=s.useState([]),[W,D]=s.useState({}),[J,K]=s.useState(""),[H,U]=s.useState(null),[R,V]=s.useState(""),[$,z]=s.useState(null),[q,G]=s.useState(""),[Q,X]=s.useState(null),[Y,Z]=s.useState(""),[ee,te]=s.useState([]),[se,ae]=s.useState("jobOpening"),[re,ne]=s.useState(!0);s.useEffect(()=>{ae("jobOpening")},[]),s.useEffect(()=>{ie()},[]);const ie=async()=>{try{ne(!0);const t=await a.getJobOpenings();t.success&&t.data?b(t.data):b([]);const s=await a.getInterviewTypes();s.success&&s.data?C(s.data):C([]);const r=await a.getStatuses();if(r.success&&r.data){B(r.data);const t={};for(const s of r.data)try{const e=await a.getSubStatuses(s._id);e.success&&e.data?t[s._id]=e.data:t[s._id]=[]}catch(e){t[s._id]=[]}D(t)}else B([]),D({});const n=await a.getSourcePortals();n.success&&n.data?te(n.data):te([])}catch(e){b([]),C([]),B([])}finally{ne(!1)}},le=async()=>{try{const e=await a.getInterviewTypes();e.success&&e.data?(e.data.forEach((e,t)=>{}),C(e.data)):C([])}catch(e){C([])}},oe=async()=>{try{const t=await a.getStatuses();if(t.success&&t.data){B(t.data);const s={};for(const r of t.data)try{const e=await a.getSubStatuses(r._id);e.success&&e.data?s[r._id]=e.data:s[r._id]=[]}catch(e){s[r._id]=[]}D(s)}}catch(e){}},ce=async()=>{if(d.trim()&&!p.some(e=>e.name===d.trim()))try{const e=await a.createJobOpening({name:d.trim()});e.success&&e.data?(b([...p,e.data]),u("")):alert("Failed to add job opening. Please try again.")}catch(e){alert("Error adding job opening: "+e.message)}},de=async()=>{if(h.trim()&&!p.some((e,t)=>e.name===h.trim()&&t!==m))try{const e=p[m],t=await a.updateJobOpening(e._id,{name:h.trim()});if(t.success&&t.data){const e=[...p];e[m]=t.data,b(e),x(null),g("")}}catch(e){}},ue=()=>{x(null),g("")},me=async()=>{if(y.trim()&&!k.some(e=>e.name===y.trim()))try{const e=await a.createInterviewType({name:y.trim()});e.success&&e.data?(C([...k,e.data]),j("")):alert("Failed to add interview type. Please try again.")}catch(e){alert("Error adding interview type: "+e.message)}},xe=async()=>{if(w.trim()&&!k.some((e,t)=>e.name===w.trim()&&t!==v))try{const e=k[v],t=await a.updateInterviewType(e._id,{name:w.trim()});if(t.success&&t.data){const e=[...k];e[v]=t.data,C(e),f(null),N("")}}catch(e){}},he=()=>{f(null),N("")},ge=async()=>{if(S.trim()){if(M.some(e=>e.name.toLowerCase()===S.trim().toLowerCase()))return void alert("Status name already exists. Please choose a different name.");try{const e=await a.createStatus({name:S.trim(),statusType:_});if(e.success&&e.data){B([...M,e.data]),O("");const t=e.data.name,s=_;E("Open"),e.data._id&&D(t=>({...t,[e.data._id]:[]})),"Complete"===s?(await(async()=>{try{try{const e=await fetch("http://localhost:3001/fix-latest-status",{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok)return await e.json(),setTimeout(async()=>{await oe()},1e3),!0}catch(e){}return setTimeout(async()=>{},1e3),setTimeout(async()=>{await oe()},3e3),!0}catch(t){return!1}})(),setTimeout(async()=>{await oe()},4e3),alert(`Status "${t}" added Successfully!`)):alert("Status added successfully!")}else alert("Failed to add status. Please try again.")}catch(e){e.message&&e.message.includes("duplicate key")||e.message&&e.message.includes("E11000")||e.response&&500===e.response.status&&e.response.data&&e.response.data.detail&&e.response.data.detail.includes("duplicate")?alert("Status name already exists. Please choose a different name."):alert("Error adding status: "+e.message)}}},pe=async()=>{if(I.trim()&&!M.some((e,t)=>e.name===I.trim()&&t!==P))try{const e=M[P],t={name:I.trim(),statusType:F},s=await a.updateStatus(e._id,t);s.success&&s.data?(await ie(),L(null),T(""),A("Open"),alert("Status updated successfully!")):alert("Failed to update status - no data returned")}catch(e){alert("Error updating status: "+e.message)}else alert("Please enter a valid, unique status name")},be=()=>{L(null),T(""),A("Open")},ye=async e=>{if(J.trim()&&e)try{const t={name:J.trim(),parent_status_id:e,order:100,is_active:!0},s=await a.createSubStatus(t);if(s.success&&s.data){const t={...W};t[e]||(t[e]=[]),t[e].push(s.data),D(t),K(""),z(null)}else alert("Failed to add sub-status. Please try again.")}catch(t){let e="Error adding sub-status";t.response&&t.response.data&&t.response.data.detail?e=t.response.data.detail:t.message&&(e=t.message),alert(e)}},je=async()=>{if(R.trim()&&H)try{const[e,t]=H.split("-"),s=W[e][parseInt(t)];if((await a.updateSubStatus(s._id,{name:R.trim()})).success){const s={...W};s[e][parseInt(t)].name=R.trim(),D(s),U(null),V("")}else alert("Failed to update sub-status. Please try again.")}catch(e){alert("Error updating sub-status: "+e.message)}},ve=()=>{U(null),V("")},fe=(e,t)=>{"Enter"===e.key&&("jobOpening"===t?null!==m?de():ce():"interviewType"===t?null!==v?xe():me():"status"===t?null!==P?pe():ge():"sourcePortal"===t&&(null!==Q?Ne(Q):we()))},we=async()=>{if(q.trim())try{const e=await a.createSourcePortal({name:q.trim()});e.success&&(te(t=>[...t,e.data]),G(""))}catch(e){}},Ne=async e=>{if(Y.trim())try{const t=ee[e];if((await a.updateSourcePortal(t._id,{name:Y.trim()})).success){const t=[...ee];t[e]={...t[e],name:Y.trim()},te(t),X(null),Z("")}}catch(t){}},ke=()=>{X(null),Z("")};return e.jsx("div",{className:"p-6 bg-black min-h-screen",children:re?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-white text-lg",children:"Loading interview settings..."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("/interview-panel"),className:"p-2 text-gray-400 hover:text-white transition-colors",title:"Back to Interview Panel",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Interview Settings"})]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Manage dropdown options for interviews"})]}),e.jsxs("div",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg mb-6",children:[e.jsx("button",{onClick:()=>ae("jobOpening"),className:"px-4 py-2 rounded-md font-medium text-sm transition-colors "+("jobOpening"===se?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:"Job Openings"}),e.jsx("button",{onClick:()=>ae("interviewType"),className:"px-4 py-2 rounded-md font-medium text-sm transition-colors "+("interviewType"===se?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:"Interview Types"}),e.jsx("button",{onClick:()=>ae("status"),className:"px-4 py-2 rounded-md font-medium text-sm transition-colors "+("status"===se?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:"Status Options"}),e.jsx("button",{onClick:()=>ae("sourcePortal"),className:"px-4 py-2 rounded-md font-medium text-sm transition-colors "+("sourcePortal"===se?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:"Source/Portal"})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-[#1b2230] rounded-lg shadow-lg p-8",children:["jobOpening"===se?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Job Opening Options"}),e.jsxs("div",{className:"mb-8 p-6 bg-[#2a3441] rounded-lg border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Add New Job Opening"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:d,onChange:e=>u(e.target.value),onKeyPress:e=>fe(e,"jobOpening"),className:"flex-1 px-4 py-3 bg-[#1b2230] border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Enter job opening title (e.g., 'Senior React Developer')"}),e.jsx("button",{onClick:ce,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add Option"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:["Existing Job Openings (",p.length,")"]}),0===p.length?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-lg",children:"No job opening options yet"}),e.jsx("p",{className:"text-sm",children:"Add your first job opening option above"})]}):e.jsx("div",{className:"grid gap-3",children:p.map((t,s)=>e.jsx("div",{className:"flex items-center gap-3 p-4 bg-[#2a3441] border border-gray-600 rounded-lg hover:border-gray-500 transition-colors",children:m===s?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:h,onChange:e=>g(e.target.value),onKeyPress:e=>fe(e,"jobOpening"),className:"flex-1 px-3 py-2 bg-[#1b2230] border border-gray-600 rounded text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{onClick:de,className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Save changes",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:ue,className:"p-2 text-gray-400 hover:text-gray-300 transition-colors",title:"Cancel editing",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-200 font-medium",children:t.name})]}),e.jsx("button",{onClick:()=>(e=>{x(e),g(p[e].name)})(s),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit this option",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>(async e=>{try{const t=p[e],s=await a.deleteJobOpening(t._id);if(s.success||"success"===s.status||"success"===s.message||s.ok){const t=p.filter((t,s)=>s!==e);b(t),await(async()=>{try{const e=await a.getJobOpenings();e.success&&e.data&&b(e.data)}catch(e){}})(),alert("Job opening deleted successfully!")}else alert("Failed to delete job opening. Please try again.")}catch(t){alert("Error deleting job opening: "+t.message)}})(s),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete this option",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},s))})]}),e.jsxs("div",{className:"mt-8 p-6 bg-blue-900/20 border border-blue-700/30 rounded-lg",children:[e.jsx("h4",{className:"text-blue-300 font-medium mb-2",children:"ðŸ’¡ Usage Instructions"}),e.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Add job opening options that will appear in the Create Interview dropdown"}),e.jsx("li",{children:"â€¢ Edit existing options by clicking the edit icon"}),e.jsx("li",{children:"â€¢ Delete options you no longer need"}),e.jsx("li",{children:"â€¢ Changes are automatically saved and will be available immediately"})]})]})]}):"interviewType"===se?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Interview Type Options"}),e.jsxs("div",{className:"mb-8 p-6 bg-[#2a3441] rounded-lg border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Add New Interview Type"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:y,onChange:e=>j(e.target.value),onKeyPress:e=>fe(e,"interviewType"),className:"flex-1 px-4 py-3 bg-[#1b2230] border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Enter interview type (e.g., 'Technical Round', 'HR Interview')"}),e.jsx("button",{onClick:me,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add Option"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:["Existing Interview Types (",k.length,")"]}),0===k.length?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4h3a1 1 0 011 1v1a1 1 0 01-1 1H5a1 1 0 01-1-1V8a1 1 0 011-1h3z"})}),e.jsx("p",{className:"text-lg",children:"No interview type options yet"}),e.jsx("p",{className:"text-sm",children:"Add your first interview type option above"})]}):e.jsx("div",{className:"grid gap-3",children:k.map((t,s)=>e.jsx("div",{className:"flex items-center gap-3 p-4 bg-[#2a3441] border border-gray-600 rounded-lg hover:border-gray-500 transition-colors",children:v===s?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:w,onChange:e=>N(e.target.value),onKeyPress:e=>fe(e,"interviewType"),className:"flex-1 px-3 py-2 bg-[#1b2230] border border-gray-600 rounded text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{onClick:xe,className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Save changes",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:he,className:"p-2 text-gray-400 hover:text-gray-300 transition-colors",title:"Cancel editing",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-gray-200 font-medium",children:t.name})]}),e.jsx("button",{onClick:()=>(e=>{f(e),N(k[e].name)})(s),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit this option",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>(async e=>{try{const s=k[e];if(await le(),![...k].find(e=>e._id===s._id))return void alert("Interview type was already deleted. Data refreshed.");try{const e=await a.deleteInterviewType(s._id);e.success||"Interview type deleted successfully"===e.message||e.message?.includes("deleted successfully")?e.alreadyDeleted?alert("Interview type was already deleted. Refreshing data..."):alert("Interview type deleted successfully!"):alert("Failed to delete interview type: "+(e.message||"Unknown error"))}catch(t){t.message&&t.message.includes("404")?alert("Interview type was already deleted. Refreshing data..."):alert("Error deleting interview type: "+t.message)}await le()}catch(s){alert("Unexpected error: "+s.message),await le()}})(s),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete this option",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},s))})]}),e.jsxs("div",{className:"mt-8 p-6 bg-green-900/20 border border-green-700/30 rounded-lg",children:[e.jsx("h4",{className:"text-green-300 font-medium mb-2",children:"ðŸ’¡ Usage Instructions"}),e.jsxs("ul",{className:"text-green-200 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Add interview type options that will appear in the Create Interview dropdown"}),e.jsx("li",{children:"â€¢ Edit existing options by clicking the edit icon"}),e.jsx("li",{children:"â€¢ Delete options you no longer need"}),e.jsx("li",{children:"â€¢ Changes are automatically saved and will be available immediately"})]})]})]}):"status"===se?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Status Options"}),e.jsxs("div",{className:"mb-8 p-6 bg-[#2a3441] rounded-lg border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:"Add New Status"}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:S,onChange:e=>O(e.target.value),onKeyPress:e=>fe(e,"status"),className:"flex-1 px-4 py-3 bg-[#1b2230] border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",placeholder:"Enter status (e.g., 'Selected', 'Rejected', 'In Progress')"}),e.jsxs("select",{value:_,onChange:e=>E(e.target.value),className:"px-4 py-3 bg-[#1b2230] border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"Open",children:"Open"}),e.jsx("option",{value:"Complete",children:"Complete"})]}),e.jsx("button",{onClick:ge,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Add Option"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsx("strong",{children:"Open:"})," Shows in Today and Upcoming tabs based on date",e.jsx("br",{}),e.jsx("strong",{children:"Complete:"})," Shows in Complete Interview tab when this status is selected"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-300 mb-4",children:["Existing Status Options (",M.length,")"]}),0===M.length?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-lg",children:"No status options yet"}),e.jsx("p",{className:"text-sm",children:"Add your first status option above"})]}):e.jsx("div",{className:"grid gap-4",children:M.map((t,s)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-3 p-4 bg-[#2a3441] border border-gray-600 rounded-lg hover:border-gray-500 transition-colors",children:P===s?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:I,onChange:e=>T(e.target.value),onKeyPress:e=>fe(e,"status"),className:"flex-1 px-3 py-2 bg-[#1b2230] border border-gray-600 rounded text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsxs("select",{value:F,onChange:e=>A(e.target.value),className:"px-3 py-2 bg-[#1b2230] border border-gray-600 rounded text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"Open",children:"Open"}),e.jsx("option",{value:"Complete",children:"Complete"})]}),e.jsx("button",{onClick:pe,className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Save changes",children:e.jsx(r,{className:"w-5 h-5"})}),e.jsx("button",{onClick:be,className:"p-2 text-gray-400 hover:text-gray-300 transition-colors",title:"Cancel editing",children:e.jsx(n,{className:"w-5 h-5"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-gray-200 font-medium",children:t.name}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("Complete"===(t.statusType||"Open")?"bg-green-900 text-green-300":"bg-blue-900 text-blue-300"),children:t.statusType||"Open"}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",W[t._id]?.length||0," sub-options)"]})]}),e.jsxs("button",{onClick:()=>z(t._id),className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 transition-colors flex items-center gap-1",title:"Add sub-option for this status",children:[e.jsx(i,{className:"w-4 h-4"}),"Add Sub-Option"]}),e.jsx("button",{onClick:()=>(e=>{L(e),T(M[e].name),A(M[e].statusType||"Open")})(s),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit this status",children:e.jsx(l,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>(async e=>{try{const t=M[e],s=await a.deleteStatus(t._id);if(s.success||"success"===s.status||"success"===s.message||s.ok){const s=M.filter((t,s)=>s!==e);B(s);const a={...W};delete a[t._id],D(a),await oe(),alert("Status deleted successfully!")}else alert("Failed to delete status. Please try again.")}catch(t){alert("Error deleting status: "+t.message)}})(s),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete this status",children:e.jsx(o,{className:"w-5 h-5"})})]})}),$===t._id&&e.jsxs("div",{className:"ml-6 p-4 bg-[#1e2732] border border-yellow-600/30 rounded-lg",children:[e.jsxs("h4",{className:"text-yellow-300 font-medium mb-3",children:['Add Sub-Option for "',t.name,'"']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:J,onChange:e=>K(e.target.value),onKeyPress:e=>{"Enter"===e.key&&ye(t._id)},className:"flex-1 px-3 py-2 bg-[#1b2230] border border-gray-600 rounded text-white placeholder-gray-400 focus:outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500",placeholder:"Enter sub-option name...",autoFocus:!0}),e.jsx("button",{onClick:()=>ye(t._id),className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",disabled:!J.trim(),children:"Add"}),e.jsx("button",{onClick:()=>{z(null),K("")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}),W[t._id]&&W[t._id].length>0&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Sub-Options:"}),W[t._id].map((s,i)=>e.jsx("div",{className:"flex items-center gap-3 p-3 bg-[#1e2732] border border-gray-700 rounded-lg hover:border-gray-600 transition-colors",children:H===`${t._id}-${i}`?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:R,onChange:e=>V(e.target.value),onKeyPress:e=>{"Enter"===e.key&&je()},className:"flex-1 px-3 py-2 bg-[#1b2230] border border-gray-600 rounded text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),e.jsx("button",{onClick:je,className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Save changes",children:e.jsx(r,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ve,className:"p-2 text-gray-400 hover:text-gray-300 transition-colors",title:"Cancel editing",children:e.jsx(n,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-gray-300 text-sm",children:s.name})]}),e.jsx("button",{onClick:()=>{return e=t._id,U(`${e}-${s=i}`),void V(W[e][s].name);var e,s},className:"p-1.5 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit sub-option",children:e.jsx(l,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(async(e,t)=>{try{const s=W[e][t],r=await a.deleteSubStatus(s._id);if(r.success||"success"===r.status||"success"===r.message||r.ok){const s={...W};s[e]=s[e].filter((e,s)=>s!==t),D(s),await oe(),alert("Sub-status deleted successfully!")}else alert("Failed to delete sub-status. Please try again.")}catch(s){alert("Error deleting sub-status: "+s.message)}})(t._id,i),className:"p-1.5 text-red-400 hover:text-red-300 transition-colors",title:"Delete sub-option",children:e.jsx(o,{className:"w-4 h-4"})})]})},s._id||i))]})]},t._id||s))})]}),e.jsxs("div",{className:"mt-8 p-6 bg-purple-900/20 border border-purple-700/30 rounded-lg",children:[e.jsx("h4",{className:"text-purple-300 font-medium mb-2",children:"ðŸ’¡ Usage Instructions"}),e.jsxs("ul",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Add status options that will appear in interview status dropdowns"}),e.jsx("li",{children:'â€¢ Click "Add Sub-Option" to create hierarchical sub-statuses for any main status'}),e.jsx("li",{children:"â€¢ Edit existing options by clicking the edit icon"}),e.jsx("li",{children:"â€¢ Delete options you no longer need (deleting a status will also remove its sub-options)"}),e.jsx("li",{children:"â€¢ Sub-options provide more granular status tracking within each main status category"}),e.jsx("li",{children:"â€¢ Changes are automatically saved and will be available immediately"})]})]})]}):"sourcePortal"===se?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-900/20 border border-green-700/30 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-green-300 text-lg font-medium mb-4 flex items-center",children:[e.jsx(i,{className:"w-5 h-5 mr-2"}),"Add New Source/Portal Option"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:q,onChange:e=>G(e.target.value),placeholder:"Enter source/portal name (e.g., LinkedIn, Naukri, Company Website)",className:"flex-1 px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&we()}),e.jsxs("button",{onClick:we,disabled:!q.trim(),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors font-medium flex items-center",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"Add"]})]})]}),e.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/30 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-blue-300 text-lg font-medium mb-4",children:["Existing Source/Portal Options (",ee.length,")"]}),0===ee.length?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“„"}),e.jsx("p",{children:"No source/portal options added yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Add your first option above to get started."})]}):e.jsx("div",{className:"space-y-3",children:ee.map((t,s)=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 border border-gray-700/50 rounded-lg hover:border-blue-500/30 transition-colors",children:Q===s?e.jsxs("div",{className:"flex items-center flex-1 gap-3",children:[e.jsx("input",{type:"text",value:Y,onChange:e=>Z(e.target.value),className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:e=>"Enter"===e.key&&Ne(s),autoFocus:!0}),e.jsx("button",{onClick:()=>Ne(s),className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Save changes",children:e.jsx(r,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ke,className:"p-2 text-gray-400 hover:text-gray-300 transition-colors",title:"Cancel editing",children:e.jsx(n,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),e.jsx("span",{className:"text-white font-medium",children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>(e=>{X(e),Z(ee[e].name)})(s),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit option",children:e.jsx(l,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(async e=>{try{const t=ee[e],s=await a.deleteSourcePortal(t._id);s.success||"success"===s.status||"success"===s.message||s.ok?(te(t=>t.filter((t,s)=>s!==e)),await(async()=>{try{const e=await a.getSourcePortals();e.success&&e.data&&te(e.data)}catch(e){}})(),alert("Source/portal deleted successfully!")):alert("Failed to delete source/portal. Please try again.")}catch(t){alert("Error deleting source/portal: "+t.message)}})(s),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete option",children:e.jsx(o,{className:"w-4 h-4"})})]})]})},t._id||s))})]}),e.jsxs("div",{className:"mt-8 p-6 bg-purple-900/20 border border-purple-700/30 rounded-lg",children:[e.jsx("h4",{className:"text-purple-300 font-medium mb-2",children:"ðŸ’¡ Usage Instructions"}),e.jsxs("ul",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("li",{children:"â€¢ Add source/portal options that will appear in interview source dropdowns"}),e.jsx("li",{children:"â€¢ Common sources include job portals, referrals, company website, social media"}),e.jsx("li",{children:"â€¢ Edit existing options by clicking the edit icon"}),e.jsx("li",{children:"â€¢ Delete options you no longer need"}),e.jsx("li",{children:"â€¢ These options help track where candidates are coming from"}),e.jsx("li",{children:"â€¢ Changes are automatically saved and will be available immediately"})]})]})]})}):null,e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t border-gray-600",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Changes are saved automatically"}),e.jsx("button",{onClick:()=>c("/interview-panel"),className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Back to Interview Panel"})]})]})})]})})};export{c as default};
