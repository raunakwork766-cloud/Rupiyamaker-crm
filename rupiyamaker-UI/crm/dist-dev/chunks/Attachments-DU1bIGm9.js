import{j as e}from"./vendor-mui-C1GmDdcn.js";import{r as t,R as s}from"./vendor-react-EzoxUMNY.js";import{E as o,J as a,F as r}from"./employee-components-BKn44sLk.js";import"./vendor-utils-QXd9EeNt.js";import"./vendor-antd-BB3a0mYC.js";import"./lead-components-v_oWzEmV.js";import"./vendor-office-CbbGW2MO.js";function n({leadId:n,userId:l}){const[i,d]=t.useState(null);t.useEffect(()=>{try{const e=new o;e.text("Component mounted - PDF test",20,20),e.output("blob")}catch(e){}},[]);const[c,m]=t.useState(!1),[u,x]=t.useState(null),f=t.useRef(null),p=(e,t="info")=>{d({message:e,type:t}),setTimeout(()=>{d(null)},5e3)},h=e=>{x(e),m(!0)},[g,b]=t.useState([]),[w,v]=t.useState([]),[y,N]=t.useState(!0),[j,C]=t.useState({}),[F,_]=t.useState({}),[k,A]=t.useState({}),[S,L]=t.useState({}),[$,E]=t.useState(!1),[T,I]=t.useState(!1),[M,P]=t.useState([]),[R,D]=t.useState({}),[O,z]=t.useState(null),[W,B]=t.useState({}),U="/api",H=(()=>{if(l)return l;return localStorage.getItem("userId")||localStorage.getItem("user_id")||"default_user"})();t.useEffect(()=>{},[n,l]);const V=e=>{B(t=>({...t,[e]:!0}))},Y=e=>{B(t=>({...t,[e]:!1}))},G=async()=>{if(n)try{const e=O&&(O.original_lead_id||O.login_created_at)?`${U}/lead-login/login-leads/${n}/documents?user_id=${H}`:`${U}/leads/${n}/documents?user_id=${H}`,t=await fetch(e);if(t.ok){const e=await t.json();P(e);const o={};e.forEach(e=>{if(e.has_password){const t=e.document_type.toLowerCase().replace(/\s+/g,"_");e.password?o[e._id]=e.password:o[e._id]=k[t]||""}}),L(e=>({...e,...o}));const a=new Set(e.map(e=>e.document_type));C(e=>{const t={...e};return a.forEach(e=>{if(e&&!t[e.toLowerCase().replace(/\s+/g,"_")]){const s=e.toLowerCase().replace(/\s+/g,"_");t[s]=[]}}),t}),_(e=>{const t={...e};return a.forEach(e=>{if(e&&!t[e.toLowerCase().replace(/\s+/g,"_")]){const o=e.toLowerCase().replace(/\s+/g,"_");t[o]=s.createRef()}}),t}),A(e=>{const t={...e};return a.forEach(e=>{if(e&&!t[e.toLowerCase().replace(/\s+/g,"_")]){const s=e.toLowerCase().replace(/\s+/g,"_");t[s]=""}}),t})}}catch(e){}},q=async()=>{if(!n)return null;try{let e=await fetch(`${U}/lead-login/login-leads/${n}?user_id=${H}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok||(e=await fetch(`${U}/leads/${n}?user_id=${H}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})),e.ok){const t=await e.json();return z(t),t}return null}catch(e){return null}};t.useEffect(()=>{H&&(async()=>{try{N(!0);const e=await fetch(`${U}/settings/attachment-types?user_id=${H}&target_type=leads`),t=await fetch(`${U}/settings/all-attachment-types?user_id=${H}&target_type=leads`);if(e.ok&&t.ok){const o=await e.json(),a=await t.json();b(o),v(a);const r={},n={},l={};o.forEach(e=>{const t=e.name.toLowerCase().replace(/\s+/g,"_");r[t]=[],n[t]=s.createRef(),l[t]=""}),a.forEach(e=>{if(!o.some(t=>t.name===e.name)){const t=e.name.toLowerCase().replace(/\s+/g,"_");r[t]=[],n[t]=s.createRef(),l[t]=""}}),C(r),_(n),A(l)}else b([]),v([])}catch(e){b([]),v([])}finally{N(!1)}})()},[H]),t.useEffect(()=>{n&&H&&q()},[n,H]),t.useEffect(()=>{n&&O&&!y&&H&&G()},[n,O,y,H]);const J=e=>async t=>{const s=Array.from(t.target.files);if(0===s.length)return;const o=g.find(t=>t.name.toLowerCase().replace(/\s+/g,"_")===e)||w.find(t=>t.name.toLowerCase().replace(/\s+/g,"_")===e);if(o){C(t=>({...t,[e]:s})),p(`Uploading ${s.length} file(s) for ${o.name}...`,"info");try{await Z(o,s)}catch(a){p("Upload failed: "+a.message,"error")}}else p("Attachment type not found. Please try again.","error")},X=(e,t)=>{A(s=>({...s,[e]:t}))},Z=async(e,t)=>{if(n&&t.length&&H)try{E(!0);const s=new FormData,o=e.name.toLowerCase().replace(/\s+/g,"_");t.forEach(e=>{s.append("files",e)}),s.append("user_id",H),s.append("document_type",e.name),s.append("category","general");const a=k[o];a&&s.append("password",a);const r=O&&(O.original_lead_id||O.login_created_at)?`${U}/lead-login/login-leads/${n}/documents?user_id=${H}`:`${U}/leads/${n}/documents?user_id=${H}`,l=await fetch(r,{method:"POST",body:s});if(l.ok){await l.json();const s=a?`${t.length} file(s) for ${e.name} uploaded successfully with password protection!`:`${t.length} file(s) for ${e.name} uploaded successfully!`;p(s,"success");const o=e.name.toLowerCase().replace(/\s+/g,"_");C(e=>({...e,[o]:[]})),A(e=>({...e,[o]:""})),F[o]?.current&&(F[o].current.value="");const r=document.getElementById("modalFileInput");r&&(r.value="");const n=document.getElementById("modalPasswordInput");n&&(n.value=""),G()}else{const e=await l.json();p(`Upload failed: ${e.detail||"Unknown error"}`,"error")}}catch(s){p("Upload failed: "+s.message,"error")}finally{E(!1)}else alert("Missing required information: leadId, files, or userId")},Q=e=>{if(!e||!e.has_password)return"";if(e.password&&e.password.trim())return e.password;if(S[e._id]&&S[e._id].trim())return S[e._id];const t=e.document_type.toLowerCase().replace(/\s+/g,"_");return k[t]&&k[t].trim()?k[t]:"Password not available - please enter a password in the field above"};return y?e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 border-b pb-4 mb-6",style:{borderColor:"#3b82f640"},children:"Attachments"}),e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"loader"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Loading attachment types..."})]})})]})}):H&&"default_user"!==H?e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 border-b pb-4 mb-6",style:{borderColor:"#3b82f640"},children:"Attachments"}),i&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg flex items-center "+("error"===i.type?"bg-red-100 border border-red-300 text-red-800":"warning"===i.type?"bg-yellow-100 border border-yellow-300 text-yellow-800":"bg-green-100 border border-green-300 text-green-800"),children:[e.jsx("i",{className:"mr-2 fas "+("error"===i.type?"fa-exclamation-circle":"warning"===i.type?"fa-exclamation-triangle":"fa-check-circle")}),e.jsx("span",{children:i.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.map((t,o)=>{const a=t.name.toLowerCase().replace(/\s+/g,"_");j[a];const r=F[a],n=k[a]||"",l=M.filter(e=>e.document_type===t.name);return e.jsxs("div",{className:"attachment-card","data-category":t.name,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-md font-semibold text-gray-700",children:t.name}),t.description&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center cursor-help",onMouseEnter:()=>V(t.id||t._id),onMouseLeave:()=>Y(t.id||t._id),children:e.jsx("span",{className:"text-white text-xs font-bold",children:"i"})}),W[t.id||t._id]&&e.jsxs("div",{className:"absolute z-[9999] p-4 text-sm text-white bg-gray-800 rounded-lg shadow-lg",style:{left:"50%",bottom:"100%",transform:"translateX(-50%)",marginBottom:"8px",minWidth:"250px",maxWidth:"400px",width:"auto",minHeight:"40px",maxHeight:"none",overflow:"visible",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 10px 25px rgba(0,0,0,0.3)"},onMouseEnter:()=>{},children:[e.jsx("div",{style:{wordWrap:"break-word",lineHeight:"1.6",fontSize:"13px",padding:"4px 0",textAlign:"left",display:"block",maxWidth:"350px",overflowWrap:"break-word",fontFamily:"inherit"},children:t.description?t.description.split(/\r\n|\r|\n|\\n/).map((t,o,a)=>e.jsxs(s.Fragment,{children:[t,o<a.length-1&&e.jsx("br",{})]},o)):"No description available"}),e.jsx("div",{className:"absolute w-0 h-0",style:{top:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #374151"}})]})]})]})}),0===l.length?e.jsxs("div",{className:"upload-box space-y-3",children:[e.jsx("input",{type:"password",placeholder:"Password (optional)",className:"password-input w-full px-3 py-2 text-black border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:e=>X(a,e.target.value),disabled:$}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",multiple:!0,ref:r,onChange:J(a),className:"file-input block w-full text-sm text-black file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer",disabled:$}),$&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-md",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Uploading..."})]})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Files will be uploaded automatically when selected."})]}):e.jsxs("div",{className:"summary-box flex items-center justify-between p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 file-count-text",children:[l.length," File",1!==l.length?"s":""," Uploaded"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to view or download."})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:[e.jsx("input",{type:"file",multiple:!0,ref:r,onChange:J(a),className:"hidden",disabled:$}),e.jsx("button",{className:"view-manage-btn text-sm font-semibold text-blue-600 hover:text-blue-800",onClick:()=>h(t),children:"Manage"})]})]})]},t.id||t._id)}),w.filter(e=>!g.some(t=>t.name===e.name)).map((t,o)=>{const a=M.filter(e=>e.document_type===t.name);return 0===a.length?null:(t.name.toLowerCase().replace(/\s+/g,"_"),e.jsxs("div",{className:"attachment-card","data-category":t.name,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-md font-semibold text-gray-700",children:t.name}),e.jsx("span",{className:"ml-2 text-xs bg-yellow-500 text-white px-2 py-0.5 rounded-full",children:"Archive"}),t.description&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center cursor-help",onMouseEnter:()=>V(t.id||t._id),onMouseLeave:()=>Y(t.id||t._id),children:e.jsx("span",{className:"text-white text-xs font-bold",children:"i"})}),W[t.id||t._id]&&e.jsxs("div",{className:"absolute z-[9999] p-4 text-sm text-white bg-gray-800 rounded-lg shadow-lg",style:{left:"50%",bottom:"100%",transform:"translateX(-50%)",marginBottom:"8px",minWidth:"250px",maxWidth:"400px",width:"auto",minHeight:"40px",maxHeight:"none",overflow:"visible",border:"1px solid rgba(255,255,255,0.2)",boxShadow:"0 10px 25px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{wordWrap:"break-word",lineHeight:"1.6",fontSize:"13px",padding:"4px 0",textAlign:"left",display:"block",maxWidth:"350px",overflowWrap:"break-word",fontFamily:"inherit"},children:t.description?t.description.split(/\r\n|\r|\n|\\n/).map((t,o,a)=>e.jsxs(s.Fragment,{children:[t,o<a.length-1&&e.jsx("br",{})]},o)):"No description available"}),e.jsx("div",{className:"absolute w-0 h-0",style:{top:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #374151"}})]})]})]})}),e.jsxs("div",{className:"summary-box flex items-center justify-between p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 file-count-text",children:[a.length," File",1!==a.length?"s":""," Uploaded"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to view or download."})]})]}),e.jsx("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:e.jsx("button",{className:"view-manage-btn text-sm font-semibold text-blue-600 hover:text-blue-800",onClick:()=>h(t),children:"Manage"})})]})]},t.id||t._id))}).filter(Boolean)]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex items-center justify-end space-x-3",children:[e.jsx("button",{className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-white rounded-lg border border-gray-200 hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-blue-300",onClick:G,disabled:$,children:"Refresh Documents"}),e.jsxs("button",{id:"downloadAllBtn",className:"px-5 py-2.5 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 focus:ring-4 focus:ring-green-300 flex items-center",onClick:async()=>{if(n&&0!==M.length)try{I(!0),p("Preparing download... This may take a moment.","info");const t=new a;if(!t||"function"!=typeof t.file)throw new Error("JSZip instance is invalid");const s=[];let l=0,i=0;const d={};M.forEach(e=>{const t=e.document_type||"Other";d[t]||(d[t]=[]),d[t].push(e)});const c=t.folder("All");let m=0,u=O;if(u||(u=await q()),u&&u._id){const t=c.folder("Applicant and Co-Applicant Form");try{const e=u.dynamic_fields?.applicant_form||u.loginForm||{},s=((e,t)=>{try{const s=new o;let a=20;s.setFontSize(22),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("APPLICANT FORM",105,a,{align:"center"}),a+=10,s.setLineWidth(1),s.setDrawColor(0,174,239),s.line(20,a,190,a),a+=15,s.setFontSize(12),s.setFont(void 0,"normal"),s.setTextColor(0,0,0);const r=t?.first_name||t?.customerName||t?.name||"N/A",n=t?._id||"N/A",l=(new Date).toLocaleDateString(),i=(new Date).toLocaleTimeString();s.text(`Customer: ${r}`,20,a),s.text(`Lead ID: ${n}`,20,a+8),s.text(`Generated: ${l} ${i}`,20,a+16),a+=35;const d=e||{};s.setFontSize(14),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("LOGIN & IDENTIFICATION DETAILS",20,a),a+=8,s.setLineWidth(.5),s.line(20,a,190,a),a+=10,s.setFontSize(10),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),[["Login Call Reference",d.referenceNameForLogin||"-"],["Aadhar Number",d.aadharNumber||"-"],["PAN Card",d.panCard||"-"],["Father's Name",d.fathersName||"-"],["Salary A/C Bank Name",d.salaryAccountBank||"-"],["Salary A/C Bank Number",d.salaryAccountBankNumber||"-"],["IFSC Code",d.ifscCode||"-"]].forEach(([e,t])=>{a>270&&(s.addPage(),a=20),s.setFont(void 0,"bold"),s.text(`${e}:`,20,a),s.setFont(void 0,"normal"),s.text(String(t),80,a),a+=8}),a+=5,s.setFontSize(14),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("PERSONAL INFORMATION",20,a),a+=8,s.setLineWidth(.5),s.line(20,a,190,a),a+=10,s.setFontSize(10),s.setFont(void 0,"normal"),s.setTextColor(0,0,0);const c=[["Customer Name",d.customerName||r||"-"],["Mobile Number",d.mobileNumber||"-"],["Alternate Number",d.alternateNumber||"-"],["Personal Email",d.personalEmail||"-"],["Work Email",d.workEmail||"-"],["Qualification",d.qualification||"-"],["Mother's Name",d.mothersName||"-"],["Marital Status",d.maritalStatus||"-"]];return"Married"===d.maritalStatus&&c.push(["Spouse Name",d.spousesName||"-"],["Spouse's DOB",d.spousesDob||"-"]),c.forEach(([e,t])=>{a>270&&(s.addPage(),a=20),s.setFont(void 0,"bold"),s.text(`${e}:`,20,a),s.setFont(void 0,"normal"),s.text(String(t),80,a),a+=8}),a+=5,s.setFontSize(14),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("ADDRESS INFORMATION",20,a),a+=8,s.setLineWidth(.5),s.line(20,a,190,a),a+=10,s.setFontSize(10),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),[["Current Address",d.currentAddress||"-"],["Current Address Landmark",d.currentAddressLandmark||"-"],["Current Address Type",d.currentAddressType||"-"],["Current Address Proof",d.currentAddressProof||"-"],["Years at Current Address",d.yearsAtCurrentAddress||"-"],["Years in Current City",d.yearsInCurrentCity||"-"],["Permanent Address",d.permanentAddress||"-"],["Permanent Address Landmark",d.permanentAddressLandmark||"-"]].forEach(([e,t])=>{a>270&&(s.addPage(),a=20),s.setFont(void 0,"bold"),s.text(`${e}:`,20,a),s.setFont(void 0,"normal"),s.text(String(t),80,a),a+=8}),a+=5,s.setFontSize(14),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("EMPLOYMENT INFORMATION",20,a),a+=8,s.setLineWidth(.5),s.line(20,a,190,a),a+=10,s.setFontSize(10),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),[["Company Name",d.companyName||"-"],["Your Designation",d.yourDesignation||"-"],["Your Department",d.yourDepartment||"-"],["DOJ in Current Company",d.dojCurrentCompany||"-"],["Current Work Experience (years)",d.currentWorkExperience||"-"],["Total Work Experience (years)",d.totalWorkExperience||"-"],["Office Address",d.officeAddress||"-"],["Office Address Landmark",d.officeAddressLandmark||"-"]].forEach(([e,t])=>{a>270&&(s.addPage(),a=20),s.setFont(void 0,"bold"),s.text(`${e}:`,20,a),s.setFont(void 0,"normal"),s.text(String(t),80,a),a+=8}),a+=5,s.setFontSize(14),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("1ST REFERENCE",20,a),a+=8,s.setLineWidth(.5),s.line(20,a,190,a),a+=10,s.setFontSize(10),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),[["Reference Name",d.ref1Name||"-"],["Reference Mobile Number",d.ref1Mobile||"-"],["Reference Relation",d.ref1Relation||"-"],["Reference Address",d.ref1Address||"-"]].forEach(([e,t])=>{a>270&&(s.addPage(),a=20),s.setFont(void 0,"bold"),s.text(`${e}:`,20,a),s.setFont(void 0,"normal"),s.text(String(t),80,a),a+=8}),a+=10,s.setFontSize(14),s.setFont(void 0,"bold"),s.setTextColor(0,174,239),s.text("2ND REFERENCE",20,a),a+=8,s.setLineWidth(.5),s.line(20,a,190,a),a+=10,s.setFontSize(10),s.setFont(void 0,"normal"),s.setTextColor(0,0,0),[["Reference Name",d.ref2Name||"-"],["Reference Mobile Number",d.ref2Mobile||"-"],["Reference Relation",d.ref2Relation||"-"],["Reference Address",d.ref2Address||"-"]].forEach(([e,t])=>{a>270&&(s.addPage(),a=20),s.setFont(void 0,"bold"),s.text(`${e}:`,20,a),s.setFont(void 0,"normal"),s.text(String(t),80,a),a+=8}),s.setFontSize(8),s.setFont(void 0,"italic"),s.setTextColor(100,100,100),s.text("Generated by RupiyaMe CRM System",105,s.internal.pageSize.height-10,{align:"center"}),s.output("blob")}catch(s){return null}})({customerName:u.first_name||u.customer_name||"",mobileNumber:u.mobile||u.phone||"",personalEmail:u.email||"",...u.dynamic_fields?.applicant_form,...u.loginForm,...e,alternateNumber:u.alternative_phone||u.alternate_phone,...Object.keys(u).filter(e=>!["dynamic_fields","loginForm","_id","__v","created_at","updated_at"].includes(e)).reduce((e,t)=>{const s=u[t];return s&&"object"!=typeof s&&(e[t]=s),e},{})},u);if(s){const e=`${u.first_name||"Customer"}_Applicant_Form_${(new Date).toISOString().split("T")[0]}.pdf`;t.file(e,s),m++}}catch(e){}try{const s=u.dynamic_fields?.co_applicant_form||u.coApplicantForm||{},a=((t,s)=>{try{const e=new o;let a=20;e.setFontSize(22),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT FORM",105,a,{align:"center"}),a+=10,e.setLineWidth(1),e.setDrawColor(211,47,47),e.line(20,a,190,a),a+=15,e.setFontSize(12),e.setFont(void 0,"normal"),e.setTextColor(0,0,0);const r=s?.first_name||s?.customerName||s?.name||"N/A",n=s?._id||"N/A",l=(new Date).toLocaleDateString(),i=(new Date).toLocaleTimeString();e.text(`Customer: ${r}`,20,a),e.text(`Lead ID: ${n}`,20,a+8),e.text(`Generated: ${l} ${i}`,20,a+16),a+=35;const d=t||{};e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT IDENTIFICATION DETAILS",20,a),a+=8,e.setLineWidth(.5),e.line(20,a,190,a),a+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),[["Aadhar Number",d.aadharNumber||"-"],["PAN Card",d.panCard||"-"],["Father's Name",d.fathersName||"-"],["Salary A/C Bank Name",d.salaryAccountBank||"-"],["Salary A/C Bank Number",d.salaryAccountBankNumber||"-"],["IFSC Code",d.ifscCode||"-"]].forEach(([t,s])=>{a>270&&(e.addPage(),a=20),e.setFont(void 0,"bold"),e.text(`${t}:`,20,a),e.setFont(void 0,"normal"),e.text(String(s),80,a),a+=8}),a+=5,e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT PERSONAL INFORMATION",20,a),a+=8,e.setLineWidth(.5),e.line(20,a,190,a),a+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.setTextColor(0,0,0);const c=[["Customer Name",d.customerName||"-"],["Mobile Number",d.mobileNumber||"-"],["Alternate Number",d.alternateNumber||"-"],["Personal Email",d.personalEmail||"-"],["Work Email",d.workEmail||"-"],["Qualification",d.qualification||"-"],["Mother's Name",d.mothersName||"-"],["Marital Status",d.maritalStatus||"-"]];return"Married"===d.maritalStatus&&c.push(["Spouse Name",d.spousesName||"-"],["Spouse's DOB",d.spousesDob||"-"]),c.forEach(([t,s])=>{a>270&&(e.addPage(),a=20),e.setFont(void 0,"bold"),e.text(`${t}:`,20,a),e.setFont(void 0,"normal"),e.text(String(s),80,a),a+=8}),a+=5,e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT ADDRESS INFORMATION",20,a),a+=8,e.setLineWidth(.5),e.line(20,a,190,a),a+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),[["Current Address",d.currentAddress||"-"],["Current Address Landmark",d.currentAddressLandmark||"-"],["Current Address Type",d.currentAddressType||"-"],["Current Address Proof",d.currentAddressProof||"-"],["Years at Current Address",d.yearsAtCurrentAddress||"-"],["Years in Current City",d.yearsInCurrentCity||"-"],["Permanent Address",d.permanentAddress||"-"],["Permanent Address Landmark",d.permanentAddressLandmark||"-"]].forEach(([t,s])=>{a>270&&(e.addPage(),a=20),e.setFont(void 0,"bold"),e.text(`${t}:`,20,a),e.setFont(void 0,"normal"),e.text(String(s),80,a),a+=8}),a+=5,e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT EMPLOYMENT INFORMATION",20,a),a+=8,e.setLineWidth(.5),e.line(20,a,190,a),a+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),[["Company Name",d.companyName||"-"],["Your Designation",d.yourDesignation||"-"],["Your Department",d.yourDepartment||"-"],["DOJ in Current Company",d.dojCurrentCompany||"-"],["Current Work Experience (years)",d.currentWorkExperience||"-"],["Total Work Experience (years)",d.totalWorkExperience||"-"],["Office Address",d.officeAddress||"-"],["Office Address Landmark",d.officeAddressLandmark||"-"]].forEach(([t,s])=>{a>270&&(e.addPage(),a=20),e.setFont(void 0,"bold"),e.text(`${t}:`,20,a),e.setFont(void 0,"normal"),e.text(String(s),80,a),a+=8}),a+=5,e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT 1ST REFERENCE",20,a),a+=8,e.setLineWidth(.5),e.line(20,a,190,a),a+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),[["Reference Name",d.ref1Name||"-"],["Reference Mobile Number",d.ref1Mobile||"-"],["Reference Relation",d.ref1Relation||"-"],["Reference Address",d.ref1Address||"-"]].forEach(([t,s])=>{a>270&&(e.addPage(),a=20),e.setFont(void 0,"bold"),e.text(`${t}:`,20,a),e.setFont(void 0,"normal"),e.text(String(s),80,a),a+=8}),a+=10,e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(211,47,47),e.text("CO-APPLICANT 2ND REFERENCE",20,a),a+=8,e.setLineWidth(.5),e.line(20,a,190,a),a+=10,e.setFontSize(10),e.setFont(void 0,"normal"),e.setTextColor(0,0,0),[["Reference Name",d.ref2Name||"-"],["Reference Mobile Number",d.ref2Mobile||"-"],["Reference Relation",d.ref2Relation||"-"],["Reference Address",d.ref2Address||"-"]].forEach(([t,s])=>{a>270&&(e.addPage(),a=20),e.setFont(void 0,"bold"),e.text(`${t}:`,20,a),e.setFont(void 0,"normal"),e.text(String(s),80,a),a+=8}),e.setFontSize(8),e.setFont(void 0,"italic"),e.setTextColor(100,100,100),e.text("Generated by RupiyaMe CRM System",105,e.internal.pageSize.height-10,{align:"center"}),e.output("blob")}catch(e){return null}})({...u.dynamic_fields?.co_applicant_form,...u.coApplicantForm,...s},u);if(a){const e=`${u.first_name||"Customer"}_Co-Applicant_Form_${(new Date).toISOString().split("T")[0]}.pdf`;t.file(e,a),m++}}catch(e){}}for(const o of M)try{const e=await fetch(`${U}/leads/${n}/attachments/${o._id}/download?user_id=${H}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const t=await e.blob(),s=o.filename||o.file_name||`document_${o._id}`;c.file(s,t),m++}}catch(e){}for(const[o,a]of Object.entries(d)){const r=t.folder(o);for(const t of a)try{const e=await fetch(`${U}/leads/${n}/attachments/${t._id}/download?user_id=${H}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const a=await e.blob(),n=t.filename||t.file_name||`document_${t._id}`;if(r.file(n,a),l++,t.has_password){const e=Q(t);s.push({folder:o,filename:n,password:e&&!e.includes("not available")?e:"Password not available"})}}else i++}catch(e){i++}}if(s.length>0){let e="PASSWORD INFORMATION FOR DOWNLOADED FILES\n";e+="="+"=".repeat(45)+"\n\n",e+=`Generated on: ${(new Date).toLocaleString()}\n`,e+=`Lead ID: ${n}\n\n`;const o={};s.forEach(e=>{o[e.folder]||(o[e.folder]=[]),o[e.folder].push(e)}),Object.entries(o).forEach(([t,s])=>{e+=`${t}:\n`,e+="-".repeat(t.length+1)+"\n",s.forEach(t=>{e+=`â€¢ ${t.filename}\n`,e+=`  Password: ${t.password}\n\n`}),e+="\n"}),e+="\nIMPORTANT NOTES:\n",e+="- Keep this file secure and delete it after use\n",e+="- Some documents may not require passwords despite being listed\n",e+="- If 'Password not available' is shown, the file might not be password protected\n",t.file("PASSWORDS.txt",e)}if(l>0){const e=await t.generateAsync({type:"blob"}),o=`Lead_${n}_Documents_${(new Date).toISOString().split("T")[0]}.zip`;r.saveAs(e,o);let a=`Successfully downloaded ${l} file(s) as ZIP archive.`;m>0&&(a+=` Includes "All" folder with ${m} files.`),s.length>0&&(a+=" Password information is included in PASSWORDS.txt file."),i>0&&(a+=` ${i} file(s) failed to download.`),p(a,"success")}else p("No files could be downloaded","error")}catch(e){p("Failed to create download archive: "+e.message,"error")}finally{I(!1)}else p("No documents available to download","warning")},disabled:T||0===M.length,children:[e.jsx("span",{id:"downloadAllText",children:T?"Creating ZIP...":`Download All Files (${M.length})`}),T&&e.jsx("div",{id:"downloadAllLoader",className:"loader ml-2"})]}),e.jsx("button",{className:"px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-300",onClick:async()=>{if(!n)return void alert("No lead ID provided");const e=Object.entries(j).filter(([e,t])=>t.length>0);if(0!==e.length)try{E(!0);for(const[t,s]of e){const e=g.find(e=>e.name.toLowerCase().replace(/\s+/g,"_")===t),o=e?null:w.find(e=>e.name.toLowerCase().replace(/\s+/g,"_")===t);(e||o)&&s.length>0&&await Z(e||o,s)}alert("All files uploaded successfully!")}catch(t){alert("Error uploading files: "+t.message)}finally{E(!1)}else alert("No files selected for upload")},disabled:$||Object.values(j).every(e=>0===e.length),children:$?"Uploading...":"Upload All Files"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-right mt-2",children:"* Each attachment type has its own password field for secure uploads"})]}),c&&e.jsx("div",{id:"attachmentsModal",className:"modal-overlay fixed top-0 left-0 right-0 bottom-0 bg-[rgba(17,24,39,0.6)] backdrop-blur-sm z-40 flex items-center justify-center",children:e.jsxs("div",{ref:f,className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl m-4 transform transition-all duration-300 ease-out "+(c?"scale-100 opacity-100":"scale-95 opacity-0"),id:"modal-panel",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),e.jsxs("h2",{id:"modalTitle",className:"text-xl font-bold text-gray-800",children:["Manage: ",u?.name]})]}),e.jsx("button",{id:"closeModalBtn",className:"p-1 rounded-full hover:bg-gray-200",onClick:()=>{m(!1),setTimeout(()=>{x(null)},300)},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:e.jsxs("div",{id:"fileCardGrid",className:"file-card-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[u&&M.filter(e=>e.document_type===u.name).map((t,s)=>e.jsxs("div",{className:"file-card flex flex-col items-center p-3 text-center rounded-lg bg-white border","data-id":t._id,children:[e.jsxs("div",{className:"relative",children:[t.file_name?.toLowerCase().endsWith(".pdf")||t.filename?.toLowerCase().endsWith(".pdf")?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"})}):t.file_name?.match(/\.(jpg|jpeg|png|gif)$/i)||t.filename?.match(/\.(jpg|jpeg|png|gif)$/i)?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),t.has_password&&e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-yellow-500 items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})})]})]}),e.jsx("p",{className:"mt-2 text-sm font-semibold text-gray-800 break-all w-full",children:t.filename||t.file_name||`Document ${s+1}`}),e.jsx("p",{className:"text-xs text-gray-500",children:t.fileSize?`${(t.fileSize/1024/1024).toFixed(2)} MB`:"Size unknown"}),e.jsx("div",{className:"w-full border-t my-2"}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 w-full",children:[e.jsxs("button",{className:"view-btn flex items-center justify-center p-1.5 text-gray-500 hover:bg-gray-100 rounded-md tooltip",onClick:()=>window.open(`${U}/leads/${n}/attachments/${t._id}/view?user_id=${H}`,"_blank"),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"tooltiptext",children:"View"})]}),e.jsxs("button",{className:"download-btn flex items-center justify-center p-1.5 text-gray-500 hover:bg-gray-100 rounded-md tooltip",onClick:()=>(e=>{window.open(`${U}/leads/${n}/attachments/${e}/download?user_id=${H}`,"_blank");const t=M.find(t=>t._id===e);if(t&&t.has_password){D(t=>({...t,[e]:!0}));const s=t.document_type,o=Q(t);o&&!o.includes("not available")?p(`The document "${t.filename}" is password protected. Click the lock icon to view the password.`,"warning"):p(`The document "${t.filename}" is password protected. Please enter a password in the "${s}" field above.`,"warning"),setTimeout(()=>{D(t=>({...t,[e]:!1}))},1e4)}else p(`Downloading "${t?.filename||"document"}"...`,"success")})(t._id),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),e.jsx("span",{className:"tooltiptext",children:"Download"})]}),t.has_password&&e.jsxs("button",{"data-password":Q(t),className:"copy-password-btn flex items-center justify-center p-1.5 text-blue-600 hover:bg-blue-100 rounded-md tooltip",onClick:()=>{const e=Q(t);e&&!e.includes("not available")?(navigator.clipboard.writeText(e),p("Password copied to clipboard!","success")):p("No password available to copy","warning")},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m-6 4h.01M9 16h.01"})}),e.jsx("span",{className:"tooltiptext",children:"Copy Password"})]}),e.jsxs("button",{className:"delete-btn flex items-center justify-center p-1.5 text-red-500 hover:bg-red-100 rounded-md tooltip",onClick:()=>(async e=>{const t=M.find(t=>t._id===e);if(t&&window.confirm(`Are you sure you want to delete "${t.filename||t.file_name||"this document"}"?\n\nThis action cannot be undone.`))try{E(!0);const s=await fetch(`${U}/leads/${n}/attachments/${e}?user_id=${H}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.ok)p(`Document "${t.filename||t.file_name}" deleted successfully!`,"success"),G();else{const e=await s.json();p(`Failed to delete document: ${e.detail||"Unknown error"}`,"error")}}catch(s){p("Failed to delete document: "+s.message,"error")}finally{E(!1)}})(t._id),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{className:"tooltiptext",children:"Delete"})]})]})]},s)),u&&0===M.filter(e=>e.document_type===u.name).length&&e.jsx("p",{className:"text-gray-500 col-span-full text-center",children:"No files uploaded for this category yet."})]})}),e.jsxs("div",{className:"p-5 border-t bg-gray-50 rounded-b-xl",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload More Files"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:'Select files and click "Add Files" to upload'}),$&&e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-sm text-blue-600",children:"Uploading..."})]}),e.jsx("div",{className:"flex flex-col gap-3",children:u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[e.jsx("input",{id:"modalFileInput",type:"file",multiple:!0,onChange:(K=u.name.toLowerCase().replace(/\s+/g,"_"),e=>{const t=Array.from(e.target.files);0!==t.length&&(C(e=>({...e,[K]:t})),p(`${t.length} file(s) selected. Click "Add Files" to upload.`,"info"))}),className:"block w-full text-sm text-black file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer flex-grow"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"modalPasswordInput",type:"password",placeholder:"Password (optional)",value:k[u.name.toLowerCase().replace(/\s+/g,"_")]||"",onChange:e=>{X(u.name.toLowerCase().replace(/\s+/g,"_"),e.target.value)},onFocus:()=>{},className:"w-full sm:w-auto px-3 py-2 border text-black border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",disabled:!1,readOnly:!1}),k[u.name.toLowerCase().replace(/\s+/g,"_")]&&e.jsx("button",{type:"button",onClick:()=>X(u.name.toLowerCase().replace(/\s+/g,"_"),""),className:"px-2 py-2 text-gray-500 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Clear password",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:async()=>{if(!u)return void p("No category selected","error");const e=u.name.toLowerCase().replace(/\s+/g,"_"),t=j[e];if(t&&0!==t.length)try{p(`Uploading ${t.length} file(s) for ${u.name}...`,"info"),await Z(u,t)}catch(s){p("Upload failed: "+s.message,"error")}else p("Please select files first","warning")},disabled:$||!j[u.name.toLowerCase().replace(/\s+/g,"_")]?.length,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 font-medium",children:$?"Uploading...":"Add Files"})})]})})]})]})}),e.jsx("textarea",{id:"copy-helper",style:{position:"absolute",left:"-9999px"}})]}):e.jsx("div",{className:"max-w-9xl mx-auto",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 border-b pb-4 mb-6",style:{borderColor:"#3b82f640"},children:"Attachments"}),e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-lg text-red-600 text-center",children:["Error: User ID not found. Please log in again.",e.jsx("br",{}),e.jsxs("small",{className:"text-gray-500",children:["Debug: userId prop = ",l,", localStorage userId = ",localStorage.getItem("userId")]})]})})]})});var K}export{n as default};
