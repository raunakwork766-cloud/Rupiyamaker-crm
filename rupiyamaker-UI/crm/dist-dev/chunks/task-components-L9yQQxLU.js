import{g as e,i as t,r as a,s as n,t as r,o as s,p as o,u as i,_ as l}from"./lead-components-v_oWzEmV.js";import{j as c}from"./vendor-mui-C1GmDdcn.js";import{r as d,R as u,b as p,c as m,a as h}from"./vendor-react-EzoxUMNY.js";import{f,a as g,A as y}from"./employee-components-BKn44sLk.js";import{c as x,i as v,a as b,b as w,g as _,d as k,e as D,f as N,h as C,j as S,p as T,t as j,k as E,l as M,m as L,n as P,s as I,o as A,q as R,r as O,u as F,v as $,w as B,x as Y,y as W,z as U,A as H,B as z,C as K,D as V,E as Q,F as q,G,H as J,I as X,J as Z,K as ee,L as te,M as ae,N as ne,O as re,P as se,Q as oe,R as ie,S as le,T as ce,U as de,V as ue,W as pe,X as me,Y as he,Z as fe,_ as ge,$ as ye,a0 as xe,a1 as ve,a2 as be,a3 as we,a4 as _e,a5 as ke}from"./vendor-utils-QXd9EeNt.js";!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var De=e=>"number"==typeof e&&!isNaN(e),Ne=e=>"string"==typeof e,Ce=e=>"function"==typeof e,Se=e=>Ne(e)||Ce(e)?e:null,Te=(e,t)=>!1===e||De(e)&&e>0?e:t,je=e=>d.isValidElement(e)||Ne(e)||Ce(e)||De(e);function Ee(e,t){return{content:Me(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function Me(e,t,a=!1){return d.isValidElement(e)&&!Ne(e.type)?d.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):Ce(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function Le({delay:e,isRunning:t,closeToast:a,type:n="default",hide:r,className:s,controlledProgress:o,progress:i,rtl:l,isIn:c,theme:d}){let p=r||o&&0===i,m={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(m.transform=`scaleX(${i})`);let h=x("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":l}),f=Ce(s)?s({rtl:l,type:n,defaultClassName:h}):x(h,s),g={[o&&i>=1?"onTransitionEnd":"onAnimationEnd"]:o&&i<1?null:()=>{c&&a()}};return u.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},u.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${n}`}),u.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:f,style:m,...g}))}var Pe=1,Ie=()=>""+Pe++;var Ae=new Map,Re=[],Oe=new Set,Fe=e=>Oe.forEach(t=>t(e)),$e=()=>Ae.size>0;function Be(e,t){var a;if(t)return!(null==(a=Ae.get(t))||!a.isToastActive(e));let n=!1;return Ae.forEach(t=>{t.isToastActive(e)&&(n=!0)}),n}function Ye(e,t){je(e)&&($e()||Re.push({content:e,options:t}),Ae.forEach(a=>{a.buildToast(e,t)}))}function We(e,t){Ae.forEach(a=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===a.id)&&a.toggle(e,null==t?void 0:t.id)})}function Ue(e){let t=e.containerId||1;return{subscribe(a){let n=function(e,t,a){let n=1,r=0,s=[],o=[],i=t,l=new Map,c=new Set,d=()=>{o=Array.from(l.values()),c.forEach(e=>e())},u=e=>{var t,a;null==(a=null==(t=e.props)?void 0:t.onClose)||a.call(t,e.removalReason),e.isActive=!1},p=e=>{if(null==e)l.forEach(u);else{let t=l.get(e);t&&u(t)}d()},m=e=>{var t,n;let{toastId:r,updateId:s}=e.props,o=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(r,e),d(),a(Ee(e,o?"added":"updated")),o&&(null==(n=(t=e.props).onOpen)||n.call(t))};return{id:e,props:i,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(a=>{var n;(null==t||t===a.props.toastId)&&(null==(n=a.toggle)||n.call(a,e))})},removeToast:p,toasts:l,clearQueue:()=>{r-=s.length,s=[]},buildToast:(t,o)=>{if((({containerId:t,toastId:a,updateId:n})=>{let r=t?t!==e:1!==e,s=l.has(a)&&null==n;return r||s})(o))return;let{toastId:c,updateId:u,data:h,staleId:f,delay:g}=o,y=null==u;y&&r++;let x={...i,style:i.toastStyle,key:n++,...Object.fromEntries(Object.entries(o).filter(([e,t])=>null!=t)),toastId:c,updateId:u,data:h,isIn:!1,className:Se(o.className||i.toastClassName),progressClassName:Se(o.progressClassName||i.progressClassName),autoClose:!o.isLoading&&Te(o.autoClose,i.autoClose),closeToast(e){l.get(c).removalReason=e,p(c)},deleteToast(){let e=l.get(c);if(null!=e){if(a(Ee(e,"removed")),l.delete(c),r--,r<0&&(r=0),s.length>0)return void m(s.shift());d()}}};x.closeButton=i.closeButton,!1===o.closeButton||je(o.closeButton)?x.closeButton=o.closeButton:!0===o.closeButton&&(x.closeButton=!je(i.closeButton)||i.closeButton);let v={content:t,props:x,staleId:f};i.limit&&i.limit>0&&r>i.limit&&y?s.push(v):De(g)?setTimeout(()=>{m(v)},g):m(v)},setProps(e){i=e},setToggle:(e,t)=>{let a=l.get(e);a&&(a.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>o}}(t,e,Fe);Ae.set(t,n);let r=n.observe(a);return Re.forEach(e=>Ye(e.content,e.options)),Re=[],()=>{r(),Ae.delete(t)}},setProps(e){var a;null==(a=Ae.get(t))||a.setProps(e)},getSnapshot(){var e;return null==(e=Ae.get(t))?void 0:e.getSnapshot()}}}function He(e){return e&&(Ne(e.toastId)||De(e.toastId))?e.toastId:Ie()}function ze(e,t){return Ye(e,t),t.toastId}function Ke(e,t){return{...t,type:t&&t.type||e,toastId:He(t)}}function Ve(e){return(t,a)=>ze(t,Ke(e,a))}function Qe(e,t){return ze(e,Ke("default",t))}Qe.loading=(e,t)=>ze(e,Ke("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Qe.promise=function(e,{pending:t,error:a,success:n},r){let s;t&&(s=Ne(t)?Qe.loading(t,r):Qe.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(e,t,a)=>{if(null==t)return void Qe.dismiss(s);let n={type:e,...o,...r,data:a},i=Ne(t)?{render:t}:t;return s?Qe.update(s,{...n,...i}):Qe(i.render,{...n,...i}),a},l=Ce(e)?e():e;return l.then(e=>i("success",n,e)).catch(e=>i("error",a,e)),l},Qe.success=Ve("success"),Qe.info=Ve("info"),Qe.error=Ve("error"),Qe.warning=Ve("warning"),Qe.warn=Qe.warning,Qe.dark=(e,t)=>ze(e,Ke("default",{theme:"dark",...t})),Qe.dismiss=function(e){!function(e){if($e()){if(null==e||(e=>Ne(e)||De(e))(e))Ae.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Ae.get(e.containerId);t?t.removeToast(e.id):Ae.forEach(t=>{t.removeToast(e.id)})}}else Re=Re.filter(t=>null!=e&&t.options.toastId!==e)}(e)},Qe.clearWaitingQueue=(e={})=>{Ae.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Qe.isActive=Be,Qe.update=(e,t={})=>{let a=((e,{containerId:t})=>{var a;return null==(a=Ae.get(t||1))?void 0:a.toasts.get(e)})(e,t);if(a){let{props:n,content:r}=a,s={delay:100,...n,...t,toastId:t.toastId||e,updateId:Ie()};s.toastId!==e&&(s.staleId=e);let o=s.render||r;delete s.render,ze(o,s)}},Qe.done=e=>{Qe.update(e,{progress:1})},Qe.onChange=function(e){return Oe.add(e),()=>{Oe.delete(e)}},Qe.play=e=>We(!0,e),Qe.pause=e=>We(!1,e);var qe="undefined"!=typeof window?d.useLayoutEffect:d.useEffect,Ge=({theme:e,type:t,isLoading:a,...n})=>u.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...n}),Je={info:function(e){return u.createElement(Ge,{...e},u.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return u.createElement(Ge,{...e},u.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return u.createElement(Ge,{...e},u.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return u.createElement(Ge,{...e},u.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return u.createElement("div",{className:"Toastify__spinner"})}};var Xe=e=>{let{isRunning:t,preventExitTransition:a,toastRef:n,eventHandlers:r,playToast:s}=function(e){let[t,a]=d.useState(!1),[n,r]=d.useState(!1),s=d.useRef(null),o=d.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:i,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:p}=e;function m(){a(!0)}function h(){a(!1)}function f(a){let n=s.current;if(o.canDrag&&n){o.didMove=!0,t&&h(),"x"===e.draggableDirection?o.delta=a.clientX-o.start:o.delta=a.clientY-o.start,o.start!==a.clientX&&(o.canCloseOnClick=!1);let r="x"===e.draggableDirection?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;n.style.transform=`translate3d(${r},0)`,n.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance))}}function g(){document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",g);let t=s.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return r(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=Ae.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:a}),d.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||h(),window.addEventListener("focus",m),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",h)}},[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){o.didMove=!1,document.addEventListener("pointermove",f),document.addEventListener("pointerup",g);let a=s.current;o.canCloseOnClick=!0,o.canDrag=!0,a.style.transition="none","x"===e.draggableDirection?(o.start=t.clientX,o.removalDistance=a.offsetWidth*(e.draggablePercent/100)):(o.start=t.clientY,o.removalDistance=a.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:a,bottom:n,left:r,right:o}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=r&&t.clientX<=o&&t.clientY>=a&&t.clientY<=n?h():m()}};return i&&l&&(y.onMouseEnter=h,e.stacked||(y.onMouseLeave=m)),p&&(y.onClick=e=>{u&&u(e),o.canCloseOnClick&&c(!0)}),{playToast:m,pauseToast:h,isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:y}}(e),{closeButton:o,children:i,autoClose:l,onClick:c,type:p,hideProgressBar:m,closeToast:h,transition:f,position:g,className:y,style:v,progressClassName:b,updateId:w,role:_,progress:k,rtl:D,toastId:N,deleteToast:C,isIn:S,isLoading:T,closeOnClick:j,theme:E,ariaLabel:M}=e,L=x("Toastify__toast",`Toastify__toast-theme--${E}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":D},{"Toastify__toast--close-on-click":j}),P=Ce(y)?y({rtl:D,position:g,type:p,defaultClassName:L}):x(L,y),I=function({theme:e,type:t,isLoading:a,icon:n}){let r=null,s={theme:e,type:t};return!1===n||(Ce(n)?r=n({...s,isLoading:a}):d.isValidElement(n)?r=d.cloneElement(n,s):a?r=Je.spinner():(e=>e in Je)(t)&&(r=Je[t](s))),r}(e),A=!!k||!l,R={closeToast:h,type:p,theme:E},O=null;return!1===o||(O=Ce(o)?o(R):d.isValidElement(o)?d.cloneElement(o,R):function({closeToast:e,theme:t,ariaLabel:a="close"}){return u.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":a},u.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},u.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(R)),u.createElement(f,{isIn:S,done:C,position:g,preventExitTransition:a,nodeRef:n,playToast:s},u.createElement("div",{id:N,tabIndex:0,onClick:c,"data-in":S,className:P,...r,style:v,ref:n,...S&&{role:_,"aria-label":M}},null!=I&&u.createElement("div",{className:x("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},I),Me(i,e,!t),O,!e.customProgressBar&&u.createElement(Le,{...w&&!A?{key:`p-${w}`}:{},rtl:D,theme:E,delay:l,isRunning:t,isIn:S,closeToast:h,hide:m,type:p,className:b,controlledProgress:A,progress:k||0})))},Ze={position:"top-right",transition:function({enter:e,exit:t,appendPosition:a=!1,collapse:n=!0,collapseDuration:r=300}){return function({children:s,position:o,preventExitTransition:i,done:l,nodeRef:c,isIn:p,playToast:m}){let h=a?`${e}--${o}`:e,f=a?`${t}--${o}`:t,g=d.useRef(0);return d.useLayoutEffect(()=>{let e=c.current,t=h.split(" "),a=n=>{n.target===c.current&&(m(),e.removeEventListener("animationend",a),e.removeEventListener("animationcancel",a),0===g.current&&"animationcancel"!==n.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",a),e.addEventListener("animationcancel",a)},[]),d.useEffect(()=>{let e=c.current,t=()=>{e.removeEventListener("animationend",t),n?function(e,t,a=300){let{scrollHeight:n,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=n+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}(e,l,r):l()};p||(i?t():(g.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[p]),u.createElement(u.Fragment,null,s)}}(((e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}))("bounce",!0)),autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code};function et(e){let t={...Ze,...e},a=e.stacked,[n,r]=d.useState(!0),s=d.useRef(null),{getToastToRender:o,isToastActive:i,count:l}=function(e){var t;let{subscribe:a,getSnapshot:n,setProps:r}=d.useRef(Ue(e)).current;r(e);let s=null==(t=d.useSyncExternalStore(a,n,n))?void 0:t.slice();return{getToastToRender:function(t){if(!s)return[];let a=new Map;return e.newestOnTop&&s.reverse(),s.forEach(e=>{let{position:t}=e.props;a.has(t)||a.set(t,[]),a.get(t).push(e)}),Array.from(a,e=>t(e[0],e[1]))},isToastActive:Be,count:null==s?void 0:s.length}}(t),{className:c,style:p,rtl:m,containerId:h,hotKeys:f}=t;function g(e){let t=x("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":m});return Ce(c)?c({position:e,rtl:m,defaultClassName:t}):x(t,Se(c))}function y(){a&&(r(!0),Qe.play())}return qe(()=>{var e;if(a){let a=s.current.querySelectorAll('[data-in="true"]'),r=12,o=null==(e=t.position)?void 0:e.includes("top"),i=0,l=0;Array.from(a).reverse().forEach((e,t)=>{let a=e;a.classList.add("Toastify__toast--stacked"),t>0&&(a.dataset.collapsed=`${n}`),a.dataset.pos||(a.dataset.pos=o?"top":"bot");let s=i*(n?.2:1)+(n?0:r*t);a.style.setProperty("--y",`${o?s:-1*s}px`),a.style.setProperty("--g",`${r}`),a.style.setProperty("--s",""+(1-(n?l:0))),i+=a.offsetHeight,l+=.025})}},[n,l,a]),d.useEffect(()=>{function e(e){var t;let a=s.current;f(e)&&(null==(t=a.querySelector('[tabIndex="0"]'))||t.focus(),r(!1),Qe.pause()),"Escape"===e.key&&(document.activeElement===a||null!=a&&a.contains(document.activeElement))&&(r(!0),Qe.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f]),u.createElement("section",{ref:s,className:"Toastify",id:h,onMouseEnter:()=>{a&&(r(!1),Qe.pause())},onMouseLeave:y,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((e,t)=>{let n=t.length?{...p}:{...p,pointerEvents:"none"};return u.createElement("div",{tabIndex:-1,className:g(e),"data-stacked":a,style:n,key:`c-${e}`},t.map(({content:e,props:t})=>u.createElement(Xe,{...t,stacked:a,collapseAll:y,isIn:i(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}const tt="/api",at=e=>{const t=e.startsWith("/")?e.slice(1):e;return`${tt}/${t}`},nt=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=e.startsWith("/")?e.slice(1):e;return`${tt}/${t}`},rt=d.lazy(()=>l(()=>Promise.resolve().then(()=>Br),void 0)),st=d.lazy(()=>l(()=>Promise.resolve().then(()=>zr),void 0)),ot=d.lazy(()=>l(()=>Promise.resolve().then(()=>Br),void 0).then(e=>(ot._component=e.default,e))),it=d.lazy(()=>l(()=>Promise.resolve().then(()=>zr),void 0).then(e=>(it._component=e.default,e))),lt="/api",ct=async(e,t={})=>{const a={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,...t.body instanceof FormData?{}:{"Content-Type":"application/json"},Accept:"application/json",Origin:window.location.origin}},n={...a,...t,headers:{...a.headers,...t.headers||{}}};try{let t=3,a=500,o=null;for(;t>0;)try{const t=await fetch(e,n);if(!t.ok){if(422===t.status)try{await t.clone().json()}catch(r){await t.clone().text()}throw new Error(`HTTP error! status: ${t.status}`)}return t}catch(s){o=s,t--,t>0&&(await new Promise(e=>setTimeout(e,a)),a*=2)}throw o}catch(s){throw s}},dt=u.memo(({status:e})=>{switch(e){case"Completed":return c.jsx("span",{className:"bg-green-900 text-green-300 px-3 py-1 rounded-full text-xs font-bold",children:"Completed"});case"Failed":case"FAILED":return c.jsx("span",{className:"bg-orange-900 text-orange-300 px-3 py-1 rounded-full text-xs font-bold",children:"Failed"});case"Cancelled":return c.jsx("span",{className:"bg-red-900 text-red-300 px-3 py-1 rounded-full text-xs font-bold",children:"Cancelled"});case"Pending":return c.jsx("span",{className:"bg-blue-900 text-blue-300 px-3 py-1 rounded-full text-xs font-bold",children:"Pending"});case"In Progress":return c.jsx("span",{className:"bg-yellow-900 text-yellow-300 px-3 py-1 rounded-full text-xs font-bold",children:"In Progress"});default:return c.jsx("span",{className:"bg-gray-800 text-gray-300 px-3 py-1 rounded-full text-xs font-bold",children:e})}});dt.displayName="StatusPill";const ut={subject:"",message:"",typeTask:"To-Do",leadLogin:"",customerName:"",date:"",time:"",assign:"",createdBy:"",status:"Pending"},pt=Object.freeze(Object.defineProperty({__proto__:null,default:function({onTaskStatusChange:u,onTaskUpdate:p}={}){const m="tasks_cache_v1",h="stats_cache_v1",y="tasks_cache_timestamp",x=(()=>{try{const e=localStorage.getItem(y),t=Date.now();if(e&&t-parseInt(e)<3e5){const e=localStorage.getItem(m),t=localStorage.getItem(h);if(e&&t)return{tasks:JSON.parse(e),stats:JSON.parse(t)}}}catch(e){}return null})(),[v,b]=d.useState(x?.tasks||[]),[w,_]=d.useState(x?.stats||{total_tasks:0,pending_tasks:0,in_progress_tasks:0,completed_tasks:0,failed_tasks:0,overdue_tasks:0,assigned_to_me:0,due_today_tasks:0,upcoming_tasks:0}),[k,D]=d.useState(!x),[N,C]=d.useState(null),[S,T]=d.useState(""),[j,E]=d.useState("due_today"),[M,L]=d.useState("all"),[P,I]=d.useState(null),[A,R]=d.useState(!1),[O,F]=d.useState(ut),[$,B]=d.useState(""),[Y,W]=d.useState(""),[U,H]=d.useState(""),[z,K]=d.useState(!1),[V,Q]=d.useState(!1),[q,G]=d.useState(!1),[J,X]=d.useState(null),[Z,ee]=d.useState(null),[te,ae]=d.useState(!1),[ne,re]=d.useState([]),[se,oe]=d.useState(!1),[ie,le]=d.useState(!1),ce=d.useRef(!1),de=d.useRef(""),ue=d.useRef(!1),pe=d.useRef(null),[me,he]=d.useState(!1),[fe,ge]=d.useState(!1),[ye,xe]=d.useState(50),ve=e=>{if(pe.current){const t=300,a=pe.current.scrollLeft,n="left"===e?a-t:a+t;pe.current.scrollTo({left:n,behavior:"smooth"})}},be=()=>{if(pe.current){const{scrollLeft:e,scrollWidth:t,clientWidth:a}=pe.current;he(e>0),ge(e<t-a-1)}},[we,_e]=d.useState({show:!0,create:!1,edit_others:!1});d.useCallback(()=>{const e=localStorage.getItem("userData");if(e){const{user_id:t}=JSON.parse(e);return t}return null},[]);const ke=d.useCallback(()=>{try{const n=e();if(t(n))return void _e({show:!0,create:!0,edit_others:!0,delete:!0});const r={show:a(n,"tasks","show")||a(n,"Tasks","show"),create:a(n,"tasks","create")||a(n,"Tasks","create"),edit_others:a(n,"tasks","edit_others")||a(n,"Tasks","edit_others"),delete:a(n,"tasks","delete")||a(n,"Tasks","delete")};if("*"===n?.tasks||"*"===n?.Tasks||"all"===n?.tasks||"all"===n?.Tasks)return void _e({show:!0,create:!0,edit_others:!0,delete:!0});r.show?_e({show:!0,create:r.create||!0,edit_others:r.edit_others,delete:r.delete}):_e({show:!1,create:!1,edit_others:!1,delete:!1})}catch(n){_e({show:!0,create:!1,edit_others:!1})}},[]);d.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("userId"),a=localStorage.getItem("userName"),n=localStorage.getItem("userFirstName"),r=localStorage.getItem("userLastName");if(t&&H(t),a)W(a);else if(n&&r)W(`${n} ${r}`);else if(n)W(n);else{const t=localStorage.getItem("userData");if(t)try{const e=JSON.parse(t);e.name?W(e.name):e.fullName?W(e.fullName):e.firstName&&e.lastName?W(`${e.firstName} ${e.lastName}`):e.firstName?W(e.firstName):e.username?W(e.username):e.email?W(e.email):W("Current User")}catch(e){W("Current User")}else W("Current User")}ke(),K(!0),"undefined"!=typeof window&&setTimeout(()=>{const e=l(()=>Promise.resolve().then(()=>Br),void 0),t=l(()=>Promise.resolve().then(()=>zr),void 0);window.__componentCache={createTask:e,editTask:t}},1e3),t&&De()}catch(t){W("Current User"),K(!0)}})()},[]);const De=async(e={})=>(async(e={},t=!1)=>{if(!U)return;const a=JSON.stringify({currentUserId:U,filters:e,search:S,initialLoad:t});if(!ce.current||a!==de.current){ce.current=!0,de.current=a;try{x&&!t||D(!0),C(null);const a=new URLSearchParams({user_id:U,...e});S&&a.append("search",S),t&&!ue.current&&a.append("limit","150");const r=await ct(`${lt}/tasks/with-stats?${a}`),s=await r.json(),o=s.tasks||[],i=s.stats||{};if(!Array.isArray(o))throw new Error("Invalid response format from server");const l=o.map(e=>({id:e.id||e._id,createdBy:e.creator_name||"Unknown",status:e.notes&&e.notes.includes("[SYSTEM_FAILED_TASK]")?"FAILED":e.status,subject:e.subject,message:e.task_details||"",typeTask:e.task_type,leadLogin:e.lead_info?.lead_login||"N/A",customerName:e.lead_info?.customer_name||"N/A",date:e.due_date||(new Date).toISOString().split("T")[0],time:e.due_time||"00:00",assign:e.assigned_users?.map(e=>e.name).join(", ")||"Unassigned",priority:e.priority||"Medium",created_at:e.created_at,updated_at:e.updated_at,is_urgent:e.is_urgent||!1,notes:e.notes||"",lead_id:e.lead_id,loan_type:e.loan_type,assigned_to:e.assigned_to||[],created_by:e.created_by,repeat_type:e.repeat_type||e.recurrence_type||e.is_recurring||e.repeat_frequency||e.recurring||e.repeat_interval||(e.is_repeat?"Yes":"No"),createdDate:e.created_at?g(e.created_at):g(new Date),createdTime:e.created_at?f(e.created_at):f(new Date)}));b(l);const c={total_tasks:i.total_tasks||0,pending_tasks:i.pending_tasks||0,in_progress_tasks:i.in_progress_tasks||0,completed_tasks:i.completed_tasks||0,overdue_tasks:i.overdue_tasks||0,urgent_tasks:i.urgent_tasks||0,my_tasks:i.my_tasks||0,assigned_to_me:i.assigned_to_me||0,due_today_tasks:i.due_today_tasks||0,upcoming_tasks:i.upcoming_tasks||0,failed_tasks:i.failed_tasks||0};_(c);try{localStorage.setItem(m,JSON.stringify(l)),localStorage.setItem(h,JSON.stringify(c)),localStorage.setItem(y,Date.now().toString())}catch(n){}t&&(ue.current=!0)}catch(r){C(`Failed to load tasks: ${r.message||"Unknown error"}`)}finally{D(!1),ce.current=!1}}})(e,!0),Ne=async()=>{},[Ce,Se]=d.useState(null);d.useEffect(()=>{z&&U&&(De(),Ne())},[z,U,j,M]),d.useEffect(()=>{v.length>0?setTimeout(()=>{(()=>{if(0===v.length)return;const e=new Date;e.setHours(0,0,0,0);const t=e=>{if(!e)return null;try{const t=new Date(e);return isNaN(t.getTime())?null:(t.setHours(0,0,0,0),t)}catch(t){return null}},a=v.filter(e=>"Completed"!==e.status&&"Cancelled"!==e.status&&"Failed"!==e.status&&"FAILED"!==e.status),n=a.filter(a=>{const n=t(a.date);return!!n&&n.getTime()===e.getTime()}).length,r=v.filter(a=>{const n=t(a.date);return!!n&&n.getTime()>e.getTime()}).length,s=a.filter(a=>{const n=t(a.date);return!!n&&n.getTime()<e.getTime()}).length,o=v.filter(e=>"Completed"===e.status).length,i=v.filter(e=>"Failed"===e.status||"FAILED"===e.status).length,l=v.filter(e=>"Pending"===e.status).length,c=v.filter(e=>"In Progress"===e.status).length;v.length,_(e=>({...e,due_today_tasks:n,upcoming_tasks:r,overdue_tasks:s,total_tasks:v.length,completed_tasks:o,failed_tasks:i,pending_tasks:l,in_progress_tasks:c}))})()},100):0!==v.length||k||_(e=>({...e,due_today_tasks:0,upcoming_tasks:0,overdue_tasks:0,total_tasks:0}))},[v,k]),d.useEffect(()=>{if(!z||!U)return;const e=setTimeout(()=>{De(),Ne()},500);return()=>clearTimeout(e)},[S]),d.useEffect(()=>{Ce&&z&&U&&(De(),Ne())},[Ce]);const{realTimeCounts:Te,safeCounts:je,filteredTasks:Ee}=d.useMemo(()=>{if(0===v.length)return{realTimeCounts:{dueToday:0,upcoming:0,overdue:0,all:0,completed:0},safeCounts:{dueToday:0,upcoming:0,overdue:0,all:0,completed:0},filteredTasks:[]};const e=new Date;e.setHours(0,0,0,0);const t=e.getTime();let a=v;if("all"!==M){const e=Y.toLowerCase().trim();a=v.filter(t=>{if("assigned_to_me"===M){const a=t.assign||"";return!(!a.trim()||"Unassigned"===a)&&a.toLowerCase().includes(e)}if("assigned_by_me"===M){const a=t.createdBy||"",n=t.assign||"";return a.toLowerCase().trim()===e&&"Unassigned"!==n&&""!==n.trim()}return!0})}const n=a.filter(e=>"Completed"!==e.status&&"Cancelled"!==e.status&&"Failed"!==e.status&&"FAILED"!==e.status),r=a.filter(e=>"Completed"===e.status),s=a.filter(e=>"Failed"===e.status||"FAILED"===e.status),o=e=>{if(!e)return null;try{const t=new Date(e);return isNaN(t.getTime())?null:(t.setHours(0,0,0,0),t.getTime())}catch{return null}};let i=0,l=0,c=0;n.forEach(e=>{const a=o(e.date);null!==a&&(a===t?i++:a<t&&c++)}),a.forEach(e=>{const a=o(e.date);a&&a>t&&l++});const d={dueToday:i,upcoming:l,overdue:c,all:a.length,completed:r.length,failed:s.length},u="all"!==M?d:{dueToday:Math.max(w.due_today_tasks||0,d.dueToday),upcoming:Math.max(w.upcoming_tasks||0,d.upcoming),overdue:Math.max(w.overdue_tasks||0,d.overdue),all:Math.max(w.total_tasks||0,d.all),completed:Math.max(w.completed_tasks||0,d.completed),failed:Math.max(w.failed_tasks||0,d.failed)},p=S.toLowerCase();return{realTimeCounts:d,safeCounts:u,filteredTasks:a.filter(e=>{if(S&&!(e.customerName.toLowerCase().includes(p)||e.subject.toLowerCase().includes(p)||e.status.toLowerCase().includes(p)||e.createdBy.toLowerCase().includes(p)))return!1;if("all"===j)return!0;const a=o(e.date);if(!a)return!1;switch(j){case"due_today":return a===t&&"Completed"!==e.status&&"Cancelled"!==e.status&&"Failed"!==e.status&&"FAILED"!==e.status;case"upcoming":return a>t;case"overdue":return a<t&&"Completed"!==e.status&&"Cancelled"!==e.status&&"Failed"!==e.status&&"FAILED"!==e.status;case"completed":return"Completed"===e.status;case"failed":return"Failed"===e.status||"FAILED"===e.status;default:return!0}})}},[v,w,S,j,M,Y]),Me=d.useMemo(()=>[{key:"due_today",label:"Due Today",count:je.dueToday},{key:"upcoming",label:"Upcoming",count:je.upcoming},{key:"overdue",label:"Overdue",count:je.overdue},{key:"completed",label:"Complete",count:je.completed},{key:"failed",label:"Failed",count:je.failed||0},{key:"all",label:"All",count:je.all,active:!0}],[je]),Le=d.useMemo(()=>Ee.slice(0,ye),[Ee,ye]),Pe=d.useMemo(()=>ye<Ee.length,[ye,Ee.length]);d.useEffect(()=>{be()},[Le]),d.useEffect(()=>{xe(50)},[j,M,S]);const Ie=(e,t)=>e&&0!==e.length?e.map(e=>{const a=e.id||e._id;let n;if(e.url)n=e.url;else if(e.file_path){let t=e.file_path;t.startsWith("http")?n=t:(t=t.replace(/^\/+/,""),n=t.startsWith("media/tasks/")||t.startsWith("media/")?`${lt}/${t}`:`${lt}/media/tasks/${t}`)}else n=`${lt}/tasks/${t}/attachments/${a}?user_id=${U}`;const r=e.mime_type||e.type||"application/octet-stream",s=r.startsWith("image/")||e.filename&&/\.(jpg|jpeg|png|gif|webp)$/i.test(e.filename)||e.name&&/\.(jpg|jpeg|png|gif|webp)$/i.test(e.name);return{id:a,name:e.name||e.filename||"Unnamed File",url:n,size:e.size||e.file_size||0,type:r,created_at:e.created_at||(new Date).toISOString(),downloadUrl:`${lt}/tasks/${t}/attachments/${a}/download?user_id=${U}`,isNew:!1,isFromBackend:!0,isImage:s,contentType:r,uploadedAt:e.created_at||(new Date).toISOString()}}):[],Ae=async e=>{try{const t=await ct(`${lt}/tasks/${e}/attachments?user_id=${U}`),a=await t.json();return Array.isArray(a)?a:a&&a.attachments&&Array.isArray(a.attachments)?a.attachments:[]}catch(t){return[]}},Re=(e,t)=>({Completed:"active_leads","In Progress":"active_leads",Pending:"active_leads",Cancelled:"not_a_lead",Failed:"lost_lead",Rejected:"lost_lead"}[e]||"active_leads"),Oe=async e=>{try{if((await ct(`${lt}/tasks/${e}/?user_id=${U}`,{method:"DELETE"})).ok)return await De(),await Ne(),{success:!0};throw new Error("Failed to delete task")}catch(t){throw t}},Fe=e=>{oe(e),re(e?Ee.map(e=>e.id):[])},$e=()=>{re([]),oe(!1),le(!1)};d.useEffect(()=>{Ee.length>0&&(ne.length===Ee.length?oe(!0):oe(!1))},[ne,Ee]),d.useEffect(()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;ae(e>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const Be=d.useCallback(e=>{E(e)},[]),Ye=d.useCallback(e=>{L(e)},[]),We=d.useCallback(()=>{q||A||(G(!0),F({...ut,createdBy:Y}),B(""),R(!0),setTimeout(()=>G(!1),300))},[Y,q,A]),Ue=d.useCallback(()=>{A&&(R(!1),F(ut),B(""),G(!1))},[A]),He=d.useCallback(()=>{P&&(I(null),Q(!1),setTimeout(()=>{G(!1),X(null)},100))},[P]);return z?N&&!z?c.jsx("div",{className:"min-h-screen bg-black text-[#e4eaf5] py-10 px-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-lg text-red-400 mb-4",children:N}),c.jsx("button",{onClick:()=>{C(null),K(!1),window.location.reload()},className:"bg-[#08B8EA] hover:bg-[#12d8fa] text-white px-4 py-2 rounded-lg",children:"Retry"})]})})})}):c.jsxs(c.Fragment,{children:[c.jsx("style",{children:"\n    .sticky-table-container {\n      max-height: 600px;\n      overflow-y: auto;\n      overflow-x: auto;\n      border-radius: 12px;\n    }\n    \n    .sticky-header {\n      position: sticky;\n      top: 0;\n      background: white;\n      z-index: 10;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n    \n    .sticky-th {\n      position: sticky;\n      top: 0;\n      background: white;\n      z-index: 10;\n      border-bottom: 2px solid #e5e7eb;\n    }\n  "}),c.jsxs("div",{className:"min-h-screen bg-black text-[#e4eaf5] py-10 px-4",children:[c.jsxs("div",{className:"max-w-none mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsx("div",{className:"flex items-center gap-3",children:(we.delete||t(e()))&&c.jsx("div",{className:"flex items-center gap-3",children:ie?c.jsxs("div",{className:"flex items-center gap-6 bg-gray-900 rounded-lg p-3",children:[c.jsxs("label",{className:"flex items-center cursor-pointer text-[#03B0F5] font-bold",children:[c.jsx("input",{type:"checkbox",className:"accent-blue-500 mr-2",checked:se,onChange:e=>Fe(e.target.checked),style:{width:18,height:18}}),"Select All"]}),c.jsxs("span",{className:"text-white font-semibold",children:[ne.length," row",1!==ne.length?"s":""," selected"]}),c.jsxs("button",{className:"px-3 py-1 bg-red-600 text-white rounded font-bold hover:bg-red-700 transition",onClick:async()=>{if(0!==ne.length&&window.confirm(`Are you sure you want to delete ${ne.length} selected task(s)?`))try{for(const e of ne)await Oe(e);$e()}catch(e){C(`Failed to delete tasks: ${e.message}`)}},disabled:0===ne.length,children:["Delete (",ne.length,")"]}),c.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded font-bold hover:bg-gray-700 transition",onClick:$e,children:"Cancel"})]}):c.jsx("button",{className:"bg-[#03B0F5] text-white px-5 py-3 rounded-lg font-bold shadow hover:bg-[#0280b5] transition text-base",onClick:()=>{le(!0),re([]),oe(!1)},children:ne.length>0?`Select (${ne.length})`:"Select"})})}),(we.show||t(e()))&&c.jsxs("button",{className:"bg-[#08B8EA] hover:bg-[#12d8fa] text-white text-xl font-bold px-7 py-2 rounded-2xl shadow-lg transition transform hover:scale-105 flex items-center gap-2",onClick:We,children:[c.jsx(n,{size:24}),"Create Task"]})]}),N&&c.jsx("div",{className:"mb-6 p-4 bg-red-900 border border-red-600 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-red-200 mb-2",children:N}),N.includes("404")&&c.jsxs("p",{className:"text-red-300 text-sm",children:["ðŸ’¡ ",c.jsx("strong",{children:"Tip:"}),' If you\'re seeing 404 errors on existing tasks, try the "Force Refresh" button to reload all data from the server.']})]}),c.jsxs("div",{className:"flex gap-2 ml-4",children:[c.jsx("button",{onClick:()=>{C(null),De(),Ne()},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Retry"}),c.jsx("button",{onClick:()=>{C(null),b([]),setPagination(e=>({...e,page:1})),De(),Ne()},className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded text-sm",title:"Clear cache and reload all data from server",children:"Force Refresh"}),c.jsx("button",{onClick:()=>C(null),className:"text-red-300 hover:text-red-100 text-xl font-bold",children:"Ã—"})]})]})}),c.jsxs("div",{className:"flex gap-3 mb-8 flex-wrap text-xl font-bold",children:[Me.map(e=>c.jsxs("button",{onClick:()=>Be(e.key),className:`flex items-center gap-2 px-5 py-2 rounded-full font-semibold border transition-all duration-200 ${j===e.key?"bg-[#08B8EA] text-white border-[#08B8EA] shadow-lg":"bg-white text-[#08B8EA] border-[#232a36] hover:bg-[#1a222e] hover:text-white"}\n                `,children:[c.jsx("span",{children:e.label}),c.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs font-bold "+(e.count>0?"bg-gray-800 text-white":"bg-[#232a36] text-[#08B8EA]"),children:e.count})]},e.key)),c.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[c.jsx("div",{className:"flex items-center",children:c.jsxs("select",{value:M,onChange:e=>Ye(e.target.value),className:"px-4 py-2 rounded-full bg-white text-[#08B8EA] border border-[#08B8EA] font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-[#08B8EA]",children:[c.jsx("option",{value:"all",children:"All Tasks"}),c.jsx("option",{value:"assigned_to_me",children:"Tasks Assigned To Me"}),c.jsx("option",{value:"assigned_by_me",children:"Tasks Assigned By Me"})]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{className:"rounded-full px-4 py-2 border border-[#08B8EA] bg-[#181e29] text-[#e4eaf5] font-medium focus:outline-none",style:{minWidth:220},placeholder:"Search by name, subject, status...",value:S,onChange:e=>T(e.target.value)}),c.jsx(r,{className:"text-[#08B8EA]",size:20})]})]})]}),k&&0===v.length&&c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#08B8EA] mx-auto mb-4"}),c.jsx("p",{className:"text-lg text-[#08B8EA]",children:"Loading tasks..."})]})}),(!k||v.length>0)&&c.jsxs("div",{className:"relative",children:[me&&c.jsx("button",{onClick:()=>ve("left"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll left",children:c.jsx(s,{className:"w-9 h-9"})}),fe&&c.jsx("button",{onClick:()=>ve("right"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll right",children:c.jsx(o,{className:"w-9 h-9"})}),c.jsx("div",{ref:pe,className:"bg-black rounded-lg overflow-x-auto max-h-[calc(100vh-200px)] overflow-y-auto",onScroll:be,children:c.jsxs("table",{className:"min-w-[1600px] w-full bg-black relative",children:[c.jsx("thead",{className:"bg-white sticky top-0 z-50 shadow-lg border-b-2 border-gray-200",children:c.jsxs("tr",{children:[(we.delete||t(e()))&&ie&&c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"60px"},children:c.jsx("input",{type:"checkbox",className:"accent-blue-500",checked:se,onChange:e=>Fe(e.target.checked),style:{width:18,height:18}})}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"60px"},children:"#"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"200px"},children:"CREATED DATE & TIME"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"150px"},children:"CREATED BY"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"200px"},children:"SUBJECT"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"120px"},children:"STATUS"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"150px"},children:"ASSIGNED TO"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"250px"},children:"ASSOCIATED WITH RECORDS"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",style:{minWidth:"180px"},children:"DUE DATE AND TIME"}),c.jsx("th",{className:"py-1 px-4 text-lg font-extrabold text-[#03B0F5] text-left whitespace-nowrap sticky-th",children:"REPEAT TASK"})]})}),c.jsx("tbody",{children:0===Le.length?c.jsx("tr",{children:c.jsx("td",{colSpan:(we.delete||t(e()))&&ie?10:9,className:"bg-[#000] rounded-xl shadow p-8 text-center text-lg font-bold text-[#08B8EA]",children:k?"Loading tasks...":"No Tasks Found"})}):Le.map((a,n)=>{return c.jsxs("tr",{className:"border-b border-gray-800 bg-[#000] hover:bg-gray-800 transition cursor-pointer",onClick:()=>{if(q||V)return;if(P&&I(null),Z&&clearTimeout(Z),!a.id||"string"!=typeof a.id||a.id.length<12)return void alert("This task has an invalid ID and cannot be opened. Please refresh the page.");const n=setTimeout(()=>{(async a=>{try{if(q||V)return;if(P&&I(null),G(!0),Q(!0),X(a.id),!a.id||"string"!=typeof a.id||a.id.length<12)return alert("Invalid task ID. Please refresh the page and try again."),G(!1),Q(!1),void X(null);const n=a.created_by===U||a.assigned_to?.includes(U);if(!(t(e())||we.show||we.edit_others||n))return alert("You do not have permission to edit this task."),G(!1),Q(!1),void X(null);const r={id:a.id,subject:a.subject||"",message:a.message||"",typeTask:a.typeTask||"To-Do",status:a.status||"Pending",date:a.date||(new Date).toISOString().split("T")[0],time:a.time||"00:00",assign:a.assign||"Unassigned",priority:a.priority||"Medium",created_at:a.created_at,updated_at:a.updated_at,is_urgent:a.is_urgent||!1,notes:a.notes||"",lead_id:a.lead_id,loan_type:a.loan_type,assigned_to:a.assigned_to||[],created_by:a.created_by,attachments:[],createdBy:a.createdBy||"Unknown",leadLogin:a.leadLogin||"N/A",customerName:a.customerName||"N/A",history:[],comments:[],isLoading:!0};I(r),Q(!1),setTimeout(async()=>{try{const t=await ct(`${lt}/tasks/${a.id}?user_id=${U}&include_attachments=true`),n=await t.json(),r=await Ae(a.id);n.attachments=r,n.history=await(async e=>{try{const t=await ct(`${lt}/tasks/${e}/history?user_id=${U}`),a=await t.json();return Array.isArray(a)?a:a&&a.history&&Array.isArray(a.history)?a.history:[]}catch(t){return[]}})(a.id);let s=null;if(n.lead_id)try{const e=await ct(`${lt}/leads/${n.lead_id}?user_id=${U}`);s=await e.json()}catch(e){}const o=Ie(n.attachments,n.id||a.id),i={id:n.id,subject:n.subject,message:n.task_details,typeTask:n.task_type,status:n.status,date:n.due_date||(new Date).toISOString().split("T")[0],time:n.due_time||"00:00",assign:n.assigned_users?.map(e=>e.name).join(", ")||"Unassigned",priority:n.priority||"Medium",created_at:n.created_at,updated_at:n.updated_at,is_urgent:n.is_urgent||!1,notes:n.notes||"",lead_id:n.lead_id,loan_type:n.loan_type,loan_type_name:n.loan_type_name||"",assigned_to:n.assigned_to||[],created_by:n.created_by,attachments:o,createdBy:n.creator_name||"Unknown",leadInfo:s||{},leadLogin:n.lead_login||n.lead_number||a.leadLogin,customerName:n.customer_name||a.customerName,history:n.history||[],comments:n.comments||[],created_date:n.created_at,last_modified:n.updated_at,isLoading:!1};if(n.associate_with_records||n.associateWithRecords)i.associateWithRecords=n.associate_with_records||n.associateWithRecords;else if(s){const e=s.full_name||`${s.first_name||""} ${s.last_name||""}`.trim()||"Unknown",t=s.company_name||"N/A",a=s.status||"Active";i.associateWithRecords=[`${e} - ${t} (${a})`]}I(i),G(!1),X(null)}catch(t){if(t.message.includes("404")){const e=`Cannot open task "${a.subject}".\n\nThis task appears in the list but cannot be accessed individually. This indicates a data synchronization issue.\n\nPossible causes:\n1. Task was recently deleted by another user\n2. Permission changes\n3. Database inconsistency\n\nPlease refresh the page and try again. If the issue persists, contact your system administrator.`;return alert(e),I(null),G(!1),X(null),void De()}if(t.message.includes("403"))return alert("You do not have permission to view this task."),I(null),G(!1),void X(null);I(e=>({...e,isLoading:!1,loadingError:t.message})),G(!1),X(null)}},0)}catch(n){I(null),G(!1),Q(!1),X(null),alert(`Error opening task: ${n.message}`)}})(a),ee(null)},50);ee(n)},children:[(we.delete||t(e()))&&ie&&c.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:e=>e.stopPropagation(),children:c.jsx("input",{type:"checkbox",className:"accent-blue-500",checked:ne.includes(a.id),onChange:e=>{return t=a.id,n=e.target.checked,void re(e=>n?[...e,t]:e.filter(e=>e!==t));var t,n},style:{width:18,height:18}})}),c.jsx("td",{className:"text-md text-bold py-3 px-4 whitespace-nowrap text-left",children:n+1}),c.jsx("td",{className:"text-md py-3 px-4 whitespace-nowrap font-bold",children:a.createdTime}),c.jsx("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap text-left",children:a.createdBy}),c.jsx("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap text-left",children:a.subject}),c.jsx("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap text-left",children:(r=a.status,c.jsx(dt,{status:r}))}),c.jsx("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap text-left",children:a.assign}),c.jsxs("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap",children:[a.leadLogin," - ",a.customerName]}),c.jsx("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap text-left",children:f(`${a.date}T${a.time}`)}),c.jsx("td",{className:"text-md font-semibold py-3 px-4 whitespace-nowrap text-left",children:a.repeat_type||"No"})]},`${a.id}-${a.renderKey||a.updated_at||"static"}`);var r})})]})}),Pe&&c.jsxs("div",{className:"flex flex-col items-center justify-center mt-6 px-4 gap-3",children:[c.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",ye," of ",Ee.length," tasks"]}),c.jsxs("button",{onClick:()=>{xe(e=>e+50)},className:"px-6 py-3 bg-gradient-to-r from-[#08B8EA] to-[#0693C7] text-white font-semibold rounded-lg hover:shadow-lg hover:shadow-[#08B8EA]/50 transform hover:scale-105 transition-all duration-200 flex items-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Show More (",Math.min(50,Ee.length-ye)," more)",c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})]}),P&&c.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-transparent bg-opacity-50 p-4",style:{backdropFilter:"blur(3px)",opacity:1,transform:"scale(1)",transition:"none"},children:c.jsx(d.Suspense,{fallback:c.jsxs("div",{className:"bg-white rounded-lg p-8 text-center min-w-[400px] shadow-2xl animate-pulse",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#08B8EA] mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-[#08B8EA]",children:"Loading editor..."})]}),children:c.jsx(st,{taskData:P,onClose:He,onSave:async e=>{try{const s=e._id||e.id,o=v.find(e=>e.id===s),i=o&&o.status!==e.status,l=o?.status||"Unknown",c=!0===e.keepModalOpen;if(c||I(null),b(t=>t.map(t=>{if(t.id===s){const a=e.uiStatus||e.status||t.status;return{...t,subject:e.subject||e.title||t.subject,message:e.message||e.description||t.message,status:a,date:e.date||e.due_date||t.date,time:e.time||t.time,priority:e.priority||t.priority,typeTask:e.typeTask||e.task_type||t.typeTask,is_urgent:e.is_urgent||t.is_urgent,notes:e.notes||t.notes,updated_at:(new Date).toISOString(),renderKey:Date.now()}}return t})),c&&P&&I(t=>{if(t&&t.id===s){const a=e.uiStatus||e.status||t.status;return{...t,subject:e.subject||e.title||t.subject,message:e.message||e.description||t.message,status:a,date:e.date||e.due_date||t.date,time:e.time||t.time,priority:e.priority||t.priority,typeTask:e.typeTask||e.task_type||t.typeTask,is_urgent:e.is_urgent||t.is_urgent,notes:e.notes||t.notes,updated_at:(new Date).toISOString()}}return t}),i&&e.lead_id){const t=Re(e.status,e.lead_id),a=new CustomEvent("leadStatusChanged",{detail:{leadId:e.lead_id,suggestedTab:t,taskStatus:e.status,previousTaskStatus:l,shouldAutoSwitch:!0,immediate:!0,timestamp:(new Date).toISOString()}});window.dispatchEvent(a)}const d={subject:e.subject||e.title,task_details:e.message||e.description,priority:e.priority||"Medium",status:e.status,assigned_to:e.assigned_to||e.assigned_users||[],due_date:e.date||e.due_date||null,due_time:e.time||null,is_urgent:e.is_urgent||!1,notes:e.notes||"",task_type:e.typeTask||e.task_type||"To-Do",user_id:U,status_changed:i,old_status:l,new_comment:e.newComment||""};if(b(t=>t.map(t=>{if(t.id===s){const a=e.uiStatus||e.status||t.status;return{...t,subject:e.subject||e.title||t.subject,message:e.message||e.description||t.message,status:a,date:e.date||e.due_date||t.date,time:e.time||t.time,priority:e.priority||t.priority,typeTask:e.typeTask||e.task_type||t.typeTask,is_urgent:e.is_urgent||t.is_urgent,notes:e.notes||t.notes,updated_at:(new Date).toISOString()}}return t})),!s||"string"!=typeof s||s.length<12)throw new Error(`Invalid task ID: ${s}. Expected a string with at least 12 characters.`);/^[a-fA-F0-9]{24}$/.test(s);const m=`${lt}/tasks/${s}?user_id=${U}`;try{const e=await ct(`${lt}/tasks/${s}?user_id=${U}`);await e.json()}catch(t){if(t.message.includes("404"))try{if(await De(),!v.find(e=>e.id===s)){const e=`Task ${s} no longer exists. It may have been deleted by another user.\n\nThe task list has been refreshed. Please try again with a different task.`;return alert(e),void I(null)}const t=`Data synchronization issue detected!\n\nTask "${e.subject}" exists in the list but cannot be accessed individually. This could be due to:\n\n1. Database inconsistency\n2. Permission changes\n3. Concurrent modifications\n\nPlease try:\n1. Refreshing the entire page\n2. Logging out and back in\n3. Contacting system administrator if issue persists\n\nThe task list has been refreshed to show current data.`;return alert(t),void I(null)}catch(a){const e=`Cannot verify task status: ${t.message}\n\nAdditionally, failed to refresh data: ${a.message}\n\nPlease refresh the page manually and try again.`;return void alert(e)}else t.message.includes("403")?alert("Access denied: You don't have permission to edit this task."):alert(`Error accessing task: ${t.message}`);return}const h=await ct(m,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(await h.json(),e.newComment&&""!==e.newComment.trim())try{await ct(`${lt}/tasks/${s}/comments?user_id=${U}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:e.newComment.trim(),user_id:U})})}catch(n){}if(e.attachmentsToRemove&&e.attachmentsToRemove.length>0)for(const t of e.attachmentsToRemove)try{await ct(`${lt}/tasks/${s}/attachments/${t}?user_id=${U}`,{method:"DELETE"})}catch(r){}if(e.newAttachments&&e.newAttachments.length>0)for(const t of e.newAttachments)if(t.file)try{const e=new FormData;e.append("file",t.file),await ct(`${lt}/tasks/${s}/attachments?user_id=${U}`,{method:"POST",body:e})}catch(r){}const f=await ct(`${lt}/tasks/${s}?user_id=${U}`),g=await f.json(),y=await Ae(s);g.attachments=y;const x=Ie(g.attachments,s);b(e=>e.map(e=>e.id===s?{...e,attachments:x,updated_at:(new Date).toISOString()}:e)),await Ne(),i&&g.lead_id&&(async e=>{if(e.leadId)try{const t=await ct(`${lt}/leads/${e.leadId}?user_id=${U}`),a=await t.json(),n=Re(e.newStatus),r=new CustomEvent("leadStatusChanged",{detail:{leadId:e.leadId,leadData:a,suggestedTab:n,taskStatus:e.newStatus,previousTaskStatus:e.oldStatus,shouldAutoSwitch:!0,timestamp:(new Date).toISOString()}});window.dispatchEvent(r),u&&u({...e,leadData:a,suggestedTab:n,shouldSwitchTab:!0}),await De()}catch(t){}})({taskId:s,oldStatus:l,newStatus:e.status,leadId:g.lead_id,taskDetails:g}).catch(e=>{}),p&&p({taskId:s,taskDetails:g,isStatusChange:i,leadId:g.lead_id})}catch(s){throw I(null),C("Failed to update task"),s}},onStatusChange:e=>{e.shouldSwitchToCompleteTab&&e.immediate&&(E("completed"),Qe.success("Task completed! Switched to Complete tab.",{position:"top-right",autoClose:2e3})),e.shouldSwitchToFailedTab&&e.immediate&&(E("failed"),Qe.error("Task marked as failed! Switched to Failed tab.",{position:"top-right",autoClose:2e3}))},currentUserId:U,apiBaseUrl:lt,preselectedLead:P.leadInfo||null,associateWithRecords:P.associateWithRecords||[],history:P.history||[],comments:P.comments||[],isLoading:P.isLoading,loadingError:P.loadingError},`edit-task-${P.id}`)})}),A&&c.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-transparent bg-opacity-50",style:{backdropFilter:"blur(3px)",opacity:1,transform:"scale(1)",transition:"none"},children:c.jsx("div",{className:"w-full max-w-2xl mx-auto",children:c.jsx(d.Suspense,{fallback:c.jsxs("div",{className:"bg-white rounded-lg p-8 text-center min-w-[400px] shadow-2xl animate-pulse",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#08B8EA] mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-[#08B8EA]",children:"Loading creator..."})]}),children:c.jsx(rt,{onClose:Ue,onSave:async e=>{try{let r,s=null;if(e instanceof FormData){r={subject:e.get("subject"),task_details:e.get("task_details")||"",task_type:e.get("task_type")||"To-Do",status:"Pending",priority:e.get("priority")||"Medium",due_date:e.get("due_date")||(new Date).toISOString().split("T")[0],due_time:e.get("due_time")||"09:00:00",is_urgent:"true"===e.get("is_urgent")||!1,notes:e.get("notes")||"",created_by:U};const a=e.get("assigned_to");if(a)try{JSON.parse(a),r.assigned_to=[U]}catch(t){r.assigned_to=[U]}else r.assigned_to=[U];e.get("lead_id")&&(r.lead_id=e.get("lead_id")),e.get("loan_type")&&(r.loan_type=e.get("loan_type"))}else r=e.taskData,s=e.attachment,r.created_by||(r.created_by=U),r.assigned_to&&0!==r.assigned_to.length||(r.assigned_to=[U]),r.user_id||(r.user_id=U);try{const t=await ct(`${lt}/tasks/?user_id=${U}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await t.json(),o=e instanceof FormData?e.get("attachment"):s,i=e instanceof FormData?null:e.attachments||[];if(o&&n.id){const e=n.id,t=new FormData;t.append("file",o);try{await ct(`${lt}/tasks/${e}/attachments?user_id=${U}`,{method:"POST",headers:{},body:t})}catch(a){}}if(i&&i.length>0&&n.id){const e=n.id;for(let t=0;t<i.length;t++){const n=i[t];if(n.file)try{const t=new FormData;t.append("file",n.file),await ct(`${lt}/tasks/${e}/attachments?user_id=${U}`,{method:"POST",headers:{},body:t})}catch(a){}}}await De(),await Ne(),R(!1)}catch(n){throw new Error(`Failed to create task: ${n.message}`)}}catch(n){C(`Failed to create task: ${n.message}`)}}})})})})]}),te&&c.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-6 right-6 bg-[#08B8EA] hover:bg-[#12d8fa] text-white p-3 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 z-50",title:"Scroll to top",children:c.jsx(i,{size:24})})]})]}):c.jsx("div",{className:"min-h-screen bg-black text-[#e4eaf5] py-10 px-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#08B8EA] mx-auto mb-4"}),c.jsx("p",{className:"text-lg text-[#08B8EA]",children:"Initializing..."})]})})})})}},Symbol.toStringTag,{value:"Module"}));function mt(){return"undefined"!=typeof window}function ht(e){return yt(e)?(e.nodeName||"").toLowerCase():"#document"}function ft(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function gt(e){var t;return null==(t=(yt(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function yt(e){return!!mt()&&(e instanceof Node||e instanceof ft(e).Node)}function xt(e){return!!mt()&&(e instanceof Element||e instanceof ft(e).Element)}function vt(e){return!!mt()&&(e instanceof HTMLElement||e instanceof ft(e).HTMLElement)}function bt(e){return!(!mt()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ft(e).ShadowRoot)}const wt=new Set(["inline","contents"]);function _t(e){const{overflow:t,overflowX:a,overflowY:n,display:r}=It(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+a)&&!wt.has(r)}const kt=new Set(["table","td","th"]);function Dt(e){return kt.has(ht(e))}const Nt=[":popover-open",":modal"];function Ct(e){return Nt.some(t=>{try{return e.matches(t)}catch(a){return!1}})}const St=["transform","translate","scale","rotate","perspective"],Tt=["transform","translate","scale","rotate","perspective","filter"],jt=["paint","layout","strict","content"];function Et(e){const t=Mt(),a=xt(e)?It(e):e;return St.some(e=>!!a[e]&&"none"!==a[e])||!!a.containerType&&"normal"!==a.containerType||!t&&!!a.backdropFilter&&"none"!==a.backdropFilter||!t&&!!a.filter&&"none"!==a.filter||Tt.some(e=>(a.willChange||"").includes(e))||jt.some(e=>(a.contain||"").includes(e))}function Mt(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Lt=new Set(["html","body","#document"]);function Pt(e){return Lt.has(ht(e))}function It(e){return ft(e).getComputedStyle(e)}function At(e){return xt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Rt(e){if("html"===ht(e))return e;const t=e.assignedSlot||e.parentNode||bt(e)&&e.host||gt(e);return bt(t)?t.host:t}function Ot(e){const t=Rt(e);return Pt(t)?e.ownerDocument?e.ownerDocument.body:e.body:vt(t)&&_t(t)?t:Ot(t)}function Ft(e,t,a){var n;void 0===t&&(t=[]),void 0===a&&(a=!0);const r=Ot(e),s=r===(null==(n=e.ownerDocument)?void 0:n.body),o=ft(r);if(s){const e=$t(o);return t.concat(o,o.visualViewport||[],_t(r)?r:[],e&&a?Ft(e):[])}return t.concat(r,Ft(r,[],a))}function $t(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Bt=Math.min,Yt=Math.max,Wt=Math.round,Ut=Math.floor,Ht=e=>({x:e,y:e}),zt={left:"right",right:"left",bottom:"top",top:"bottom"},Kt={start:"end",end:"start"};function Vt(e,t){return"function"==typeof e?e(t):e}function Qt(e){return e.split("-")[0]}function qt(e){return e.split("-")[1]}function Gt(e){return"y"===e?"height":"width"}const Jt=new Set(["top","bottom"]);function Xt(e){return Jt.has(Qt(e))?"y":"x"}function Zt(e){return"x"===Xt(e)?"y":"x"}function ea(e){return e.replace(/start|end/g,e=>Kt[e])}const ta=["left","right"],aa=["right","left"],na=["top","bottom"],ra=["bottom","top"];function sa(e){return e.replace(/left|right|bottom|top/g,e=>zt[e])}function oa(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ia(e){const{x:t,y:a,width:n,height:r}=e;return{width:n,height:r,top:a,left:t,right:t+n,bottom:a+r,x:t,y:a}}var la="undefined"!=typeof document?d.useLayoutEffect:function(){};const ca={...p}.useInsertionEffect||(e=>e());function da(e,t,a){let{reference:n,floating:r}=e;const s=Xt(t),o=Zt(t),i=Gt(o),l=Qt(t),c="y"===s,d=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2,p=n[i]/2-r[i]/2;let m;switch(l){case"top":m={x:d,y:n.y-r.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:u};break;case"left":m={x:n.x-r.width,y:u};break;default:m={x:n.x,y:n.y}}switch(qt(t)){case"start":m[o]-=p*(a&&c?-1:1);break;case"end":m[o]+=p*(a&&c?-1:1)}return m}const ua=new Set(["left","top"]);function pa(e){const t=It(e);let a=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=vt(e),s=r?e.offsetWidth:a,o=r?e.offsetHeight:n,i=Wt(a)!==s||Wt(n)!==o;return i&&(a=s,n=o),{width:a,height:n,$:i}}function ma(e){return xt(e)?e:e.contextElement}function ha(e){const t=ma(e);if(!vt(t))return Ht(1);const a=t.getBoundingClientRect(),{width:n,height:r,$:s}=pa(t);let o=(s?Wt(a.width):a.width)/n,i=(s?Wt(a.height):a.height)/r;return o&&Number.isFinite(o)||(o=1),i&&Number.isFinite(i)||(i=1),{x:o,y:i}}const fa=Ht(0);function ga(e){const t=ft(e);return Mt()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:fa}function ya(e,t,a,n){void 0===t&&(t=!1),void 0===a&&(a=!1);const r=e.getBoundingClientRect(),s=ma(e);let o=Ht(1);t&&(n?xt(n)&&(o=ha(n)):o=ha(e));const i=function(e,t,a){return void 0===t&&(t=!1),!(!a||t&&a!==ft(e))&&t}(s,a,n)?ga(s):Ht(0);let l=(r.left+i.x)/o.x,c=(r.top+i.y)/o.y,d=r.width/o.x,u=r.height/o.y;if(s){const e=ft(s),t=n&&xt(n)?ft(n):n;let a=e,r=$t(a);for(;r&&n&&t!==a;){const e=ha(r),t=r.getBoundingClientRect(),n=It(r),s=t.left+(r.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(r.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=s,c+=o,a=ft(r),r=$t(a)}}return ia({width:d,height:u,x:l,y:c})}function xa(e,t){const a=At(e).scrollLeft;return t?t.left+a:ya(gt(e)).left+a}function va(e,t){const a=e.getBoundingClientRect();return{x:a.left+t.scrollLeft-xa(e,a),y:a.top+t.scrollTop}}const ba=new Set(["absolute","fixed"]);function wa(e,t,a){let n;if("viewport"===t)n=function(e,t){const a=ft(e),n=gt(e),r=a.visualViewport;let s=n.clientWidth,o=n.clientHeight,i=0,l=0;if(r){s=r.width,o=r.height;const e=Mt();(!e||e&&"fixed"===t)&&(i=r.offsetLeft,l=r.offsetTop)}const c=xa(n);if(c<=0){const e=n.ownerDocument,t=e.body,a=getComputedStyle(t),r="CSS1Compat"===e.compatMode&&parseFloat(a.marginLeft)+parseFloat(a.marginRight)||0,o=Math.abs(n.clientWidth-t.clientWidth-r);o<=25&&(s-=o)}else c<=25&&(s+=c);return{width:s,height:o,x:i,y:l}}(e,a);else if("document"===t)n=function(e){const t=gt(e),a=At(e),n=e.ownerDocument.body,r=Yt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Yt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-a.scrollLeft+xa(e);const i=-a.scrollTop;return"rtl"===It(n).direction&&(o+=Yt(t.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:i}}(gt(e));else if(xt(t))n=function(e,t){const a=ya(e,!0,"fixed"===t),n=a.top+e.clientTop,r=a.left+e.clientLeft,s=vt(e)?ha(e):Ht(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:r*s.x,y:n*s.y}}(t,a);else{const a=ga(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return ia(n)}function _a(e,t){const a=Rt(e);return!(a===t||!xt(a)||Pt(a))&&("fixed"===It(a).position||_a(a,t))}function ka(e,t,a){const n=vt(t),r=gt(t),s="fixed"===a,o=ya(e,!0,s,t);let i={scrollLeft:0,scrollTop:0};const l=Ht(0);function c(){l.x=xa(r)}if(n||!n&&!s)if(("body"!==ht(t)||_t(r))&&(i=At(t)),n){const e=ya(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&c();s&&!n&&r&&c();const d=!r||n||s?Ht(0):va(r,i);return{x:o.left+i.scrollLeft-l.x-d.x,y:o.top+i.scrollTop-l.y-d.y,width:o.width,height:o.height}}function Da(e){return"static"===It(e).position}function Na(e,t){if(!vt(e)||"fixed"===It(e).position)return null;if(t)return t(e);let a=e.offsetParent;return gt(e)===a&&(a=a.ownerDocument.body),a}function Ca(e,t){const a=ft(e);if(Ct(e))return a;if(!vt(e)){let t=Rt(e);for(;t&&!Pt(t);){if(xt(t)&&!Da(t))return t;t=Rt(t)}return a}let n=Na(e,t);for(;n&&Dt(n)&&Da(n);)n=Na(n,t);return n&&Pt(n)&&Da(n)&&!Et(n)?a:n||function(e){let t=Rt(e);for(;vt(t)&&!Pt(t);){if(Et(t))return t;if(Ct(t))return null;t=Rt(t)}return null}(e)||a}const Sa={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:a,offsetParent:n,strategy:r}=e;const s="fixed"===r,o=gt(n),i=!!t&&Ct(t.floating);if(n===o||i&&s)return a;let l={scrollLeft:0,scrollTop:0},c=Ht(1);const d=Ht(0),u=vt(n);if((u||!u&&!s)&&(("body"!==ht(n)||_t(o))&&(l=At(n)),vt(n))){const e=ya(n);c=ha(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}const p=!o||u||s?Ht(0):va(o,l);return{width:a.width*c.x,height:a.height*c.y,x:a.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:a.y*c.y-l.scrollTop*c.y+d.y+p.y}},getDocumentElement:gt,getClippingRect:function(e){let{element:t,boundary:a,rootBoundary:n,strategy:r}=e;const s=[..."clippingAncestors"===a?Ct(t)?[]:function(e,t){const a=t.get(e);if(a)return a;let n=Ft(e,[],!1).filter(e=>xt(e)&&"body"!==ht(e)),r=null;const s="fixed"===It(e).position;let o=s?Rt(e):e;for(;xt(o)&&!Pt(o);){const t=It(o),a=Et(o);a||"fixed"!==t.position||(r=null),(s?!a&&!r:!a&&"static"===t.position&&r&&ba.has(r.position)||_t(o)&&!a&&_a(e,o))?n=n.filter(e=>e!==o):r=t,o=Rt(o)}return t.set(e,n),n}(t,this._c):[].concat(a),n],o=s[0],i=s.reduce((e,a)=>{const n=wa(t,a,r);return e.top=Yt(n.top,e.top),e.right=Bt(n.right,e.right),e.bottom=Bt(n.bottom,e.bottom),e.left=Yt(n.left,e.left),e},wa(t,o,r));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},getOffsetParent:Ca,getElementRects:async function(e){const t=this.getOffsetParent||Ca,a=this.getDimensions,n=await a(e.floating);return{reference:ka(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:a}=pa(e);return{width:t,height:a}},getScale:ha,isElement:xt,isRTL:function(e){return"rtl"===It(e).direction}};function Ta(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ja(e,t,a,n){void 0===n&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:i="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=ma(e),d=r||s?[...c?Ft(c):[],...Ft(t)]:[];d.forEach(e=>{r&&e.addEventListener("scroll",a,{passive:!0}),s&&e.addEventListener("resize",a)});const u=c&&i?function(e,t){let a,n=null;const r=gt(e);function s(){var e;clearTimeout(a),null==(e=n)||e.disconnect(),n=null}return function o(i,l){void 0===i&&(i=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:d,top:u,width:p,height:m}=c;if(i||t(),!p||!m)return;const h={rootMargin:-Ut(u)+"px "+-Ut(r.clientWidth-(d+p))+"px "+-Ut(r.clientHeight-(u+m))+"px "+-Ut(d)+"px",threshold:Yt(0,Bt(1,l))||1};let f=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!f)return o();n?o(!1,n):a=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||Ta(c,e.getBoundingClientRect())||o(),f=!1}try{n=new IntersectionObserver(g,{...h,root:r.ownerDocument})}catch(y){n=new IntersectionObserver(g,h)}n.observe(e)}(!0),s}(c,a):null;let p,m=-1,h=null;o&&(h=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=h)||e.observe(t)})),a()}),c&&!l&&h.observe(c),h.observe(t));let f=l?ya(e):null;return l&&function t(){const n=ya(e);f&&!Ta(f,n)&&a(),f=n,p=requestAnimationFrame(t)}(),a(),()=>{var e;d.forEach(e=>{r&&e.removeEventListener("scroll",a),s&&e.removeEventListener("resize",a)}),null==u||u(),null==(e=h)||e.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const Ea=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var a,n;const{x:r,y:s,placement:o,middlewareData:i}=t,l=await async function(e,t){const{placement:a,platform:n,elements:r}=e,s=await(null==n.isRTL?void 0:n.isRTL(r.floating)),o=Qt(a),i=qt(a),l="y"===Xt(a),c=ua.has(o)?-1:1,d=s&&l?-1:1,u=Vt(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:h}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return i&&"number"==typeof h&&(m="end"===i?-1*h:h),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}(t,e);return o===(null==(a=i.offset)?void 0:a.placement)&&null!=(n=i.arrow)&&n.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Ma=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var a,n;const{placement:r,middlewareData:s,rects:o,initialPlacement:i,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:f=!0,...g}=Vt(e,t);if(null!=(a=s.arrow)&&a.alignmentOffset)return{};const y=Qt(r),x=Xt(i),v=Qt(i)===i,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=p||(v||!f?[sa(i)]:function(e){const t=sa(e);return[ea(e),t,ea(t)]}(i)),_="none"!==h;!p&&_&&w.push(...function(e,t,a,n){const r=qt(e);let s=function(e,t,a){switch(e){case"top":case"bottom":return a?t?aa:ta:t?ta:aa;case"left":case"right":return t?na:ra;default:return[]}}(Qt(e),"start"===a,n);return r&&(s=s.map(e=>e+"-"+r),t&&(s=s.concat(s.map(ea)))),s}(i,f,h,b));const k=[i,...w],D=await async function(e,t){var a;void 0===t&&(t={});const{x:n,y:r,platform:s,rects:o,elements:i,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:p=!1,padding:m=0}=Vt(t,e),h=oa(m),f=i[p?"floating"===u?"reference":"floating":u],g=ia(await s.getClippingRect({element:null==(a=await(null==s.isElement?void 0:s.isElement(f)))||a?f:f.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:l})),y="floating"===u?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,x=await(null==s.getOffsetParent?void 0:s.getOffsetParent(i.floating)),v=await(null==s.isElement?void 0:s.isElement(x))&&await(null==s.getScale?void 0:s.getScale(x))||{x:1,y:1},b=ia(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:y,offsetParent:x,strategy:l}):y);return{top:(g.top-b.top+h.top)/v.y,bottom:(b.bottom-g.bottom+h.bottom)/v.y,left:(g.left-b.left+h.left)/v.x,right:(b.right-g.right+h.right)/v.x}}(t,g),N=[];let C=(null==(n=s.flip)?void 0:n.overflows)||[];if(d&&N.push(D[y]),u){const e=function(e,t,a){void 0===a&&(a=!1);const n=qt(e),r=Zt(e),s=Gt(r);let o="x"===r?n===(a?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=sa(o)),[o,sa(o)]}(r,o,b);N.push(D[e[0]],D[e[1]])}if(C=[...C,{placement:r,overflows:N}],!N.every(e=>e<=0)){var S,T;const e=((null==(S=s.flip)?void 0:S.index)||0)+1,t=k[e];if(t&&("alignment"!==u||x===Xt(t)||C.every(e=>Xt(e.placement)!==x||e.overflows[0]>0)))return{data:{index:e,overflows:C},reset:{placement:t}};let a=null==(T=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!a)switch(m){case"bestFit":{var j;const e=null==(j=C.filter(e=>{if(_){const t=Xt(e.placement);return t===x||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:j[0];e&&(a=e);break}case"initialPlacement":a=i}if(r!==a)return{reset:{placement:a}}}return{}}}},La=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:n,placement:r,rects:s,platform:o,elements:i,middlewareData:l}=t,{element:c,padding:d=0}=Vt(e,t)||{};if(null==c)return{};const u=oa(d),p={x:a,y:n},m=Zt(r),h=Gt(m),f=await o.getDimensions(c),g="y"===m,y=g?"top":"left",x=g?"bottom":"right",v=g?"clientHeight":"clientWidth",b=s.reference[h]+s.reference[m]-p[m]-s.floating[h],w=p[m]-s.reference[m],_=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c));let k=_?_[v]:0;k&&await(null==o.isElement?void 0:o.isElement(_))||(k=i.floating[v]||s.floating[h]);const D=b/2-w/2,N=k/2-f[h]/2-1,C=Bt(u[y],N),S=Bt(u[x],N),T=C,j=k-f[h]-S,E=k/2-f[h]/2+D,M=Yt(T,Bt(E,j)),L=!l.arrow&&null!=qt(r)&&E!==M&&s.reference[h]/2-(E<T?C:S)-f[h]/2<0,P=L?E<T?E-T:E-j:0;return{[m]:p[m]+P,data:{[m]:M,centerOffset:E-M-P,...L&&{alignmentOffset:P}},reset:L}}});var Pa="undefined"!=typeof document?d.useLayoutEffect:function(){};function Ia(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let a,n,r;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(n=a;0!==n--;)if(!Ia(e[n],t[n]))return!1;return!0}if(r=Object.keys(e),a=r.length,a!==Object.keys(t).length)return!1;for(n=a;0!==n--;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=a;0!==n--;){const a=r[n];if(!("_owner"===a&&e.$$typeof||Ia(e[a],t[a])))return!1}return!0}return e!=e&&t!=t}function Aa(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ra(e,t){const a=Aa(e);return Math.round(t*a)/a}function Oa(e){const t=d.useRef(e);return Pa(()=>{t.current=e}),t}const Fa=e=>({name:"arrow",options:e,fn(t){const{element:a,padding:n}="function"==typeof e?e(t):e;return a&&(r=a,{}.hasOwnProperty.call(r,"current"))?null!=a.current?La({element:a.current,padding:n}).fn(t):{}:a?La({element:a,padding:n}).fn(t):{};var r}}),$a=(e,t)=>({...Ea(e),options:[e,t]}),Ba=(e,t)=>({...Fa(e),options:[e,t]}),Ya={...p};let Wa=!1,Ua=0;const Ha=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ua++,za=Ya.useId||function(){const[e,t]=d.useState(()=>Wa?Ha():void 0);return la(()=>{null==e&&t(Ha())},[]),d.useEffect(()=>{Wa=!0},[]),e},Ka=d.forwardRef(function(e,t){const{context:{placement:a,elements:{floating:n},middlewareData:{arrow:r,shift:s}},width:o=14,height:i=7,tipRadius:l=0,strokeWidth:u=0,staticOffset:p,stroke:m,d:h,style:{transform:f,...g}={},...y}=e,x=za(),[v,b]=d.useState(!1);if(la(()=>{n&&"rtl"===It(n).direction&&b(!0)},[n]),!n)return null;const[w,_]=a.split("-"),k="top"===w||"bottom"===w;let D=p;(k&&null!=s&&s.x||!k&&null!=s&&s.y)&&(D=null);const N=2*u,C=N/2,S=o/2*(l/-8+1),T=i/2*l/4,j=!!h,E=D&&"end"===_?"bottom":"top";let M=D&&"end"===_?"right":"left";D&&v&&(M="end"===_?"left":"right");const L=null!=(null==r?void 0:r.x)?D||r.x:"",P=null!=(null==r?void 0:r.y)?D||r.y:"",I=h||"M0,0 H"+o+" L"+(o-S)+","+(i-T)+" Q"+o/2+","+i+" "+S+","+(i-T)+" Z",A={top:j?"rotate(180deg)":"",left:j?"rotate(90deg)":"rotate(-90deg)",bottom:j?"":"rotate(180deg)",right:j?"rotate(-90deg)":"rotate(90deg)"}[w];return c.jsxs("svg",{...y,"aria-hidden":!0,ref:t,width:j?o:o+N,height:o,viewBox:"0 0 "+o+" "+(i>o?i:o),style:{position:"absolute",pointerEvents:"none",[M]:L,[E]:P,[w]:k||j?"100%":"calc(100% - "+N/2+"px)",transform:[A,f].filter(e=>!!e).join(" "),...g},children:[N>0&&c.jsx("path",{clipPath:"url(#"+x+")",fill:"none",stroke:m,strokeWidth:N+(h?0:1),d:I}),c.jsx("path",{stroke:N&&!h?y.fill:"none",d:I}),c.jsx("clipPath",{id:x,children:c.jsx("rect",{x:-C,y:C*(j?-1:1),width:o+N,height:o})})]})}),Va=d.createContext(null),Qa=d.createContext(null);function qa(e){void 0===e&&(e={});const{nodeId:t}=e,a=function(e){const{open:t=!1,onOpenChange:a,elements:n}=e,r=za(),s=d.useRef({}),[o]=d.useState(()=>function(){const e=new Map;return{emit(t,a){var n;null==(n=e.get(t))||n.forEach(e=>e(a))},on(t,a){e.has(t)||e.set(t,new Set),e.get(t).add(a)},off(t,a){var n;null==(n=e.get(t))||n.delete(a)}}}()),i=null!=((null==(l=d.useContext(Va))?void 0:l.id)||null);var l;const[c,u]=d.useState(n.reference),p=function(e){const t=d.useRef(()=>{});return ca(()=>{t.current=e}),d.useCallback(function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return null==t.current?void 0:t.current(...a)},[])}((e,t,n)=>{s.current.openEvent=e?t:void 0,o.emit("openchange",{open:e,event:t,reason:n,nested:i}),null==a||a(e,t,n)}),m=d.useMemo(()=>({setPositionReference:u}),[]),h=d.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return d.useMemo(()=>({dataRef:s,open:t,onOpenChange:p,elements:h,events:o,floatingId:r,refs:m}),[t,p,h,o,r,m])}({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||a,r=n.elements,[s,o]=d.useState(null),[i,l]=d.useState(null),c=(null==r?void 0:r.domReference)||s,u=d.useRef(null),p=d.useContext(Qa);la(()=>{c&&(u.current=c)},[c]);const h=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:o}={},transform:i=!0,whileElementsMounted:l,open:c}=e,[u,p]=d.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=d.useState(n);Ia(h,n)||f(n);const[g,y]=d.useState(null),[x,v]=d.useState(null),b=d.useCallback(e=>{e!==D.current&&(D.current=e,y(e))},[]),w=d.useCallback(e=>{e!==N.current&&(N.current=e,v(e))},[]),_=s||g,k=o||x,D=d.useRef(null),N=d.useRef(null),C=d.useRef(u),S=null!=l,T=Oa(l),j=Oa(r),E=Oa(c),M=d.useCallback(()=>{if(!D.current||!N.current)return;const e={placement:t,strategy:a,middleware:h};j.current&&(e.platform=j.current),((e,t,a)=>{const n=new Map,r={platform:Sa,...a},s={...r.platform,_c:n};return(async(e,t,a)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=a,i=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:d,y:u}=da(c,n,l),p=n,m={},h=0;for(let f=0;f<i.length;f++){const{name:a,fn:s}=i[f],{x:g,y:y,data:x,reset:v}=await s({x:d,y:u,initialPlacement:n,placement:p,strategy:r,middlewareData:m,rects:c,platform:o,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=y?y:u,m={...m,[a]:{...m[a],...x}},v&&h<=50&&(h++,"object"==typeof v&&(v.placement&&(p=v.placement),v.rects&&(c=!0===v.rects?await o.getElementRects({reference:e,floating:t,strategy:r}):v.rects),({x:d,y:u}=da(c,p,l))),f=-1)}return{x:d,y:u,placement:p,strategy:r,middlewareData:m}})(e,t,{...r,platform:s})})(D.current,N.current,e).then(e=>{const t={...e,isPositioned:!1!==E.current};L.current&&!Ia(C.current,t)&&(C.current=t,m.flushSync(()=>{p(t)}))})},[h,t,a,j,E]);Pa(()=>{!1===c&&C.current.isPositioned&&(C.current.isPositioned=!1,p(e=>({...e,isPositioned:!1})))},[c]);const L=d.useRef(!1);Pa(()=>(L.current=!0,()=>{L.current=!1}),[]),Pa(()=>{if(_&&(D.current=_),k&&(N.current=k),_&&k){if(T.current)return T.current(_,k,M);M()}},[_,k,M,T,S]);const P=d.useMemo(()=>({reference:D,floating:N,setReference:b,setFloating:w}),[b,w]),I=d.useMemo(()=>({reference:_,floating:k}),[_,k]),A=d.useMemo(()=>{const e={position:a,left:0,top:0};if(!I.floating)return e;const t=Ra(I.floating,u.x),n=Ra(I.floating,u.y);return i?{...e,transform:"translate("+t+"px, "+n+"px)",...Aa(I.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:t,top:n}},[a,i,I.floating,u.x,u.y]);return d.useMemo(()=>({...u,update:M,refs:P,elements:I,floatingStyles:A}),[u,M,P,I,A])}({...e,elements:{...r,...i&&{reference:i}}}),f=d.useCallback(e=>{const t=xt(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),getClientRects:()=>e.getClientRects(),contextElement:e}:e;l(t),h.refs.setReference(t)},[h.refs]),g=d.useCallback(e=>{(xt(e)||null===e)&&(u.current=e,o(e)),(xt(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!xt(e))&&h.refs.setReference(e)},[h.refs]),y=d.useMemo(()=>({...h.refs,setReference:g,setPositionReference:f,domReference:u}),[h.refs,g,f]),x=d.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=d.useMemo(()=>({...h,...n,refs:y,elements:x,nodeId:t}),[h,y,x,t,n]);return la(()=>{n.dataRef.current.floatingContext=v;const e=null==p?void 0:p.nodesRef.current.find(e=>e.id===t);e&&(e.context=v)}),d.useMemo(()=>({...h,context:v,refs:y,elements:x}),[h,y,x,v])}
/*!
  react-datepicker v8.7.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var Ga=function(e,t){return(Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)};function Ja(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}Ga(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}var Xa=function(){return Xa=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Xa.apply(this,arguments)};function Za(e,t,a){if(a||2===arguments.length)for(var n,r=0,s=t.length;r<s;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var en,tn,an=function(e){var t=e.showTimeSelectOnly,a=void 0!==t&&t,n=e.showTime,r=void 0!==n&&n,s=e.className,o=e.children,i=a?"Choose Time":"Choose Date".concat(r?" and Time":"");return u.createElement("div",{className:s,role:"dialog","aria-label":i,"aria-modal":"true"},o)},nn=function(e){var t=e.children,a=e.onClickOutside,n=e.className,r=e.containerRef,s=e.style,o=function(e,t){var a=d.useRef(null),n=d.useRef(e);n.current=e;var r=d.useCallback(function(e){var r,s=e.composed&&e.composedPath&&e.composedPath().find(function(e){return e instanceof Node})||e.target;a.current&&!a.current.contains(s)&&(t&&s instanceof HTMLElement&&s.classList.contains(t)||null===(r=n.current)||void 0===r||r.call(n,e))},[t]);return d.useEffect(function(){return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[r]),a}(a,e.ignoreClass);return u.createElement("div",{className:n,style:s,ref:function(e){o.current=e,r&&(r.current=e)}},t)};function rn(){return"undefined"!=typeof window?window:globalThis}function sn(e){if(null==e)return new Date;var t="string"==typeof e?T(e):j(e);return ln(t)?t:new Date}function on(e,t,a,n,r){void 0===r&&(r=sn());for(var s=Cn(a)||Cn(Nn()),o=0,i=Array.isArray(t)?t:[t];o<i.length;o++){var l=i[o],c=R(e,l,r,{locale:s});if(ln(c)&&(!n||e===cn(c,l,a)))return c}return null}function ln(e,t){return E(e)&&!v(e,new Date("1/1/1800"))}function cn(e,t,a){if("en"===a)return ee(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=a?Cn(a):void 0;return n=n||Cn(Nn()),ee(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function dn(e,t){var a=t.dateFormat,n=t.locale,r=Array.isArray(a)&&a.length>0?a[0]:a;return e&&cn(e,r,n)||""}function un(e,t){var a=t.hour,n=void 0===a?0:a,r=t.minute,s=void 0===r?0:r,o=t.second;return W(U(H(e,void 0===o?0:o),s),n)}function pn(e){return I(e)}function mn(e,t,a){var n=Cn(t||Nn());return oe(e,{locale:n,weekStartsOn:a})}function hn(e){return Y(e)}function fn(e){return $(e)}function gn(e){return xe(e)}function yn(){return I(sn())}function xn(e){return A(e)}function vn(e,t){return e&&t?te(e,t):!e&&!t}function bn(e,t){return e&&t?ae(e,t):!e&&!t}function wn(e,t){return e&&t?ye(e,t):!e&&!t}function _n(e,t){return e&&t?z(e,t):!e&&!t}function kn(e,t){return e&&t?S(e,t):!e&&!t}function Dn(e,t,a){var n,r=I(t),s=A(a);try{n=O(e,{start:r,end:s})}catch(o){n=!1}return n}function Nn(){return rn().__localeId__}function Cn(e){if("string"==typeof e){var t=rn();return t.__localeData__?t.__localeData__[e]:void 0}return e}function Sn(e,t){return cn(J(sn(),e),"LLLL",t)}function Tn(e,t){return cn(J(sn(),e),"LLL",t)}function jn(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.maxDate,s=a.excludeDates,o=a.excludeDateIntervals,i=a.includeDates,l=a.includeDateIntervals,c=a.filterDate;return Fn(e,{minDate:n,maxDate:r})||s&&s.some(function(t){return t instanceof Date?_n(e,t):_n(e,t.date)})||o&&o.some(function(t){var a=t.start,n=t.end;return O(e,{start:a,end:n})})||i&&!i.some(function(t){return _n(e,t)})||l&&!l.some(function(t){var a=t.start,n=t.end;return O(e,{start:a,end:n})})||c&&!c(sn(e))||!1}function En(e,t){var a=void 0===t?{}:t,n=a.excludeDates,r=a.excludeDateIntervals;return r&&r.length>0?r.some(function(t){var a=t.start,n=t.end;return O(e,{start:a,end:n})}):n&&n.some(function(t){var a;return t instanceof Date?_n(e,t):_n(e,null!==(a=t.date)&&void 0!==a?a:new Date)})||!1}function Mn(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.maxDate,s=a.excludeDates,o=a.includeDates,i=a.filterDate;return Fn(e,{minDate:n?Y(n):void 0,maxDate:r?B(r):void 0})||(null==s?void 0:s.some(function(t){return bn(e,t instanceof Date?t:t.date)}))||o&&!o.some(function(t){return bn(e,t)})||i&&!i(sn(e))||!1}function Ln(e,t,a,n){var r=_(e),s=C(e),o=_(t),i=C(t),l=_(n);return r===o&&r===l?s<=a&&a<=i:r<o&&(l===r&&s<=a||l===o&&i>=a||l<o&&l>r)}function Pn(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.maxDate,s=a.excludeDates,o=a.includeDates;return Fn(e,{minDate:n,maxDate:r})||s&&s.some(function(t){return bn(t instanceof Date?t:t.date,e)})||o&&!o.some(function(t){return bn(t,e)})||!1}function In(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.maxDate,s=a.excludeDates,o=a.includeDates,i=a.filterDate;return Fn(e,{minDate:n,maxDate:r})||(null==s?void 0:s.some(function(t){return wn(e,t instanceof Date?t:t.date)}))||o&&!o.some(function(t){return wn(e,t)})||i&&!i(sn(e))||!1}function An(e,t,a){if(!t||!a)return!1;if(!E(t)||!E(a))return!1;var n=_(t),r=_(a);return n<=e&&r>=e}function Rn(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.maxDate,s=a.excludeDates,o=a.includeDates,i=a.filterDate,l=new Date(e,0,1);return Fn(l,{minDate:n?$(n):void 0,maxDate:r?F(r):void 0})||(null==s?void 0:s.some(function(e){return vn(l,e instanceof Date?e:e.date)}))||o&&!o.some(function(e){return vn(l,e)})||i&&!i(sn(l))||!1}function On(e,t,a,n){var r=_(e),s=he(e),o=_(t),i=he(t),l=_(n);return r===o&&r===l?s<=a&&a<=i:r<o&&(l===r&&s<=a||l===o&&i>=a||l<o&&l>r)}function Fn(e,t){var a,n=void 0===t?{}:t,r=n.minDate,s=n.maxDate;return null!==(a=r&&M(e,r)<0||s&&M(e,s)>0)&&void 0!==a&&a}function $n(e,t){return t.some(function(t){return N(t)===N(e)&&D(t)===D(e)&&k(t)===k(e)})}function Bn(e,t){var a=void 0===t?{}:t,n=a.excludeTimes,r=a.includeTimes,s=a.filterTime;return n&&$n(e,n)||r&&!$n(e,r)||s&&!s(e)||!1}function Yn(e,t){var a=t.minTime,n=t.maxTime;if(!a||!n)throw new Error("Both minTime and maxTime props required");var r=sn();r=W(r,N(e)),r=U(r,D(e)),r=H(r,k(e));var s=sn();s=W(s,N(a)),s=U(s,D(a)),s=H(s,k(a));var o,i=sn();i=W(i,N(n)),i=U(i,D(n)),i=H(i,k(n));try{o=!O(r,{start:s,end:i})}catch(l){o=!1}return o}function Wn(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.includeDates,s=V(e,1);return n&&ie(n,s)>0||r&&r.every(function(e){return ie(e,s)>0})||!1}function Un(e,t){var a=void 0===t?{}:t,n=a.maxDate,r=a.includeDates,s=K(e,1);return n&&ie(s,n)>0||r&&r.every(function(e){return ie(s,e)>0})||!1}function Hn(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.includeDates,s=X(e,1);return n&&de(n,s)>0||r&&r.every(function(e){return de(e,s)>0})||!1}function zn(e,t){var a=void 0===t?{}:t,n=a.maxDate,r=a.includeDates,s=Z(e,1);return n&&de(s,n)>0||r&&r.every(function(e){return de(s,e)>0})||!1}function Kn(e){var t=e.minDate,a=e.includeDates;if(a&&t){var n=a.filter(function(e){return M(e,t)>=0});return L(n)}return a?L(a):t}function Vn(e){var t=e.maxDate,a=e.includeDates;if(a&&t){var n=a.filter(function(e){return M(e,t)<=0});return P(n)}return a?P(a):t}function Qn(e,t){var a;void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--highlighted");for(var n=new Map,r=0,s=e.length;r<s;r++){var o=e[r];if(w(o)){var i=cn(o,"MM.dd.yyyy");(p=n.get(i)||[]).includes(t)||(p.push(t),n.set(i,p))}else if("object"==typeof o){var l=null!==(a=Object.keys(o)[0])&&void 0!==a?a:"",c=o[l];if("string"==typeof l&&Array.isArray(c))for(var d=0,u=c.length;d<u;d++){var p,m=c[d];if(m)i=cn(m,"MM.dd.yyyy"),(p=n.get(i)||[]).includes(l)||(p.push(l),n.set(i,p))}}}return n}function qn(e,t){void 0===e&&(e=[]),void 0===t&&(t="react-datepicker__day--holidays");var a=new Map;return e.forEach(function(e){var n=e.date,r=e.holidayName;if(w(n)){var s=cn(n,"MM.dd.yyyy"),o=a.get(s)||{className:"",holidayNames:[]};if(!("className"in o)||o.className!==t||(i=o.holidayNames,l=[r],i.length!==l.length||!i.every(function(e,t){return e===l[t]}))){var i,l;o.className=t;var c=o.holidayNames;o.holidayNames=c?Za(Za([],c,!0),[r],!1):[r],a.set(s,o)}}}),a}function Gn(e,t,a,n,r){for(var s=r.length,o=[],i=0;i<s;i++){var l=e,c=r[i];c&&(l=ve(l,N(c)),l=fe(l,D(c)),l=be(l,k(c)));var d=fe(e,(a+1)*n);b(l,t)&&v(l,d)&&null!=c&&o.push(c)}return o}function Jn(e){return e<10?"0".concat(e):"".concat(e)}function Xn(e,t){void 0===t&&(t=12);var a=Math.ceil(_(e)/t)*t;return{startPeriod:a-(t-1),endPeriod:a}}function Zn(e){var t=e.getSeconds(),a=e.getMilliseconds();return j(e.getTime()-1e3*t-a)}function er(e){if(!w(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function tr(e,t){if(!w(e)||!w(t))throw new Error("Invalid date received");var a=er(e),n=er(t);return v(a,n)}function ar(e){return e.key===en.Space}(tn=en||(en={})).ArrowUp="ArrowUp",tn.ArrowDown="ArrowDown",tn.ArrowLeft="ArrowLeft",tn.ArrowRight="ArrowRight",tn.PageUp="PageUp",tn.PageDown="PageDown",tn.Home="Home",tn.End="End",tn.Enter="Enter",tn.Space=" ",tn.Tab="Tab",tn.Escape="Escape",tn.Backspace="Backspace",tn.X="x";var nr,rr=function(e){function t(t){var a=e.call(this,t)||this;return a.inputRef=u.createRef(),a.onTimeChange=function(e){var t,n;a.setState({time:e});var r=a.props.date,s=r instanceof Date&&!isNaN(+r)?r:new Date;if(null==e?void 0:e.includes(":")){var o=e.split(":"),i=o[0],l=o[1];s.setHours(Number(i)),s.setMinutes(Number(l))}null===(n=(t=a.props).onChange)||void 0===n||n.call(t,s)},a.renderTimeInput=function(){var e=a.state.time,t=a.props,n=t.date,r=t.timeString,s=t.customTimeInput;return s?d.cloneElement(s,{date:n,value:e,onChange:a.onTimeChange}):u.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:a.inputRef,onClick:function(){var e;null===(e=a.inputRef.current)||void 0===e||e.focus()},required:!0,value:e,onChange:function(e){a.onTimeChange(e.target.value||r)}})},a.state={time:a.props.timeString},a}return Ja(t,e),t.getDerivedStateFromProps=function(e,t){return e.timeString!==t.time?{time:e.timeString}:null},t.prototype.render=function(){return u.createElement("div",{className:"react-datepicker__input-time-container"},u.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),u.createElement("div",{className:"react-datepicker-time__input-container"},u.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(d.Component),sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dayEl=d.createRef(),t.handleClick=function(e){!t.isDisabled()&&t.props.onClick&&t.props.onClick(e)},t.handleMouseEnter=function(e){!t.isDisabled()&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},t.handleOnKeyDown=function(e){var a,n;e.key===en.Space&&(e.preventDefault(),e.key=en.Enter),null===(n=(a=t.props).handleOnKeyDown)||void 0===n||n.call(a,e)},t.isSameDay=function(e){return _n(t.props.day,e)},t.isKeyboardSelected=function(){var e;if(t.props.disabledKeyboardNavigation)return!1;var a=t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected),n=t.props.preSelection&&t.isDisabled(t.props.preSelection);return!a&&t.isSameDayOrWeek(t.props.preSelection)&&!n},t.isDisabled=function(e){return void 0===e&&(e=t.props.day),jn(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(){return En(t.props.day,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.isStartOfWeek=function(){return _n(t.props.day,mn(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameWeek=function(e){return t.props.showWeekPicker&&_n(e,mn(t.props.day,t.props.locale,t.props.calendarStartDay))},t.isSameDayOrWeek=function(e){return t.isSameDay(e)||t.isSameWeek(e)},t.getHighLightedClass=function(){var e=t.props,a=e.day,n=e.highlightDates;if(!n)return!1;var r=cn(a,"MM.dd.yyyy");return n.get(r)},t.getHolidaysClass=function(){var e,a=t.props,n=a.day,r=a.holidays;if(!r)return[void 0];var s=cn(n,"MM.dd.yyyy");return r.has(s)?[null===(e=r.get(s))||void 0===e?void 0:e.className]:[void 0]},t.isInRange=function(){var e=t.props,a=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&Dn(a,n,r)},t.isInSelectingRange=function(){var e,a=t.props,n=a.day,r=a.selectsStart,s=a.selectsEnd,o=a.selectsRange,i=a.selectsDisabledDaysInRange,l=a.startDate,c=a.swapRange,d=a.endDate,u=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;if(!(r||s||o)||!u||!i&&t.isDisabled())return!1;if(r&&d&&(v(u,d)||kn(u,d)))return Dn(n,u,d);if(s&&l&&(b(u,l)||kn(u,l)))return Dn(n,l,u);if(o&&l&&!d){if(kn(u,l))return Dn(n,l,u);if(b(u,l))return Dn(n,l,u);if(c&&v(u,l))return Dn(n,u,l)}return!1},t.isSelectingRangeStart=function(){var e;if(!t.isInSelectingRange())return!1;var a=t.props,n=a.day,r=a.startDate,s=a.selectsStart,o=a.swapRange,i=a.selectsRange,l=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return _n(n,s||i&&o&&r&&l&&v(l,r)?l:r)},t.isSelectingRangeEnd=function(){var e;if(!t.isInSelectingRange())return!1;var a=t.props,n=a.day,r=a.endDate,s=a.selectsEnd,o=a.selectsRange,i=a.swapRange,l=a.startDate,c=null!==(e=t.props.selectingDate)&&void 0!==e?e:t.props.preSelection;return _n(n,s?c:o&&i&&l&&c?v(c,l)?l:c:o?c:r)},t.isRangeStart=function(){var e=t.props,a=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&_n(n,a)},t.isRangeEnd=function(){var e=t.props,a=e.day,n=e.startDate,r=e.endDate;return!(!n||!r)&&_n(r,a)},t.isWeekend=function(){var e=_e(t.props.day);return 0===e||6===e},t.isAfterMonth=function(){return void 0!==t.props.month&&(t.props.month+1)%12===C(t.props.day)},t.isBeforeMonth=function(){return void 0!==t.props.month&&(C(t.props.day)+1)%12===t.props.month},t.isCurrentDay=function(){return t.isSameDay(sn())},t.isSelected=function(){var e;return t.props.selectsMultiple?null===(e=t.props.selectedDates)||void 0===e?void 0:e.some(function(e){return t.isSameDayOrWeek(e)}):t.isSameDayOrWeek(t.props.selected)},t.getClassNames=function(e){var a=t.props.dayClassName?t.props.dayClassName(e):void 0;return x("react-datepicker__day",a,"react-datepicker__day--"+cn(t.props.day,"ddd",undefined),{"react-datepicker__day--disabled":t.isDisabled(),"react-datepicker__day--excluded":t.isExcluded(),"react-datepicker__day--selected":t.isSelected(),"react-datepicker__day--keyboard-selected":t.isKeyboardSelected(),"react-datepicker__day--range-start":t.isRangeStart(),"react-datepicker__day--range-end":t.isRangeEnd(),"react-datepicker__day--in-range":t.isInRange(),"react-datepicker__day--in-selecting-range":t.isInSelectingRange(),"react-datepicker__day--selecting-range-start":t.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":t.isSelectingRangeEnd(),"react-datepicker__day--today":t.isCurrentDay(),"react-datepicker__day--weekend":t.isWeekend(),"react-datepicker__day--outside-month":t.isAfterMonth()||t.isBeforeMonth()},t.getHighLightedClass(),t.getHolidaysClass())},t.getAriaLabel=function(){var e=t.props,a=e.day,n=e.ariaLabelPrefixWhenEnabled,r=void 0===n?"Choose":n,s=e.ariaLabelPrefixWhenDisabled,o=void 0===s?"Not available":s,i=t.isDisabled()||t.isExcluded()?o:r;return"".concat(i," ").concat(cn(a,"PPPP",t.props.locale))},t.getTitle=function(){var e=t.props,a=e.day,n=e.holidays,r=void 0===n?new Map:n,s=e.excludeDates,o=cn(a,"MM.dd.yyyy"),i=[];return r.has(o)&&i.push.apply(i,r.get(o).holidayNames),t.isExcluded()&&i.push(null==s?void 0:s.filter(function(e){return e instanceof Date?_n(e,a):_n(null==e?void 0:e.date,a)}).map(function(e){if(!(e instanceof Date))return null==e?void 0:e.message})),i.join(", ")},t.getTabIndex=function(){var e=t.props.selected,a=t.props.preSelection;return(!t.props.showWeekPicker||!t.props.showWeekNumber&&t.isStartOfWeek())&&(t.isKeyboardSelected()||t.isSameDay(e)&&_n(a,e))?0:-1},t.handleFocusDay=function(){var e;t.shouldFocusDay()&&(null===(e=t.dayEl.current)||void 0===e||e.focus({preventScroll:!0}))},t.renderDayContents=function(){return t.props.monthShowsDuplicateDaysEnd&&t.isAfterMonth()||t.props.monthShowsDuplicateDaysStart&&t.isBeforeMonth()?null:t.props.renderDayContents?t.props.renderDayContents(ke(t.props.day),t.props.day):ke(t.props.day)},t.render=function(){return u.createElement("div",{ref:t.dayEl,className:t.getClassNames(t.props.day),onKeyDown:t.handleOnKeyDown,onClick:t.handleClick,onMouseEnter:t.props.usePointerEvent?void 0:t.handleMouseEnter,onPointerEnter:t.props.usePointerEvent?t.handleMouseEnter:void 0,tabIndex:t.getTabIndex(),"aria-label":t.getAriaLabel(),role:"gridcell",title:t.getTitle(),"aria-disabled":t.isDisabled(),"aria-current":t.isCurrentDay()?"date":void 0,"aria-selected":t.isSelected()||t.isInRange()},t.renderDayContents(),""!==t.getTitle()&&u.createElement("span",{className:"overlay"},t.getTitle()))},t}return Ja(t,e),t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var e=!1;return 0===this.getTabIndex()&&this.isSameDay(this.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(e=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(e=!1),this.isDayActiveElement()&&(e=!0),this.isDuplicateDay()&&(e=!1)),e},t.prototype.isDayActiveElement=function(){var e,t,a;return(null===(t=null===(e=this.props.containerRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.contains(document.activeElement))&&(null===(a=document.activeElement)||void 0===a?void 0:a.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(d.Component),or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekNumberEl=d.createRef(),t.handleClick=function(e){t.props.onClick&&t.props.onClick(e)},t.handleOnKeyDown=function(e){var a,n;e.key===en.Space&&(e.preventDefault(),e.key=en.Enter),null===(n=(a=t.props).handleOnKeyDown)||void 0===n||n.call(a,e)},t.isKeyboardSelected=function(){return!t.props.disabledKeyboardNavigation&&!_n(t.props.date,t.props.selected)&&_n(t.props.date,t.props.preSelection)},t.getTabIndex=function(){return t.props.showWeekPicker&&t.props.showWeekNumber&&(t.isKeyboardSelected()||_n(t.props.date,t.props.selected)&&_n(t.props.preSelection,t.props.selected))?0:-1},t.handleFocusWeekNumber=function(e){var a=!1;0===t.getTabIndex()&&!(null==e?void 0:e.isInputFocused)&&_n(t.props.date,t.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(a=!0),t.props.inline&&!t.props.shouldFocusDayInline&&(a=!1),t.props.containerRef&&t.props.containerRef.current&&t.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(a=!0)),a&&t.weekNumberEl.current&&t.weekNumberEl.current.focus({preventScroll:!0})},t}return Ja(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(e){this.handleFocusWeekNumber(e)},t.prototype.render=function(){var e=this.props,a=e.weekNumber,n=e.isWeekDisabled,r=e.ariaLabelPrefix,s=void 0===r?t.defaultProps.ariaLabelPrefix:r,o=e.onClick,i={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!o&&!n,"react-datepicker__week-number--selected":!!o&&_n(this.props.date,this.props.selected)};return u.createElement("div",{ref:this.weekNumberEl,className:x(i),"aria-label":"".concat(s," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},a)},t}(d.Component),ir=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.isDisabled=function(e){return jn(e,{minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,excludeDateIntervals:a.props.excludeDateIntervals,includeDateIntervals:a.props.includeDateIntervals,includeDates:a.props.includeDates,filterDate:a.props.filterDate})},a.handleDayClick=function(e,t){a.props.onDayClick&&a.props.onDayClick(e,t)},a.handleDayMouseEnter=function(e){a.props.onDayMouseEnter&&a.props.onDayMouseEnter(e)},a.handleWeekClick=function(e,n,r){for(var s,o,i,l=new Date(e),c=0;c<7;c++){var d=new Date(e);if(d.setDate(d.getDate()+c),!a.isDisabled(d)){l=d;break}}"function"==typeof a.props.onWeekSelect&&a.props.onWeekSelect(l,n,r),a.props.showWeekPicker&&a.handleDayClick(l,r),(null!==(s=a.props.shouldCloseOnSelect)&&void 0!==s?s:t.defaultProps.shouldCloseOnSelect)&&(null===(i=(o=a.props).setOpen)||void 0===i||i.call(o,!1))},a.formatWeekNumber=function(e){return a.props.formatWeekNumber?a.props.formatWeekNumber(e):function(e){return we(e)}(e)},a.isWeekDisabled=function(){for(var e=a.startOfWeek(),t=G(e,6),n=new Date(e);n<=t;){if(!a.isDisabled(n))return!1;n=G(n,1)}return!0},a.renderDays=function(){var e=a.startOfWeek(),n=[],r=a.formatWeekNumber(e);if(a.props.showWeekNumber){var s=a.props.onWeekSelect||a.props.showWeekPicker?a.handleWeekClick.bind(a,e,r):void 0;n.push(u.createElement(or,Xa({key:"W"},t.defaultProps,a.props,{weekNumber:r,isWeekDisabled:a.isWeekDisabled(),date:e,onClick:s})))}return n.concat([0,1,2,3,4,5,6].map(function(n){var r=G(e,n);return u.createElement(sr,Xa({},t.defaultProps,a.props,{ariaLabelPrefixWhenEnabled:a.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:a.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,onClick:a.handleDayClick.bind(a,r),onMouseEnter:a.handleDayMouseEnter.bind(a,r)}))}))},a.startOfWeek=function(){return mn(a.props.day,a.props.locale,a.props.calendarStartDay)},a.isKeyboardSelected=function(){return!a.props.disabledKeyboardNavigation&&!_n(a.startOfWeek(),a.props.selected)&&_n(a.startOfWeek(),a.props.preSelection)},a}return Ja(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":_n(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},t=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return u.createElement("div",{className:x(e,t),role:"row"},this.renderDays())},t}(d.Component),lr="two_columns",cr="three_columns",dr="four_columns",ur=((nr={})[lr]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},nr[cr]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},nr[dr]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},nr);function pr(e,t){return e?dr:t?lr:cr}var mr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MONTH_REFS=Za([],Array(12),!0).map(function(){return d.createRef()}),t.QUARTER_REFS=Za([],Array(4),!0).map(function(){return d.createRef()}),t.isDisabled=function(e){return jn(e,{minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,includeDateIntervals:t.props.includeDateIntervals,includeDates:t.props.includeDates,filterDate:t.props.filterDate})},t.isExcluded=function(e){return En(e,{excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals})},t.handleDayClick=function(e,a){var n,r;null===(r=(n=t.props).onDayClick)||void 0===r||r.call(n,e,a,t.props.orderInDisplay)},t.handleDayMouseEnter=function(e){var a,n;null===(n=(a=t.props).onDayMouseEnter)||void 0===n||n.call(a,e)},t.handleMouseLeave=function(){var e,a;null===(a=(e=t.props).onMouseLeave)||void 0===a||a.call(e)},t.isRangeStartMonth=function(e){var a=t.props,n=a.day,r=a.startDate,s=a.endDate;return!(!r||!s)&&bn(J(n,e),r)},t.isRangeStartQuarter=function(e){var a=t.props,n=a.day,r=a.startDate,s=a.endDate;return!(!r||!s)&&wn(me(n,e),r)},t.isRangeEndMonth=function(e){var a=t.props,n=a.day,r=a.startDate,s=a.endDate;return!(!r||!s)&&bn(J(n,e),s)},t.isRangeEndQuarter=function(e){var a=t.props,n=a.day,r=a.startDate,s=a.endDate;return!(!r||!s)&&wn(me(n,e),s)},t.isInSelectingRangeMonth=function(e){var a,n=t.props,r=n.day,s=n.selectsStart,o=n.selectsEnd,i=n.selectsRange,l=n.startDate,c=n.endDate,d=null!==(a=t.props.selectingDate)&&void 0!==a?a:t.props.preSelection;return!(!(s||o||i)||!d)&&(s&&c?Ln(d,c,e,r):(o&&l||!(!i||!l||c))&&Ln(l,d,e,r))},t.isSelectingMonthRangeStart=function(e){var a;if(!t.isInSelectingRangeMonth(e))return!1;var n=t.props,r=n.day,s=n.startDate,o=n.selectsStart,i=J(r,e),l=null!==(a=t.props.selectingDate)&&void 0!==a?a:t.props.preSelection;return bn(i,o?l:s)},t.isSelectingMonthRangeEnd=function(e){var a;if(!t.isInSelectingRangeMonth(e))return!1;var n=t.props,r=n.day,s=n.endDate,o=n.selectsEnd,i=n.selectsRange,l=J(r,e),c=null!==(a=t.props.selectingDate)&&void 0!==a?a:t.props.preSelection;return bn(l,o||i?c:s)},t.isInSelectingRangeQuarter=function(e){var a,n=t.props,r=n.day,s=n.selectsStart,o=n.selectsEnd,i=n.selectsRange,l=n.startDate,c=n.endDate,d=null!==(a=t.props.selectingDate)&&void 0!==a?a:t.props.preSelection;return!(!(s||o||i)||!d)&&(s&&c?On(d,c,e,r):(o&&l||!(!i||!l||c))&&On(l,d,e,r))},t.isWeekInMonth=function(e){var a=t.props.day,n=G(e,6);return bn(e,a)||bn(n,a)},t.isCurrentMonth=function(e,t){return _(e)===_(sn())&&t===C(sn())},t.isCurrentQuarter=function(e,t){return _(e)===_(sn())&&t===he(sn())},t.isSelectedMonth=function(e,t,a){return C(a)===t&&_(e)===_(a)},t.isSelectMonthInList=function(e,a,n){return n.some(function(n){return t.isSelectedMonth(e,a,n)})},t.isSelectedQuarter=function(e,t,a){return he(e)===t&&_(e)===_(a)},t.isMonthSelected=function(){var e=t.props,a=e.day,n=e.selected,r=e.selectedDates,s=e.selectsMultiple,o=C(a);return s?null==r?void 0:r.some(function(e){return t.isSelectedMonth(a,o,e)}):!!n&&t.isSelectedMonth(a,o,n)},t.renderWeeks=function(){for(var e,a,n=[],r=t.props.fixedHeight,s=0,o=!1,i=mn(hn(t.props.day),t.props.locale,t.props.calendarStartDay),l=t.props.selected?(e=t.props.selected,t.props.showWeekPicker?mn(e,t.props.locale,t.props.calendarStartDay):t.props.selected):void 0,c=t.props.preSelection?(a=t.props.preSelection,t.props.showWeekPicker?mn(a,t.props.locale,t.props.calendarStartDay):t.props.preSelection):void 0;n.push(u.createElement(ir,Xa({},t.props,{ariaLabelPrefix:t.props.weekAriaLabelPrefix,key:s,day:i,month:C(t.props.day),onDayClick:t.handleDayClick,onDayMouseEnter:t.handleDayMouseEnter,selected:l,preSelection:c,showWeekNumber:t.props.showWeekNumbers}))),!o;){s++,i=ne(i,1);var d=r&&s>=6,p=!r&&!t.isWeekInMonth(i);if(d||p){if(!t.props.peekNextMonth)break;o=!0}}return n},t.onMonthClick=function(e,a){var n=t.isMonthDisabledForLabelDate(a),r=n.isDisabled,s=n.labelDate;r||t.handleDayClick(hn(s),e)},t.onMonthMouseEnter=function(e){var a=t.isMonthDisabledForLabelDate(e),n=a.isDisabled,r=a.labelDate;n||t.handleDayMouseEnter(hn(r))},t.handleMonthNavigation=function(e,a){var n,r,s,o;null===(r=(n=t.props).setPreSelection)||void 0===r||r.call(n,a),null===(o=null===(s=t.MONTH_REFS[e])||void 0===s?void 0:s.current)||void 0===o||o.focus()},t.handleKeyboardNavigation=function(e,a,n){var r,s=t.props,o=s.selected,i=s.preSelection,l=s.setPreSelection,c=s.minDate,d=s.maxDate,u=s.showFourColumnMonthYearPicker,p=s.showTwoColumnMonthYearPicker;if(i){var m=pr(u,p),h=t.getVerticalOffset(m),f=null===(r=ur[m])||void 0===r?void 0:r.grid,g=function(e,t,a){var n,r,s=t,o=a;switch(e){case en.ArrowRight:s=K(t,1),o=11===a?0:a+1;break;case en.ArrowLeft:s=V(t,1),o=0===a?11:a-1;break;case en.ArrowUp:s=V(t,h),o=(null===(n=null==f?void 0:f[0])||void 0===n?void 0:n.includes(a))?a+12-h:a-h;break;case en.ArrowDown:s=K(t,h),o=(null===(r=null==f?void 0:f[f.length-1])||void 0===r?void 0:r.includes(a))?a-12+h:a+h}return{newCalculatedDate:s,newCalculatedMonth:o}};if(a!==en.Enter){var y=function(e,a,n){for(var r=e,s=!1,o=0,i=g(r,a,n),l=i.newCalculatedDate,u=i.newCalculatedMonth;!s;){if(o>=40){l=a,u=n;break}var p;c&&l<c&&(r=en.ArrowRight,l=(p=g(r,l,u)).newCalculatedDate,u=p.newCalculatedMonth),d&&l>d&&(r=en.ArrowLeft,l=(p=g(r,l,u)).newCalculatedDate,u=p.newCalculatedMonth),Pn(l,t.props)?(l=(p=g(r,l,u)).newCalculatedDate,u=p.newCalculatedMonth):s=!0,o++}return{newCalculatedDate:l,newCalculatedMonth:u}}(a,i,n),x=y.newCalculatedDate,v=y.newCalculatedMonth;switch(a){case en.ArrowRight:case en.ArrowLeft:case en.ArrowUp:case en.ArrowDown:t.handleMonthNavigation(v,x)}}else t.isMonthDisabled(n)||(t.onMonthClick(e,n),null==l||l(o))}},t.getVerticalOffset=function(e){var t,a;return null!==(a=null===(t=ur[e])||void 0===t?void 0:t.verticalNavigationOffset)&&void 0!==a?a:0},t.onMonthKeyDown=function(e,a){var n=t.props,r=n.disabledKeyboardNavigation,s=n.handleOnMonthKeyDown,o=e.key;o!==en.Tab&&e.preventDefault(),r||t.handleKeyboardNavigation(e,o,a),s&&s(e)},t.onQuarterClick=function(e,a){var n=me(t.props.day,a);In(n,t.props)||t.handleDayClick(gn(n),e)},t.onQuarterMouseEnter=function(e){var a=me(t.props.day,e);In(a,t.props)||t.handleDayMouseEnter(gn(a))},t.handleQuarterNavigation=function(e,a){var n,r,s,o;t.isDisabled(a)||t.isExcluded(a)||(null===(r=(n=t.props).setPreSelection)||void 0===r||r.call(n,a),null===(o=null===(s=t.QUARTER_REFS[e-1])||void 0===s?void 0:s.current)||void 0===o||o.focus())},t.onQuarterKeyDown=function(e,a){var n,r,s=e.key;if(!t.props.disabledKeyboardNavigation)switch(s){case en.Enter:t.onQuarterClick(e,a),null===(r=(n=t.props).setPreSelection)||void 0===r||r.call(n,t.props.selected);break;case en.ArrowRight:if(!t.props.preSelection)break;t.handleQuarterNavigation(4===a?1:a+1,ue(t.props.preSelection,1));break;case en.ArrowLeft:if(!t.props.preSelection)break;t.handleQuarterNavigation(1===a?4:a-1,le(t.props.preSelection))}},t.isMonthDisabledForLabelDate=function(e){var a,n=t.props,r=n.day,s=n.minDate,o=n.maxDate,i=n.excludeDates,l=n.includeDates,c=J(r,e);return{isDisabled:null!==(a=(s||o||i||l)&&Mn(c,t.props))&&void 0!==a&&a,labelDate:c}},t.isMonthDisabled=function(e){return t.isMonthDisabledForLabelDate(e).isDisabled},t.getMonthClassNames=function(e){var a=t.props,n=a.day,r=a.startDate,s=a.endDate,o=a.preSelection,i=a.monthClassName,l=i?i(J(n,e)):void 0,c=t.getSelection();return x("react-datepicker__month-text","react-datepicker__month-".concat(e),l,{"react-datepicker__month-text--disabled":t.isMonthDisabled(e),"react-datepicker__month-text--selected":c?t.isSelectMonthInList(n,e,c):void 0,"react-datepicker__month-text--keyboard-selected":!t.props.disabledKeyboardNavigation&&o&&t.isSelectedMonth(n,e,o)&&!t.isMonthSelected()&&!t.isMonthDisabled(e),"react-datepicker__month-text--in-selecting-range":t.isInSelectingRangeMonth(e),"react-datepicker__month-text--in-range":r&&s?Ln(r,s,e,n):void 0,"react-datepicker__month-text--range-start":t.isRangeStartMonth(e),"react-datepicker__month-text--range-end":t.isRangeEndMonth(e),"react-datepicker__month-text--selecting-range-start":t.isSelectingMonthRangeStart(e),"react-datepicker__month-text--selecting-range-end":t.isSelectingMonthRangeEnd(e),"react-datepicker__month-text--today":t.isCurrentMonth(n,e)})},t.getTabIndex=function(e){if(null==t.props.preSelection)return"-1";var a=C(t.props.preSelection),n=t.isMonthDisabledForLabelDate(a).isDisabled;return e!==a||n||t.props.disabledKeyboardNavigation?"-1":"0"},t.getQuarterTabIndex=function(e){if(null==t.props.preSelection)return"-1";var a=he(t.props.preSelection),n=In(t.props.day,t.props);return e!==a||n||t.props.disabledKeyboardNavigation?"-1":"0"},t.getAriaLabel=function(e){var a=t.props,n=a.chooseDayAriaLabelPrefix,r=void 0===n?"Choose":n,s=a.disabledDayAriaLabelPrefix,o=void 0===s?"Not available":s,i=a.day,l=a.locale,c=J(i,e),d=t.isDisabled(c)||t.isExcluded(c)?o:r;return"".concat(d," ").concat(cn(c,"MMMM yyyy",l))},t.getQuarterClassNames=function(e){var a=t.props,n=a.day,r=a.startDate,s=a.endDate,o=a.selected,i=a.minDate,l=a.maxDate,c=a.excludeDates,d=a.includeDates,u=a.filterDate,p=a.preSelection,m=a.disabledKeyboardNavigation,h=(i||l||c||d||u)&&In(me(n,e),t.props);return x("react-datepicker__quarter-text","react-datepicker__quarter-".concat(e),{"react-datepicker__quarter-text--disabled":h,"react-datepicker__quarter-text--selected":o?t.isSelectedQuarter(n,e,o):void 0,"react-datepicker__quarter-text--keyboard-selected":!m&&p&&t.isSelectedQuarter(n,e,p)&&!h,"react-datepicker__quarter-text--in-selecting-range":t.isInSelectingRangeQuarter(e),"react-datepicker__quarter-text--in-range":r&&s?On(r,s,e,n):void 0,"react-datepicker__quarter-text--range-start":t.isRangeStartQuarter(e),"react-datepicker__quarter-text--range-end":t.isRangeEndQuarter(e),"react-datepicker__quarter-text--today":t.isCurrentQuarter(n,e)})},t.getMonthContent=function(e){var a=t.props,n=a.showFullMonthYearPicker,r=a.renderMonthContent,s=a.locale,o=a.day,i=Tn(e,s),l=Sn(e,s);return r?r(e,i,l,o):n?l:i},t.getQuarterContent=function(e){var a,n,r,s=t.props,o=s.renderQuarterContent,i=(n=e,r=s.locale,cn(me(sn(),n),"QQQ",r));return null!==(a=null==o?void 0:o(e,i))&&void 0!==a?a:i},t.renderMonths=function(){var e,a=t.props,n=a.showTwoColumnMonthYearPicker,r=a.showFourColumnMonthYearPicker,s=a.day,o=a.selected,i=null===(e=ur[pr(r,n)])||void 0===e?void 0:e.grid;return null==i?void 0:i.map(function(e,a){return u.createElement("div",{className:"react-datepicker__month-wrapper",key:a},e.map(function(e,a){return u.createElement("div",{ref:t.MONTH_REFS[e],key:a,onClick:function(a){t.onMonthClick(a,e)},onKeyDown:function(a){ar(a)&&(a.preventDefault(),a.key=en.Enter),t.onMonthKeyDown(a,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onMonthMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onMonthMouseEnter(e)}:void 0,tabIndex:Number(t.getTabIndex(e)),className:t.getMonthClassNames(e),"aria-disabled":t.isMonthDisabled(e),role:"option","aria-label":t.getAriaLabel(e),"aria-current":t.isCurrentMonth(s,e)?"date":void 0,"aria-selected":o?t.isSelectedMonth(s,e,o):void 0},t.getMonthContent(e))}))})},t.renderQuarters=function(){var e=t.props,a=e.day,n=e.selected;return u.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(e,r){return u.createElement("div",{key:r,ref:t.QUARTER_REFS[r],role:"option",onClick:function(a){t.onQuarterClick(a,e)},onKeyDown:function(a){t.onQuarterKeyDown(a,e)},onMouseEnter:t.props.usePointerEvent?void 0:function(){return t.onQuarterMouseEnter(e)},onPointerEnter:t.props.usePointerEvent?function(){return t.onQuarterMouseEnter(e)}:void 0,className:t.getQuarterClassNames(e),"aria-selected":n?t.isSelectedQuarter(a,e,n):void 0,tabIndex:Number(t.getQuarterTabIndex(e)),"aria-current":t.isCurrentQuarter(a,e)?"date":void 0},t.getQuarterContent(e))}))},t.getClassNames=function(){var e=t.props,a=e.selectingDate,n=e.selectsStart,r=e.selectsEnd,s=e.showMonthYearPicker,o=e.showQuarterYearPicker,i=e.showWeekPicker;return x("react-datepicker__month",{"react-datepicker__month--selecting-range":a&&(n||r)},{"react-datepicker__monthPicker":s},{"react-datepicker__quarterPicker":o},{"react-datepicker__weekPicker":i})},t}return Ja(t,e),t.prototype.getSelection=function(){var e=this.props,t=e.selected,a=e.selectedDates;return e.selectsMultiple?a:t?[t]:void 0},t.prototype.render=function(){var e=this.props,t=e.showMonthYearPicker,a=e.showQuarterYearPicker,n=e.day,r=e.ariaLabelPrefix,s=void 0===r?"Month ":r,o=s?s.trim()+" ":"";return t||a?u.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(o).concat(cn(n,"MMMM, yyyy",this.props.locale)),role:"listbox"},t?this.renderMonths():this.renderQuarters()):u.createElement("div",{role:"table"},this.props.dayNamesHeader&&u.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),u.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(o).concat(cn(n,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},t}(d.Component),hr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monthOptionButtonsRef={},t.isSelectedMonth=function(e){return t.props.month===e},t.handleOptionKeyDown=function(e,a){var n;switch(a.key){case"Enter":a.preventDefault(),t.onChange(e);break;case"Escape":a.preventDefault(),t.props.onCancel();break;case"ArrowUp":case"ArrowDown":a.preventDefault();var r=(e+("ArrowUp"===a.key?-1:1)+t.props.monthNames.length)%t.props.monthNames.length;null===(n=t.monthOptionButtonsRef[r])||void 0===n||n.focus()}},t.renderOptions=function(){return t.monthOptionButtonsRef={},t.props.monthNames.map(function(e,a){return u.createElement("div",{ref:function(e){t.monthOptionButtonsRef[a]=e,t.isSelectedMonth(a)&&(null==e||e.focus())},role:"button",tabIndex:0,className:t.isSelectedMonth(a)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:e,onClick:t.onChange.bind(t,a),onKeyDown:t.handleOptionKeyDown.bind(t,a),"aria-selected":t.isSelectedMonth(a)?"true":void 0},t.isSelectedMonth(a)?u.createElement("span",{className:"react-datepicker__month-option--selected"},"âœ“"):"",e)})},t.onChange=function(e){return t.props.onChange(e)},t.handleClickOutside=function(){return t.props.onCancel()},t}return Ja(t,e),t.prototype.render=function(){return u.createElement(nn,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(d.Component),fr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(e){return e.map(function(e,t){return u.createElement("option",{key:e,value:t},e)})},t.renderSelectMode=function(e){return u.createElement("select",{value:t.props.month,className:"react-datepicker__month-select",onChange:function(e){return t.onChange(parseInt(e.target.value))}},t.renderSelectOptions(e))},t.renderReadView=function(e,a){return u.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:t.toggleDropdown},u.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),u.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},a[t.props.month]))},t.renderDropdown=function(e){return u.createElement(hr,Xa({key:"dropdown"},t.props,{monthNames:e,onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(e){var a=t.state.dropdownVisible,n=[t.renderReadView(!a,e)];return a&&n.unshift(t.renderDropdown(e)),n},t.onChange=function(e){t.toggleDropdown(),e!==t.props.month&&t.props.onChange(e)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return Ja(t,e),t.prototype.render=function(){var e,t=this,a=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return Tn(e,t.props.locale)}:function(e){return Sn(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(a);break;case"select":e=this.renderSelectMode(a)}return u.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(d.Component);function gr(e,t){for(var a=[],n=hn(e),r=hn(t);!b(n,r);)a.push(sn(n)),n=K(n,1);return a}var yr=function(e){function t(t){var a=e.call(this,t)||this;return a.renderOptions=function(){return a.state.monthYearsList.map(function(e){var t=pe(e),n=vn(a.props.date,e)&&bn(a.props.date,e);return u.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:a.onChange.bind(a,t),"aria-selected":n?"true":void 0},n?u.createElement("span",{className:"react-datepicker__month-year-option--selected"},"âœ“"):"",cn(e,a.props.dateFormat,a.props.locale))})},a.onChange=function(e){return a.props.onChange(e)},a.handleClickOutside=function(){a.props.onCancel()},a.state={monthYearsList:gr(a.props.minDate,a.props.maxDate)},a}return Ja(t,e),t.prototype.render=function(){var e=x({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return u.createElement(nn,{className:e,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(d.Component),xr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=hn(t.props.minDate),a=hn(t.props.maxDate),n=[];!b(e,a);){var r=pe(e);n.push(u.createElement("option",{key:r,value:r},cn(e,t.props.dateFormat,t.props.locale))),e=K(e,1)}return n},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return u.createElement("select",{value:pe(hn(t.props.date)),className:"react-datepicker__month-year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){var a=cn(t.props.date,t.props.dateFormat,t.props.locale);return u.createElement("div",{key:"read",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:t.toggleDropdown},u.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),u.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},a))},t.renderDropdown=function(){return u.createElement(yr,Xa({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,a=[t.renderReadView(!e)];return e&&a.unshift(t.renderDropdown()),a},t.onChange=function(e){t.toggleDropdown();var a=sn(e);vn(t.props.date,a)&&bn(t.props.date,a)||t.props.onChange(a)},t.toggleDropdown=function(){return t.setState({dropdownVisible:!t.state.dropdownVisible})},t}return Ja(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return u.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(d.Component),vr=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.state={height:null},a.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var e,n,r;a.list&&(a.list.scrollTop=null!==(r=a.centerLi&&t.calcCenterPosition(a.props.monthRef?a.props.monthRef.clientHeight-(null!==(n=null===(e=a.header)||void 0===e?void 0:e.clientHeight)&&void 0!==n?n:0):a.list.clientHeight,a.centerLi))&&void 0!==r?r:0)})},a.handleClick=function(e){var t,n;(a.props.minTime||a.props.maxTime)&&Yn(e,a.props)||(a.props.excludeTimes||a.props.includeTimes||a.props.filterTime)&&Bn(e,a.props)||null===(n=(t=a.props).onChange)||void 0===n||n.call(t,e)},a.isSelectedTime=function(e){return a.props.selected&&(t=e,Zn(a.props.selected).getTime()===Zn(t).getTime());var t},a.isDisabledTime=function(e){return(a.props.minTime||a.props.maxTime)&&Yn(e,a.props)||(a.props.excludeTimes||a.props.includeTimes||a.props.filterTime)&&Bn(e,a.props)},a.liClasses=function(e){var n,r=["react-datepicker__time-list-item",a.props.timeClassName?a.props.timeClassName(e):void 0];return a.isSelectedTime(e)&&r.push("react-datepicker__time-list-item--selected"),a.isDisabledTime(e)&&r.push("react-datepicker__time-list-item--disabled"),a.props.injectTimes&&(3600*N(e)+60*D(e)+k(e))%(60*(null!==(n=a.props.intervals)&&void 0!==n?n:t.defaultProps.intervals))!=0&&r.push("react-datepicker__time-list-item--injected"),r.join(" ")},a.handleOnKeyDown=function(e,t){var n,r;e.key===en.Space&&(e.preventDefault(),e.key=en.Enter),(e.key===en.ArrowUp||e.key===en.ArrowLeft)&&e.target instanceof HTMLElement&&e.target.previousSibling&&(e.preventDefault(),e.target.previousSibling instanceof HTMLElement&&e.target.previousSibling.focus()),(e.key===en.ArrowDown||e.key===en.ArrowRight)&&e.target instanceof HTMLElement&&e.target.nextSibling&&(e.preventDefault(),e.target.nextSibling instanceof HTMLElement&&e.target.nextSibling.focus()),e.key===en.Enter&&a.handleClick(t),null===(r=(n=a.props).handleOnKeyDown)||void 0===r||r.call(n,e)},a.renderTimes=function(){for(var e,n,r,s,o=[],i="string"==typeof a.props.format?a.props.format:"p",l=null!==(e=a.props.intervals)&&void 0!==e?e:t.defaultProps.intervals,c=a.props.selected||a.props.openToDate||sn(),d=pn(c),p=a.props.injectTimes&&a.props.injectTimes.sort(function(e,t){return e.getTime()-t.getTime()}),m=60*(n=c,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),s=new Date(n.getFullYear(),n.getMonth(),n.getDate(),24),Math.round((+s-+r)/36e5))/l,h=0;h<m;h++){var f=fe(d,h*l);if(o.push(f),p){var g=Gn(d,f,h,l,p);o=o.concat(g)}}var y=o.reduce(function(e,t){return t.getTime()<=c.getTime()?t:e},o[0]);return o.map(function(e){return u.createElement("li",{key:e.valueOf(),onClick:a.handleClick.bind(a,e),className:a.liClasses(e),ref:function(t){e===y&&(a.centerLi=t)},onKeyDown:function(t){a.handleOnKeyDown(t,e)},tabIndex:e===y?0:-1,role:"option","aria-selected":a.isSelectedTime(e)?"true":void 0,"aria-disabled":a.isDisabledTime(e)?"true":void 0},cn(e,i,a.props.locale))})},a.renderTimeCaption=function(){return!1===a.props.showTimeCaption?u.createElement(u.Fragment,null):u.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(a.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(e){a.header=e}},u.createElement("div",{className:"react-datepicker-time__header"},a.props.timeCaption))},a}return Ja(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var e=this,t=this.props.monthRef;this.updateContainerHeight(),t&&(this.resizeObserver=new ResizeObserver(function(){e.updateContainerHeight()}),this.resizeObserver.observe(t))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var e,a=this,n=this.state.height;return u.createElement("div",{className:"react-datepicker__time-container ".concat((null!==(e=this.props.todayButton)&&void 0!==e?e:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),u.createElement("div",{className:"react-datepicker__time"},u.createElement("div",{className:"react-datepicker__time-box"},u.createElement("ul",{className:"react-datepicker__time-list",ref:function(e){a.list=e},style:n?{height:n}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)},t}(d.Component),br=function(e){function t(t){var a=e.call(this,t)||this;return a.YEAR_REFS=Za([],Array(a.props.yearItemNumber),!0).map(function(){return d.createRef()}),a.isDisabled=function(e){return jn(e,{minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,includeDates:a.props.includeDates,filterDate:a.props.filterDate})},a.isExcluded=function(e){return En(e,{excludeDates:a.props.excludeDates})},a.selectingDate=function(){var e;return null!==(e=a.props.selectingDate)&&void 0!==e?e:a.props.preSelection},a.updateFocusOnPaginate=function(e){window.requestAnimationFrame(function(){var t,n;null===(n=null===(t=a.YEAR_REFS[e])||void 0===t?void 0:t.current)||void 0===n||n.focus()})},a.handleYearClick=function(e,t){a.props.onDayClick&&a.props.onDayClick(e,t)},a.handleYearNavigation=function(e,t){var n,r,s,o,i=a.props,l=i.date,c=i.yearItemNumber;if(void 0!==l&&void 0!==c){var d=Xn(l,c).startPeriod;a.isDisabled(t)||a.isExcluded(t)||(null===(r=(n=a.props).setPreSelection)||void 0===r||r.call(n,t),e-d<0?a.updateFocusOnPaginate(c-(d-e)):e-d>=c?a.updateFocusOnPaginate(Math.abs(c-(e-d))):null===(o=null===(s=a.YEAR_REFS[e-d])||void 0===s?void 0:s.current)||void 0===o||o.focus())}},a.isSameDay=function(e,t){return _n(e,t)},a.isCurrentYear=function(e){return e===_(sn())},a.isRangeStart=function(e){return a.props.startDate&&a.props.endDate&&vn(Q(sn(),e),a.props.startDate)},a.isRangeEnd=function(e){return a.props.startDate&&a.props.endDate&&vn(Q(sn(),e),a.props.endDate)},a.isInRange=function(e){return An(e,a.props.startDate,a.props.endDate)},a.isInSelectingRange=function(e){var t=a.props,n=t.selectsStart,r=t.selectsEnd,s=t.selectsRange,o=t.startDate,i=t.endDate;return!(!(n||r||s)||!a.selectingDate())&&(n&&i?An(e,a.selectingDate(),i):(r&&o||!(!s||!o||i))&&An(e,o,a.selectingDate()))},a.isSelectingRangeStart=function(e){var t;if(!a.isInSelectingRange(e))return!1;var n=a.props,r=n.startDate,s=n.selectsStart;return vn(Q(sn(),e),s?null!==(t=a.selectingDate())&&void 0!==t?t:null:null!=r?r:null)},a.isSelectingRangeEnd=function(e){var t;if(!a.isInSelectingRange(e))return!1;var n=a.props,r=n.endDate,s=n.selectsEnd,o=n.selectsRange;return vn(Q(sn(),e),s||o?null!==(t=a.selectingDate())&&void 0!==t?t:null:null!=r?r:null)},a.isKeyboardSelected=function(e){if(!a.props.disabledKeyboardNavigation&&void 0!==a.props.date&&null!=a.props.preSelection){var t=a.props,n=t.minDate,r=t.maxDate,s=t.excludeDates,o=t.includeDates,i=t.filterDate,l=t.selected,c=fn(Q(a.props.date,e)),d=(n||r||s||o||i)&&Rn(e,a.props),u=!!l&&_n(c,fn(l)),p=_n(c,fn(a.props.preSelection));return!a.props.inline&&!u&&p&&!d}},a.isSelectedYear=function(e){var t=a.props,n=t.selectsMultiple,r=t.selected,s=t.selectedDates;return n?null==s?void 0:s.some(function(t){return e===_(t)}):!!r&&e===_(r)},a.onYearClick=function(e,t){var n=a.props.date;void 0!==n&&a.handleYearClick(fn(Q(n,t)),e)},a.onYearKeyDown=function(e,t){var n,r,s=e.key,o=a.props,i=o.date,l=o.yearItemNumber,c=o.handleOnKeyDown;if(s!==en.Tab&&e.preventDefault(),!a.props.disabledKeyboardNavigation)switch(s){case en.Enter:if(null==a.props.selected)break;a.onYearClick(e,t),null===(r=(n=a.props).setPreSelection)||void 0===r||r.call(n,a.props.selected);break;case en.ArrowRight:if(null==a.props.preSelection)break;a.handleYearNavigation(t+1,Z(a.props.preSelection,1));break;case en.ArrowLeft:if(null==a.props.preSelection)break;a.handleYearNavigation(t-1,X(a.props.preSelection,1));break;case en.ArrowUp:if(void 0===i||void 0===l||null==a.props.preSelection)break;var d=Xn(i,l).startPeriod;if((m=t-(p=3))<d){var u=l%p;t>=d&&t<d+u?p=u:p+=u,m=t-p}a.handleYearNavigation(m,X(a.props.preSelection,p));break;case en.ArrowDown:if(void 0===i||void 0===l||null==a.props.preSelection)break;var p,m,h=Xn(i,l).endPeriod;(m=t+(p=3))>h&&(u=l%p,t<=h&&t>h-u?p=u:p+=u,m=t+p),a.handleYearNavigation(m,Z(a.props.preSelection,p))}c&&c(e)},a.getYearClassNames=function(e){var t=a.props,n=t.date,r=t.minDate,s=t.maxDate,o=t.excludeDates,i=t.includeDates,l=t.filterDate,c=t.yearClassName;return x("react-datepicker__year-text","react-datepicker__year-".concat(e),n?null==c?void 0:c(Q(n,e)):void 0,{"react-datepicker__year-text--selected":a.isSelectedYear(e),"react-datepicker__year-text--disabled":(r||s||o||i||l)&&Rn(e,a.props),"react-datepicker__year-text--keyboard-selected":a.isKeyboardSelected(e),"react-datepicker__year-text--range-start":a.isRangeStart(e),"react-datepicker__year-text--range-end":a.isRangeEnd(e),"react-datepicker__year-text--in-range":a.isInRange(e),"react-datepicker__year-text--in-selecting-range":a.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":a.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":a.isSelectingRangeEnd(e),"react-datepicker__year-text--today":a.isCurrentYear(e)})},a.getYearTabIndex=function(e){if(a.props.disabledKeyboardNavigation||null==a.props.preSelection)return"-1";var t=_(a.props.preSelection),n=Rn(e,a.props);return e!==t||n?"-1":"0"},a.getYearContent=function(e){return a.props.renderYearContent?a.props.renderYearContent(e):e},a}return Ja(t,e),t.prototype.render=function(){var e=this,t=[],a=this.props,n=a.date,r=a.yearItemNumber,s=a.onYearMouseEnter,o=a.onYearMouseLeave;if(void 0===n)return null;for(var i=Xn(n,r),l=i.startPeriod,c=i.endPeriod,d=function(a){t.push(u.createElement("div",{ref:p.YEAR_REFS[a-l],onClick:function(t){e.onYearClick(t,a)},onKeyDown:function(t){ar(t)&&(t.preventDefault(),t.key=en.Enter),e.onYearKeyDown(t,a)},tabIndex:Number(p.getYearTabIndex(a)),className:p.getYearClassNames(a),onMouseEnter:p.props.usePointerEvent?void 0:function(e){return s(e,a)},onPointerEnter:p.props.usePointerEvent?function(e){return s(e,a)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(e){return o(e,a)},onPointerLeave:p.props.usePointerEvent?function(e){return o(e,a)}:void 0,key:a,"aria-current":p.isCurrentYear(a)?"date":void 0},p.getYearContent(a)))},p=this,m=l;m<=c;m++)d(m);return u.createElement("div",{className:"react-datepicker__year"},u.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},t))},t}(d.Component);function wr(e,t,a,n){for(var r=[],s=0;s<2*t+1;s++){var o=e+t-s,i=!0;a&&(i=_(a)<=o),n&&i&&(i=_(n)>=o),i&&r.push(o)}return r}var _r=function(e){function t(t){var a=e.call(this,t)||this;a.yearOptionButtonsRef={},a.handleOptionKeyDown=function(e,t){var n;switch(t.key){case"Enter":t.preventDefault(),a.onChange(e);break;case"Escape":t.preventDefault(),a.props.onCancel();break;case"ArrowUp":case"ArrowDown":t.preventDefault();var r=e+("ArrowUp"===t.key?1:-1);a.yearOptionButtonsRef[r]&&(null===(n=a.yearOptionButtonsRef[r])||void 0===n||n.focus())}},a.renderOptions=function(){a.yearOptionButtonsRef={};var e=a.props.year,t=a.state.yearsList.map(function(t){return u.createElement("div",{ref:function(n){a.yearOptionButtonsRef[t]=n,t===e&&(null==n||n.focus())},role:"button",tabIndex:0,className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:a.onChange.bind(a,t),onKeyDown:a.handleOptionKeyDown.bind(a,t),"aria-selected":e===t?"true":void 0},e===t?u.createElement("span",{className:"react-datepicker__year-option--selected"},"âœ“"):"",t)}),n=a.props.minDate?_(a.props.minDate):null,r=a.props.maxDate?_(a.props.maxDate):null;return r&&a.state.yearsList.find(function(e){return e===r})||t.unshift(u.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:a.incrementYears},u.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&a.state.yearsList.find(function(e){return e===n})||t.push(u.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:a.decrementYears},u.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t},a.onChange=function(e){a.props.onChange(e)},a.handleClickOutside=function(){a.props.onCancel()},a.shiftYears=function(e){var t=a.state.yearsList.map(function(t){return t+e});a.setState({yearsList:t})},a.incrementYears=function(){return a.shiftYears(1)},a.decrementYears=function(){return a.shiftYears(-1)};var n=t.yearDropdownItemNumber,r=t.scrollableYearDropdown,s=n||(r?10:5);return a.state={yearsList:wr(a.props.year,s,a.props.minDate,a.props.maxDate)},a.dropdownRef=d.createRef(),a}return Ja(t,e),t.prototype.componentDidMount=function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,a=t?t.find(function(e){return e.ariaSelected}):null;e.scrollTop=a&&a instanceof HTMLElement?a.offsetTop+(a.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}},t.prototype.render=function(){var e=x({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return u.createElement(nn,{className:e,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(d.Component),kr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dropdownVisible:!1},t.renderSelectOptions=function(){for(var e=t.props.minDate?_(t.props.minDate):1900,a=t.props.maxDate?_(t.props.maxDate):2100,n=[],r=e;r<=a;r++)n.push(u.createElement("option",{key:r,value:r},r));return n},t.onSelectChange=function(e){t.onChange(parseInt(e.target.value))},t.renderSelectMode=function(){return u.createElement("select",{value:t.props.year,className:"react-datepicker__year-select",onChange:t.onSelectChange},t.renderSelectOptions())},t.renderReadView=function(e){return u.createElement("button",{key:"read",type:"button",style:{visibility:e?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:t.toggleDropdown},u.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),u.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},t.props.year))},t.renderDropdown=function(){return u.createElement(_r,Xa({key:"dropdown"},t.props,{onChange:t.onChange,onCancel:t.toggleDropdown}))},t.renderScrollMode=function(){var e=t.state.dropdownVisible,a=[t.renderReadView(!e)];return e&&a.unshift(t.renderDropdown()),a},t.onChange=function(e){t.toggleDropdown(),e!==t.props.year&&t.props.onChange(e)},t.toggleDropdown=function(e){t.setState({dropdownVisible:!t.state.dropdownVisible},function(){t.props.adjustDateOnChange&&t.handleYearChange(t.props.date,e)})},t.handleYearChange=function(e,a){var n;null===(n=t.onSelect)||void 0===n||n.call(t,e,a),t.setOpen()},t.onSelect=function(e,a){var n,r;null===(r=(n=t.props).onSelect)||void 0===r||r.call(n,e,a)},t.setOpen=function(){var e,a;null===(a=(e=t.props).setOpen)||void 0===a||a.call(e,!0)},t}return Ja(t,e),t.prototype.render=function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return u.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)},t}(d.Component),Dr=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Nr="react-datepicker-ignore-onclickoutside",Cr=function(e){function t(a){var n=e.call(this,a)||this;return n.monthContainer=void 0,n.handleClickOutside=function(e){n.props.onClickOutside(e)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(e){var t,a,r,s;r=e.target,s=(r.className||"").split(/\s+/),Dr.some(function(e){return s.indexOf(e)>=0})&&(null===(a=(t=n.props).onDropdownFocus)||void 0===a||a.call(t,e))},n.getDateInView=function(){var e=n.props,t=e.preSelection,a=e.selected,r=e.openToDate,s=Kn(n.props),o=Vn(n.props),i=sn();return r||a||t||(s&&v(i,s)?s:o&&b(i,o)?o:i)},n.increaseMonth=function(){n.setState(function(e){var t=e.date;return{date:K(t,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(e){var t=e.date;return{date:V(t,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(e,t,a){n.props.onSelect(e,t,a),n.props.setPreSelection&&n.props.setPreSelection(e)},n.handleDayMouseEnter=function(e){n.setState({selectingDate:e}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(e,t){n.setState({selectingDate:Q(sn(),t)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(e,t)},n.handleYearMouseLeave=function(e,t){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(e,t)},n.handleYearChange=function(e){var t,a,r,s;null===(a=(t=n.props).onYearChange)||void 0===a||a.call(t,e),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(e),null===(s=(r=n.props).setOpen)||void 0===s||s.call(r,!0)),n.props.setPreSelection&&n.props.setPreSelection(e)},n.getEnabledPreSelectionDateForMonth=function(e){if(!jn(e,n.props))return e;for(var t=hn(e),a=function(e){return B(e)}(e),r=q(a,t),s=null,o=0;o<=r;o++){var i=G(t,o);if(!jn(i,n.props)){s=i;break}}return s},n.handleMonthChange=function(e){var t,a,r,s=null!==(t=n.getEnabledPreSelectionDateForMonth(e))&&void 0!==t?t:e;n.handleCustomMonthChange(s),n.props.adjustDateOnChange&&(n.props.onSelect(s),null===(r=(a=n.props).setOpen)||void 0===r||r.call(a,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleCustomMonthChange=function(e){var t,a;null===(a=(t=n.props).onMonthChange)||void 0===a||a.call(t,e),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(e){n.handleYearChange(e),n.handleMonthChange(e)},n.changeYear=function(e){n.setState(function(t){var a=t.date;return{date:Q(a,Number(e))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(e){n.setState(function(t){var a=t.date;return{date:J(a,Number(e))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(e){n.setState(function(t){var a=t.date;return{date:Q(J(a,C(e)),_(e))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(e){void 0===e&&(e=n.state.date);var t=mn(e,n.props.locale,n.props.calendarStartDay),a=[];return n.props.showWeekNumbers&&a.push(u.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},u.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),u.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),a.concat([0,1,2,3,4,5,6].map(function(e){var a=G(t,e),r=n.formatWeekday(a,n.props.locale),s=n.props.weekDayClassName?n.props.weekDayClassName(a):void 0;return u.createElement("div",{key:e,role:"columnheader",className:x("react-datepicker__day-name",s)},u.createElement("span",{className:"react-datepicker__sr-only"},cn(a,"EEEE",n.props.locale)),u.createElement("span",{"aria-hidden":"true"},r))}))},n.formatWeekday=function(e,t){return n.props.formatWeekDay?function(e,t,a){return t(cn(e,"EEEE",a))}(e,n.props.formatWeekDay,t):n.props.useWeekdaysShort?function(e,t){return cn(e,"EEE",t)}(e,t):function(e,t){return cn(e,"EEEEEE",t)}(e,t)},n.decreaseYear=function(){n.setState(function(e){var a,r=e.date;return{date:X(r,n.props.showYearPicker?null!==(a=n.props.yearItemNumber)&&void 0!==a?a:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var e,a,r;if(!n.props.renderCustomHeader){var s,o=null!==(e=n.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,i=n.props.showPreviousMonths?o-1:0,l=null!==(a=n.props.monthSelectedIn)&&void 0!==a?a:i,c=V(n.state.date,l);switch(!0){case n.props.showMonthYearPicker:s=Hn(n.state.date,n.props);break;case n.props.showYearPicker:s=function(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.yearItemNumber,s=void 0===r?12:r,o=Xn(fn(X(e,s)),s).endPeriod,i=n&&_(n);return i&&i>o||!1}(n.state.date,n.props);break;case n.props.showQuarterYearPicker:s=function(e,t){var a=void 0===t?{}:t,n=a.minDate,r=a.includeDates,s=$(e),o=le(s);return n&&ce(n,o)>0||r&&r.every(function(e){return ce(e,o)>0})||!1}(n.state.date,n.props);break;default:s=Wn(c,n.props)}if(((null!==(r=n.props.forceShowMonthNavigation)&&void 0!==r?r:t.defaultProps.forceShowMonthNavigation)||n.props.showDisabledMonthNavigation||!s)&&!n.props.showTimeSelectOnly){var d=["react-datepicker__navigation","react-datepicker__navigation--previous"],p=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(p=n.decreaseYear),s&&n.props.showDisabledMonthNavigation&&(d.push("react-datepicker__navigation--previous--disabled"),p=void 0);var m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,h=n.props,f=h.previousMonthButtonLabel,g=void 0===f?t.defaultProps.previousMonthButtonLabel:f,y=h.previousYearButtonLabel,x=void 0===y?t.defaultProps.previousYearButtonLabel:y,v=n.props,b=v.previousMonthAriaLabel,w=void 0===b?"string"==typeof g?g:"Previous Month":b,k=v.previousYearAriaLabel,D=void 0===k?"string"==typeof x?x:"Previous Year":k;return u.createElement("button",{type:"button",className:d.join(" "),onClick:p,onKeyDown:n.props.handleOnKeyDown,"aria-label":m?D:w},u.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},m?x:g))}}},n.increaseYear=function(){n.setState(function(e){var a,r=e.date;return{date:Z(r,n.props.showYearPicker?null!==(a=n.props.yearItemNumber)&&void 0!==a?a:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var e;if(!n.props.renderCustomHeader){var a;switch(!0){case n.props.showMonthYearPicker:a=zn(n.state.date,n.props);break;case n.props.showYearPicker:a=function(e,t){var a=void 0===t?{}:t,n=a.maxDate,r=a.yearItemNumber,s=void 0===r?12:r,o=Xn(Z(e,s),s).startPeriod,i=n&&_(n);return i&&i<o||!1}(n.state.date,n.props);break;case n.props.showQuarterYearPicker:a=function(e,t){var a=void 0===t?{}:t,n=a.maxDate,r=a.includeDates,s=F(e),o=ue(s,1);return n&&ce(o,n)>0||r&&r.every(function(e){return ce(o,e)>0})||!1}(n.state.date,n.props);break;default:a=Un(n.state.date,n.props)}if(((null!==(e=n.props.forceShowMonthNavigation)&&void 0!==e?e:t.defaultProps.forceShowMonthNavigation)||n.props.showDisabledMonthNavigation||!a)&&!n.props.showTimeSelectOnly){var r=["react-datepicker__navigation","react-datepicker__navigation--next"];n.props.showTimeSelect&&r.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&r.push("react-datepicker__navigation--next--with-today-button");var s=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(s=n.increaseYear),a&&n.props.showDisabledMonthNavigation&&(r.push("react-datepicker__navigation--next--disabled"),s=void 0);var o=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,i=n.props,l=i.nextMonthButtonLabel,c=void 0===l?t.defaultProps.nextMonthButtonLabel:l,d=i.nextYearButtonLabel,p=void 0===d?t.defaultProps.nextYearButtonLabel:d,m=n.props,h=m.nextMonthAriaLabel,f=void 0===h?"string"==typeof c?c:"Next Month":h,g=m.nextYearAriaLabel,y=void 0===g?"string"==typeof p?p:"Next Year":g;return u.createElement("button",{type:"button",className:r.join(" "),onClick:s,onKeyDown:n.props.handleOnKeyDown,"aria-label":o?y:f},u.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},o?p:c))}}},n.renderCurrentMonth=function(e){void 0===e&&(e=n.state.date);var t=["react-datepicker__current-month"];return n.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),u.createElement("h2",{className:t.join(" ")},cn(e,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(e){if(void 0===e&&(e=!1),n.props.showYearDropdown&&!e)return u.createElement(kr,Xa({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:_(n.state.date)}))},n.renderMonthDropdown=function(e){if(void 0===e&&(e=!1),n.props.showMonthDropdown&&!e)return u.createElement(fr,Xa({},t.defaultProps,n.props,{month:C(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(e){if(void 0===e&&(e=!1),n.props.showMonthYearDropdown&&!e)return u.createElement(xr,Xa({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(e){n.props.onSelect(yn(),e),n.props.setPreSelection&&n.props.setPreSelection(yn())},n.renderTodayButton=function(){if(n.props.todayButton&&!n.props.showTimeSelectOnly)return u.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(e){return u.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(e))},n.renderDefaultHeader=function(e){var t=e.monthDate,a=e.i;return u.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(t),u.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(0!==a),n.renderMonthYearDropdown(0!==a),n.renderYearDropdown(0!==a)))},n.renderCustomHeader=function(e){var t,a,r=e.monthDate,s=e.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var o,i=n.props,l=i.showYearPicker,c=i.yearItemNumber;if(l){var d=Xn(r,c);o={startYear:d.startPeriod,endYear:d.endPeriod}}var p=Wn(n.state.date,n.props),m=Un(n.state.date,n.props),h=Hn(n.state.date,n.props),f=zn(n.state.date,n.props);return u.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},null===(a=(t=n.props).renderCustomHeader)||void 0===a?void 0:a.call(t,Xa(Xa(Xa({},n.state),l&&{visibleYearsRange:o}),{customHeaderCount:s,monthDate:r,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:p,nextMonthButtonDisabled:m,prevYearButtonDisabled:h,nextYearButtonDisabled:f})))},n.renderYearHeader=function(e){var a=e.monthDate,r=n.props,s=r.showYearPicker,o=r.yearItemNumber,i=Xn(a,void 0===o?t.defaultProps.yearItemNumber:o),l=i.startPeriod,c=i.endPeriod;return u.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},s?"".concat(l," - ").concat(c):_(a))},n.renderHeader=function(e){var t=e.monthDate,a=e.i,r={monthDate:t,i:void 0===a?0:a};switch(!0){case void 0!==n.props.renderCustomHeader:return n.renderCustomHeader(r);case n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker:return n.renderYearHeader(r);default:return n.renderDefaultHeader(r)}},n.renderMonths=function(){var e,a;if(!n.props.showTimeSelectOnly&&!n.props.showYearPicker){for(var r=[],s=null!==(e=n.props.monthsShown)&&void 0!==e?e:t.defaultProps.monthsShown,o=n.props.showPreviousMonths?s-1:0,i=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Z(n.state.date,o):V(n.state.date,o),l=null!==(a=n.props.monthSelectedIn)&&void 0!==a?a:o,c=0;c<s;++c){var d=c-l+o,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Z(i,d):K(i,d),m="month-".concat(c),h=c<s-1,f=c>0;r.push(u.createElement("div",{key:m,ref:function(e){n.monthContainer=null!=e?e:void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:c}),u.createElement(mr,Xa({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:c,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:h,monthShowsDuplicateDaysStart:f,dayNamesHeader:n.renderDayNamesHeader(p)}))))}return r}},n.renderYears=function(){if(!n.props.showTimeSelectOnly)return n.props.showYearPicker?u.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),u.createElement(br,Xa({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave}))):void 0},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return u.createElement(vr,Xa({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var e=n.props.selected?new Date(n.props.selected):void 0,a=e&&ln(e)&&Boolean(n.props.selected)?"".concat(Jn(e.getHours()),":").concat(Jn(e.getMinutes())):"";if(n.props.showTimeInput)return u.createElement(rr,Xa({},t.defaultProps,n.props,{date:e,timeString:a,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var e,a,r=Xn(n.state.date,null!==(e=n.props.yearItemNumber)&&void 0!==e?e:t.defaultProps.yearItemNumber),s=r.startPeriod,o=r.endPeriod;return a=n.props.showYearPicker?"".concat(s," - ").concat(o):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?_(n.state.date):"".concat(Sn(C(n.state.date),n.props.locale)," ").concat(_(n.state.date)),u.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&a)},n.renderChildren=function(){if(n.props.children)return u.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=d.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Ja(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:Nr,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:12}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.props.showTimeSelect&&(this.assignMonthContainer=void this.setState({monthContainer:this.monthContainer}))},t.prototype.componentDidUpdate=function(e){var t=this;if(!this.props.preSelection||_n(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!_n(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var a=!bn(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return a&&t.handleCustomMonthChange(t.state.date)})}},t.prototype.render=function(){var e=this.props.container||an;return u.createElement(nn,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},u.createElement("div",{style:{display:"contents"},ref:this.containerRef},u.createElement(e,{className:x("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(d.Component),Sr=function(e){var t=e.icon,a=e.className,n=void 0===a?"":a,r=e.onClick,s="react-datepicker__calendar-icon";if("string"==typeof t)return u.createElement("i",{className:"".concat(s," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:r});if(u.isValidElement(t)){var o=t;return u.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(s," ").concat(n),onClick:function(e){"function"==typeof o.props.onClick&&o.props.onClick(e),"function"==typeof r&&r(e)}})}return u.createElement("svg",{className:"".concat(s," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},u.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Tr=function(e){function t(t){var a=e.call(this,t)||this;return a.portalRoot=null,a.el=document.createElement("div"),a}return Ja(t,e),t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return h.createPortal(this.props.children,this.el)},t}(d.Component),jr=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&-1!==e.tabIndex},Er=function(e){function t(t){var a=e.call(this,t)||this;return a.getTabChildren=function(){var e;return Array.prototype.slice.call(null===(e=a.tabLoopRef.current)||void 0===e?void 0:e.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(jr)},a.handleFocusStart=function(){var e=a.getTabChildren();e&&e.length>1&&e[e.length-1].focus()},a.handleFocusEnd=function(){var e=a.getTabChildren();e&&e.length>1&&e[0].focus()},a.tabLoopRef=d.createRef(),a}return Ja(t,e),t.prototype.render=function(){var e;return(null!==(e=this.props.enableTabLoop)&&void 0!==e?e:t.defaultProps.enableTabLoop)?u.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},u.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,u.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(d.Component),Mr=function(e){function t(t){var a,n,r="boolean"!=typeof t.hidePopper||t.hidePopper,s=d.useRef(null),o=qa(Xa({open:!r,whileElementsMounted:ja,placement:t.popperPlacement,middleware:Za([(n={padding:15},{...Ma(n),options:[n,undefined]}),$a(10),Ba({element:s})],null!==(a=t.popperModifiers)&&void 0!==a?a:[],!0)},t.popperProps)),i=Xa(Xa({},t),{hidePopper:r,popperProps:Xa(Xa({},o),{arrowRef:s})});return u.createElement(e,Xa({},i))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}(function(e){var t=e.className,a=e.wrapperClassName,n=e.hidePopper,r=void 0===n||n,s=e.popperComponent,o=e.targetComponent,i=e.enableTabLoop,l=e.popperOnKeyDown,c=e.portalId,p=e.portalHost,m=e.popperProps,h=e.showArrow,f=void 0;if(!r){var g=x("react-datepicker-popper",t);f=u.createElement(Er,{enableTabLoop:i},u.createElement("div",{ref:m.refs.setFloating,style:m.floatingStyles,className:g,"data-placement":m.placement,onKeyDown:l},s,h&&u.createElement(Ka,{ref:m.arrowRef,context:m.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(f=d.createElement(e.popperContainer,{},f)),c&&!r&&(f=u.createElement(Tr,{portalId:c,portalHost:p},f));var y=x("react-datepicker-wrapper",a);return u.createElement(u.Fragment,null,u.createElement("div",{ref:m.refs.setReference,className:y},o),f)}),Lr="Date input not valid.",Pr=function(e){function t(a){var n=e.call(this,a)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:sn()},n.modifyHolidays=function(){var e;return null===(e=n.props.holidays)||void 0===e?void 0:e.reduce(function(e,t){var a=new Date(t.date);return ln(a)?Za(Za([],e,!0),[Xa(Xa({},t),{date:a})],!1):e},[])},n.calcInitialState=function(){var e,t=n.getPreSelection(),a=Kn(n.props),r=Vn(n.props),s=a&&v(t,pn(a))?a:r&&b(t,xn(r))?r:t;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:null!==(e=n.props.selectsRange?n.props.startDate:n.props.selected)&&void 0!==e?e:s,highlightDates:Qn(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var e,a=n.props,r=a.locale,s=a.startDate,o=a.endDate,i=a.rangeSeparator,l=a.selected,c=a.selectedDates,d=a.selectsMultiple,u=a.selectsRange,p=a.value,m=null!==(e=n.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,h=n.state.inputValue;return"string"==typeof p?p:"string"==typeof h?h:u?function(e,t,a){if(!e&&!t)return"";var n=e?dn(e,a):"",r=t?dn(t,a):"",s=a.rangeSeparator||" - ";return"".concat(n).concat(s).concat(r)}(s,o,{dateFormat:m,locale:r,rangeSeparator:i}):d?function(e,t){if(!(null==e?void 0:e.length))return"";var a=e[0]?dn(e[0],t):"";if(1===e.length)return a;if(2===e.length&&e[1]){var n=dn(e[1],t);return"".concat(a,", ").concat(n)}var r=e.length-1;return"".concat(a," (+").concat(r,")")}(null!=c?c:[],{dateFormat:m,locale:r}):dn(l,{dateFormat:m,locale:r})},n.resetHiddenStatus=function(){n.setState(Xa(Xa({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Xa(Xa({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){"hidden"===document.visibilityState&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var e,t;null===(t=null===(e=n.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e,{preventScroll:!0})},n.setBlur=function(){var e,t;null===(t=null===(e=n.input)||void 0===e?void 0:e.blur)||void 0===t||t.call(e),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(e,t){void 0===t&&(t=!1),n.setState({open:e,preSelection:e&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:Ar},function(){e||n.setState(function(e){return{focused:!!t&&e.focused}},function(){!t&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return w(n.state.preSelection)},n.isCalendarOpen=function(){return void 0===n.props.open?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(e){var t,a,r=n.state.wasHidden,s=!r||n.state.open;r&&n.resetHiddenStatus(),n.state.preventFocus||(null===(a=(t=n.props).onFocus)||void 0===a||a.call(t,e),!s||n.props.preventOpenOnFocus||n.props.readOnly||n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(Xa(Xa({},n.state),{inputValue:null}))},n.handleBlur=function(e){var t,a;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&(null===(a=(t=n.props).onBlur)||void 0===a||a.call(t,e)),n.resetInputValue(),n.state.open&&!1===n.props.open&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(e){var t,a;n.props.inline||n.setOpen(!1),null===(a=(t=n.props).onClickOutside)||void 0===a||a.call(t,e),n.props.withPortal&&e.preventDefault()},n.handleChange=function(){for(var e,a,r,s,o,i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var c=i[0];if(!n.props.onChangeRaw||(n.props.onChangeRaw.apply(n,i),c&&"function"==typeof c.isDefaultPrevented&&!c.isDefaultPrevented())){n.setState({inputValue:(null==c?void 0:c.target)instanceof HTMLInputElement?c.target.value:null,lastPreSelectChange:Ir});var d=n.props,u=d.selectsRange,p=d.startDate,m=d.endDate,h=null!==(e=n.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,f=null!==(a=n.props.strictParsing)&&void 0!==a?a:t.defaultProps.strictParsing,g=(null==c?void 0:c.target)instanceof HTMLInputElement?c.target.value:"";if(u){var y=n.props.rangeSeparator,x=y.trim(),v=g.split(h.includes(x)?y:x,2).map(function(e){return e.trim()}),b=v[0],w=v[1],_=on(null!=b?b:"",h,n.props.locale,f),k=_?on(null!=w?w:"",h,n.props.locale,f):null,D=(null==p?void 0:p.getTime())!==(null==_?void 0:_.getTime()),N=(null==m?void 0:m.getTime())!==(null==k?void 0:k.getTime());if(!D&&!N)return;if(_&&jn(_,n.props))return;if(k&&jn(k,n.props))return;null===(s=(r=n.props).onChange)||void 0===s||s.call(r,[_,k],c)}else{var C=on(g,h,n.props.locale,f,null!==(o=n.props.selected)&&void 0!==o?o:void 0);!C&&g||n.setSelected(C,c,!0)}}},n.handleSelect=function(e,t,a){if(!n.props.readOnly){var r=n.props,s=r.selectsRange,o=r.startDate,i=r.endDate,l=r.swapRange,c=!s||o&&!i&&(l||!tr(e,o));n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&c&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(t),n.setSelected(e,t,!1,a),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(e):c&&n.setOpen(!1)}},n.setSelected=function(e,t,a,r){var s,o,i=e;if(n.props.showYearPicker){if(null!==i&&Rn(_(i),n.props))return}else if(n.props.showMonthYearPicker){if(null!==i&&Mn(i,n.props))return}else if(null!==i&&jn(i,n.props))return;var l=n.props,c=l.onChange,d=l.selectsRange,u=l.startDate,p=l.endDate,m=l.selectsMultiple,h=l.selectedDates,f=l.minTime,g=l.swapRange;if(!kn(n.props.selected,i)||n.props.allowSameDay||d||m)if(null!==i&&(!n.props.selected||a&&(n.props.showTimeSelect||n.props.showTimeSelectOnly||n.props.showTimeInput)||(i=un(i,{hour:N(n.props.selected),minute:D(n.props.selected),second:k(n.props.selected)})),a||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly||f&&(i=un(i,{hour:f.getHours(),minute:f.getMinutes(),second:f.getSeconds()})),n.props.inline||n.setState({preSelection:i}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:r})),d){var y=!u&&!!p,x=u&&p;u||p?u&&!p?null===i?null==c||c([null,null],t):tr(i,u)?g?null==c||c([i,u],t):null==c||c([i,null],t):null==c||c([u,i],t):y&&(i&&tr(i,p)?null==c||c([i,p],t):null==c||c([i,null],t)):null==c||c([i,null],t),x&&(null==c||c([i,null],t))}else if(m){if(null!==i)if(null==h?void 0:h.length)if(h.some(function(e){return _n(e,i)})){var v=h.filter(function(e){return!_n(e,i)});null==c||c(v,t)}else null==c||c(Za(Za([],h,!0),[i],!1),t);else null==c||c([i],t)}else null==c||c(i,t);a||(null===(o=(s=n.props).onSelect)||void 0===o||o.call(s,i,t),n.setState({inputValue:null}))},n.setPreSelection=function(e){if(!n.props.readOnly){var t=w(n.props.minDate),a=w(n.props.maxDate),r=!0;if(e){var s=pn(e);if(t&&a)r=Dn(e,n.props.minDate,n.props.maxDate);else if(t){var o=pn(n.props.minDate);r=b(e,o)||kn(s,o)}else if(a){var i=xn(n.props.maxDate);r=v(e,i)||kn(s,i)}}r&&n.setState({preSelection:e})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(e){var t,a;if(!n.props.selectsRange&&!n.props.selectsMultiple){var r=n.props.selected?n.props.selected:n.getPreSelection(),s=n.props.selected?e:un(r,{hour:N(e),minute:D(e)});n.setState({preSelection:s}),null===(a=(t=n.props).onChange)||void 0===a||a.call(t,s),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var e,t;n.props.disabled||n.props.readOnly||n.setOpen(!0),null===(t=(e=n.props).onInputClick)||void 0===t||t.call(e)},n.onInputKeyDown=function(e){var t,a,r,s,o,i;null===(a=(t=n.props).onKeyDown)||void 0===a||a.call(t,e);var l=e.key;if(n.state.open||n.props.inline||n.props.preventOpenOnFocus){if(n.state.open){if(l===en.ArrowDown||l===en.ArrowUp){e.preventDefault();var c=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',d=(null===(s=n.calendar)||void 0===s?void 0:s.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(c);return void(d instanceof HTMLElement&&d.focus({preventScroll:!0}))}var u=sn(n.state.preSelection);l===en.Enter?(e.preventDefault(),e.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===Ar?(n.handleSelect(u,e),!n.props.shouldCloseOnSelect&&n.setPreSelection(u)):n.setOpen(!1)):l===en.Escape?(e.preventDefault(),e.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):l===en.Tab&&n.setOpen(!1),n.inputOk()||null===(i=(o=n.props).onInputError)||void 0===i||i.call(o,{code:1,msg:Lr})}}else l!==en.ArrowDown&&l!==en.ArrowUp&&l!==en.Enter||null===(r=n.onInputClick)||void 0===r||r.call(n)},n.onPortalKeyDown=function(e){e.key===en.Escape&&(e.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(e){var t,a,r,s,o,i,l=n.props,c=l.minDate,d=l.maxDate,u=l.disabledKeyboardNavigation,p=l.showWeekPicker,m=l.shouldCloseOnSelect,h=l.locale,f=l.calendarStartDay,g=l.adjustDateOnChange,y=l.inline;if(null===(a=(t=n.props).onKeyDown)||void 0===a||a.call(t,e),!u){var x=e.key,v=e.shiftKey,b=sn(n.state.preSelection),w=function(e,t){var a=t;switch(e){case en.ArrowRight:a=p?ne(t,1):G(t,1);break;case en.ArrowLeft:a=p?re(t):se(t);break;case en.ArrowUp:a=re(t);break;case en.ArrowDown:a=ne(t,1);break;case en.PageUp:a=v?X(t,1):V(t,1);break;case en.PageDown:a=v?Z(t,1):K(t,1);break;case en.Home:a=mn(t,h,f);break;case en.End:a=function(e){return ge(e)}(t)}return a};if(x===en.Enter)return e.preventDefault(),n.handleSelect(b,e),void(!m&&n.setPreSelection(b));if(x===en.Escape)return e.preventDefault(),n.setOpen(!1),void(n.inputOk()||null===(s=(r=n.props).onInputError)||void 0===s||s.call(r,{code:1,msg:Lr}));var k=null;switch(x){case en.ArrowLeft:case en.ArrowRight:case en.ArrowUp:case en.ArrowDown:case en.PageUp:case en.PageDown:case en.Home:case en.End:k=function(e,t){for(var a=e,r=!1,s=0,o=w(e,t);!r;){if(s>=40){o=t;break}c&&o<c&&(a=en.ArrowRight,o=jn(c,n.props)?w(a,o):c),d&&o>d&&(a=en.ArrowLeft,o=jn(d,n.props)?w(a,o):d),jn(o,n.props)?(a!==en.PageUp&&a!==en.Home||(a=en.ArrowRight),a!==en.PageDown&&a!==en.End||(a=en.ArrowLeft),o=w(a,o)):r=!0,s++}return o}(x,b)}if(k){if(e.preventDefault(),n.setState({lastPreSelectChange:Ar}),g&&n.setSelected(k),n.setPreSelection(k),y){var D=C(b),N=C(k),S=_(b),T=_(k);D!==N||S!==T?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}else null===(i=(o=n.props).onInputError)||void 0===i||i.call(o,{code:1,msg:Lr})}},n.onPopperKeyDown=function(e){e.key===en.Escape&&(e.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(e){e&&e.preventDefault&&e.preventDefault(),n.sendFocusBackToInput();var t=n.props,a=t.selectsRange,r=t.onChange;a?null==r||r([null,null],e):null==r||r(null,e),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(e){"boolean"==typeof n.props.closeOnScroll&&n.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||n.setOpen(!1):"function"==typeof n.props.closeOnScroll&&n.props.closeOnScroll(e)&&n.setOpen(!1)},n.renderCalendar=function(){var e,a;return n.props.inline||n.isCalendarOpen()?u.createElement(Cr,Xa({showMonthYearDropdown:void 0,ref:function(e){n.calendar=e}},n.props,n.state,{setOpen:n.setOpen,dateFormat:null!==(e=n.props.dateFormatCalendar)&&void 0!==e?e:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:qn(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:null!==(a=n.props.dropdownMode)&&void 0!==a?a:t.defaultProps.dropdownMode}),n.props.children):null},n.renderAriaLiveRegion=function(){var e,a,r=n.props.locale,s=null!==(e=n.props.dateFormat)&&void 0!==e?e:t.defaultProps.dateFormat,o=n.props.showTimeInput||n.props.showTimeSelect?"PPPPp":"PPPP";return a=n.props.selectsRange?"Selected start date: ".concat(dn(n.props.startDate,{dateFormat:o,locale:r}),". ").concat(n.props.endDate?"End date: "+dn(n.props.endDate,{dateFormat:o,locale:r}):""):n.props.showTimeSelectOnly?"Selected time: ".concat(dn(n.props.selected,{dateFormat:s,locale:r})):n.props.showYearPicker?"Selected year: ".concat(dn(n.props.selected,{dateFormat:"yyyy",locale:r})):n.props.showMonthYearPicker?"Selected month: ".concat(dn(n.props.selected,{dateFormat:"MMMM yyyy",locale:r})):n.props.showQuarterYearPicker?"Selected quarter: ".concat(dn(n.props.selected,{dateFormat:"yyyy, QQQ",locale:r})):"Selected date: ".concat(dn(n.props.selected,{dateFormat:o,locale:r})),u.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},a)},n.renderDateInput=function(){var e,a,r=x(n.props.className,((e={})[n.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=n.state.open,e)),s=n.props.customInput||u.createElement("input",{type:"text"}),o=n.props.customInputRef||"ref";return d.cloneElement(s,((a={})[o]=function(e){n.input=e},a.value=n.getInputValue(),a.onBlur=n.handleBlur,a.onChange=n.handleChange,a.onClick=n.onInputClick,a.onFocus=n.handleFocus,a.onKeyDown=n.onInputKeyDown,a.id=n.props.id,a.name=n.props.name,a.form=n.props.form,a.autoFocus=n.props.autoFocus,a.placeholder=n.props.placeholderText,a.disabled=n.props.disabled,a.autoComplete=n.props.autoComplete,a.className=x(s.props.className,r),a.title=n.props.title,a.readOnly=n.props.readOnly,a.required=n.props.required,a.tabIndex=n.props.tabIndex,a["aria-describedby"]=n.props.ariaDescribedBy,a["aria-invalid"]=n.props.ariaInvalid,a["aria-labelledby"]=n.props.ariaLabelledBy,a["aria-required"]=n.props.ariaRequired,a))},n.renderClearButton=function(){var e=n.props,t=e.isClearable,a=e.disabled,r=e.selected,s=e.startDate,o=e.endDate,i=e.clearButtonTitle,l=e.clearButtonClassName,c=void 0===l?"":l,d=e.ariaLabelClose,p=void 0===d?"Close":d,m=e.selectedDates,h=e.readOnly;return!t||h||null==r&&null==s&&null==o&&!(null==m?void 0:m.length)?null:u.createElement("button",{type:"button",className:x("react-datepicker__close-icon",c,{"react-datepicker__close-icon--disabled":a}),disabled:a,"aria-label":p,onClick:n.onClearClick,title:i,tabIndex:-1})},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Ja(t,e),Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:Nr,readOnly:!1,rangeSeparator:" - ",withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(e,t){var a,n,r,s,o,i;e.inline&&(o=e.selected,i=this.props.selected,o&&i?C(o)!==C(i)||_(o)!==_(i):o!==i)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Qn(this.props.highlightDates)}),t.focused||kn(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&(null===(n=(a=this.props).onCalendarOpen)||void 0===n||n.call(a)),!0===t.open&&!1===this.state.open&&(null===(s=(r=this.props).onCalendarClose)||void 0===s||s.call(r)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var e=this.props,t=e.showIcon,a=e.icon,n=e.calendarIconClassname,r=e.calendarIconClassName,s=e.toggleCalendarOnIconClick,o=this.state.open;return u.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&u.createElement(Sr,Xa({icon:a,className:x(r,!r&&n,o&&"react-datepicker-ignore-onclickoutside")},s?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?u.createElement(Er,{enableTabLoop:this.props.enableTabLoop},u.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=u.createElement(Tr,Xa({portalId:this.props.portalId},this.props),t)),u.createElement("div",null,this.renderInputContainer(),t)}return u.createElement(Mr,Xa({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:e,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(d.Component),Ir="input",Ar="navigate";function Rr({initialTime:e,onSelectTime:t,onClose:a}){const[n,r]=d.useState(0),[s,o]=d.useState(0),[i,l]=d.useState(!0),[u,p]=d.useState("hour"),[m,h]=d.useState(!1),f=d.useRef(null),g=d.useRef({x:0,y:0}),y=d.useRef(0);d.useEffect(()=>{const[t,a]=e.split(" ");let[n,s]=t.split(":").map(Number);"PM"===a&&12!==n?n+=12:"AM"===a&&12===n&&(n=0),r(n),o(s),l("AM"===a)},[e]),d.useEffect(()=>{if(f.current){const e=f.current.getBoundingClientRect();g.current={x:e.left+e.width/2,y:e.top+e.height/2},y.current=e.width/2}const e=()=>{if(f.current){const e=f.current.getBoundingClientRect();g.current={x:e.left+e.width/2,y:e.top+e.height/2},y.current=e.width/2}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}},[u]);const x=d.useCallback(e=>{let t=e;i||12===e?i&&12===e&&(t=0):t=e+12,r(t),p("minute")},[i]),v=d.useCallback(e=>{o(e)},[]),b=d.useCallback(()=>{l(e=>{const t=!e;let a=n;return t&&n>=12?a=n-12:!t&&n<12&&(a=n+12),r(a),t})},[n]),w=d.useCallback(()=>{let e=n;i&&e>=12&&e<24?e-=12:!i&&e<12&&(e+=12);let r=e%12;0===r&&(r=12);const o=`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")} ${i?"AM":"PM"}`;t(o),a()},[n,s,i,t,a]),_=d.useCallback((e,t)=>{if(f.current){const e=f.current.getBoundingClientRect();g.current={x:e.left+e.width/2,y:e.top+e.height/2}}const a=e-g.current.x,n=t-g.current.y;let r=Math.atan2(n,a)*(180/Math.PI);return r=(r+90+360)%360,r},[]),k=d.useCallback(e=>{if(!m)return;e.preventDefault();const t=_(e.clientX,e.clientY);if("minute"===u){let e=Math.round(t/360*60);e=5*Math.round(e/5),e>=60&&(e=0),o(e)}else{let e=Math.round(t/360*12);0===e&&(e=12);let a=e;i||12===e?i&&12===e&&(a=0):a=e+12,r(a)}},[m,u,i,_]),D=d.useCallback(()=>{m&&(h(!1),window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",D),navigator.vibrate&&navigator.vibrate(10))},[m,k]),N=d.useCallback(e=>{if(!e.target.closest(".clock-number")&&0===e.button){if(e.preventDefault(),h(!0),f.current){const e=f.current.getBoundingClientRect();g.current={x:e.left+e.width/2,y:e.top+e.height/2}}window.addEventListener("mousemove",k,{passive:!1}),window.addEventListener("mouseup",D),k(e)}},[k,D]),C=d.useCallback(e=>{if(!m||!e.touches[0])return;e.preventDefault();const t=e.touches[0],a=_(t.clientX,t.clientY);if("minute"===u){let e=Math.round(a/360*60);e=5*Math.round(e/5),e>=60&&(e=0),o(e)}else{let e=Math.round(a/360*12);0===e&&(e=12);let t=e;i||12===e?i&&12===e&&(t=0):t=e+12,r(t)}},[m,u,i,_]),S=d.useCallback(()=>{m&&(h(!1),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",S),navigator.vibrate&&navigator.vibrate(10))},[m,C]),T=d.useCallback(e=>{if(!e.target.closest(".clock-number")){if(e.preventDefault(),h(!0),f.current){const e=f.current.getBoundingClientRect();g.current={x:e.left+e.width/2,y:e.top+e.height/2}}if(window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",S),e.touches[0]){const t={touches:[e.touches[0]]};C(t)}}},[C,S]),j=d.useCallback(e=>{let t=parseInt(e.target.value,10);if(isNaN(t)&&(t=0),"hour"===u){(t<1||t>12)&&(t=1);let e=t;i||12===t?i&&12===t?e=0:i||12!==t||(e=12):e=t+12,r(e)}},[i,u]),E=d.useCallback(e=>{let t=parseInt(e.target.value,10);isNaN(t)&&(t=0),t<0&&(t=0),t>59&&(t=59),o(t)},[]),M=d.useCallback(e=>{const t=e.target;t.value=t.value.padStart(2,"0")},[]),L=(e,t,a)=>"minute"===a?e/60*360:"hour"===a?(n%12!=0||i?n%12==0&&i?12:n%12:12)/12*360:0,P="minute"===u?L(s,0,"minute"):L(n,0,"hour");return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent bg-opacity-40",style:{backdropFilter:"blur(2px)"},children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl relative overflow-hidden w-80",children:[c.jsxs("div",{className:"bg-cyan-600 text-white p-6 flex flex-col items-center",children:[c.jsxs("div",{className:"text-5xl font-bold flex",children:[c.jsx("input",{type:"number",value:(e=>{let t=e%12;return 0===t&&(t=12),t.toString().padStart(2,"0")})(n),onChange:j,onBlur:M,min:"1",max:"12",className:"w-20 bg-transparent border-b-2 text-center focus:outline-none focus:border-white "+("hour"===u?"border-white":"border-transparent text-cyan-200"),onClick:()=>p("hour"),style:{caretColor:"transparent"}}),c.jsx("span",{children:":"}),c.jsx("input",{type:"number",value:(I=s,I.toString().padStart(2,"0")),onChange:E,onBlur:M,min:"0",max:"59",className:"w-20 bg-transparent border-b-2 text-center focus:outline-none focus:border-white "+("minute"===u?"border-white":"border-transparent text-cyan-200"),onClick:()=>p("minute"),style:{caretColor:"transparent"}})]}),c.jsxs("div",{className:"flex mt-2",children:[c.jsx("button",{className:"px-3 py-1 rounded-full text-sm font-semibold "+(i?"bg-white text-cyan-600":"text-cyan-200"),onClick:b,children:"AM"}),c.jsx("button",{className:"ml-2 px-3 py-1 rounded-full text-sm font-semibold "+(i?"text-cyan-200":"bg-white text-cyan-600"),onClick:b,children:"PM"})]})]}),c.jsxs("div",{ref:f,className:"relative w-64 h-64 mx-auto my-6 bg-gray-100 rounded-full flex items-center justify-center border-2 border-gray-200 select-none transition-all duration-200 "+(m?"border-cyan-400 shadow-lg bg-gray-50":"hover:border-gray-300 hover:shadow-md"),onMouseDown:N,onTouchStart:T,style:{cursor:m?"grabbing":"grab",userSelect:"none",touchAction:"none"},children:[c.jsx("div",{className:"absolute w-4 h-4 bg-cyan-600 rounded-full z-10 transition-all duration-200 "+(m?"w-5 h-5 bg-cyan-500 shadow-lg":"")}),c.jsx("div",{className:"absolute bg-cyan-600 transform origin-bottom transition-all duration-200 "+(m?"bg-cyan-500 shadow-lg":""),style:{width:m?"3px":"2px",height:"minute"===u?"80px":"60px",bottom:"50%",left:m?"calc(50% - 1.5px)":"calc(50% - 1px)",transform:`rotate(${P}deg)`,transformOrigin:"bottom",transition:m?"width 0.1s ease, left 0.1s ease, background-color 0.1s ease":"transform 0.3s ease-out, width 0.1s ease, left 0.1s ease, background-color 0.1s ease",borderRadius:"2px",boxShadow:m?"0 2px 8px rgba(6, 182, 212, 0.3)":"none"},children:c.jsx("div",{className:"absolute w-3 h-3 bg-cyan-600 rounded-full transform -translate-x-1/2 transition-all duration-200 "+(m?"w-4 h-4 bg-cyan-500":""),style:{top:"-6px",left:"50%",boxShadow:m?"0 2px 6px rgba(6, 182, 212, 0.4)":"none"}})}),!m&&c.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-xs text-gray-500 opacity-70 pointer-events-none",children:"Drag the needle or click numbers"}),(()=>{const e=[];if("minute"===u)for(let t=0;t<60;t+=5){const a=t/60*360-90,n=90,r=n*Math.cos(a*Math.PI/180),o=n*Math.sin(a*Math.PI/180),i=s===t;e.push(c.jsx("div",{className:"clock-number absolute flex items-center justify-center font-semibold text-lg cursor-pointer transition-colors duration-100 "+(i?"bg-cyan-500 text-white":"text-black"),style:{transform:`translate(${r}px, ${o}px) translate(-50%, -50%)`,left:"50%",top:"50%",width:"36px",height:"36px",borderRadius:"50%"},onClick:()=>v(t),children:t.toString().padStart(2,"0")},`min-${t}`))}else for(let t=1;t<=12;t++){const a=t/12*360-90,r=80,s=r*Math.cos(a*Math.PI/180),o=r*Math.sin(a*Math.PI/180),i=(0===n||12===n?12:n%12)===t;e.push(c.jsx("div",{className:"clock-number absolute flex items-center justify-center font-semibold text-lg cursor-pointer transition-colors duration-100 "+(i?"bg-cyan-500 text-white":"text-black"),style:{transform:`translate(${s}px, ${o}px) translate(-50%, -50%)`,left:"50%",top:"50%",width:"36px",height:"36px",borderRadius:"50%"},onClick:()=>x(t),children:t},`hour-${t}`))}return e})()]}),c.jsxs("div",{className:"p-4 flex justify-end gap-4 border-t border-gray-200",children:[c.jsx("button",{className:"px-4 py-2 text-cyan-600 font-bold rounded-lg hover:bg-gray-100 transition",onClick:a,children:"CANCEL"}),c.jsx("button",{className:"px-4 py-2 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-700 transition",onClick:w,children:"OK"})]}),c.jsx("button",{className:"absolute top-4 right-4 text-white hover:text-red-200 text-2xl font-bold",onClick:a,children:"Ã—"})]})});var I}const Or="/api";function Fr({onClose:e,onSelect:t,loanTypes:a,leads:n,loadingLoanTypes:r,loadingLeads:s,onFetchLeads:o}){const[i,l]=d.useState(""),[u,p]=d.useState(""),[m,h]=d.useState(""),[f,g]=d.useState([]),y=e=>{h(e)};d.useEffect(()=>{if(!u||!i)return;const e=setTimeout(()=>{const e=i.toLowerCase(),t=m.trim()?50:5;o(u,e,m,t)},300);return()=>clearTimeout(e)},[m,u,i]);const x=u&&n?n:[],v=e=>{p(e),h("");const t=i.toLowerCase();o(e,t,"",5)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent",children:c.jsxs("div",{className:"bg-transparent backdrop-blur-sm p-6 rounded-2xl shadow-2xl w-[90%] max-w-5xl mx-auto flex max-h-[90vh] overflow-hidden relative",children:[c.jsxs("div",{className:"w-1/4 border-r p-4 bg-white bg-opacity-80 rounded-l-2xl",children:[c.jsx("h3",{className:"font-bold mb-4 text-lg text-black",children:"Record Types"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{className:"w-full text-left px-4 py-3 rounded-xl font-medium transition "+("Leads"===i?"bg-cyan-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{l("Leads"),p(""),h("")},children:"Leads"}),"Leads"===i&&c.jsx("div",{className:"ml-4 space-y-2 mt-2 border-l-2 border-cyan-300 pl-3",children:r?c.jsx("div",{className:"text-gray-500 text-sm",children:"Loading loan types..."}):a.map(e=>c.jsxs("button",{className:"w-full text-left px-4 py-2 rounded-lg font-medium transition "+(u===e.name?"bg-cyan-100 text-cyan-800 shadow-sm":"bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:()=>v(e.name),children:[e.name," (",e.lead_count||0,")"]},e.id))}),c.jsx("button",{className:"w-full text-left px-4 py-3 rounded-xl font-medium transition "+("Login"===i?"bg-cyan-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{l("Login"),p(""),h("")},children:"Login"}),"Login"===i&&c.jsx("div",{className:"ml-4 space-y-2 mt-2 border-l-2 border-cyan-300 pl-3",children:r?c.jsx("div",{className:"text-gray-500 text-sm",children:"Loading loan types..."}):a.map(e=>c.jsxs("button",{className:"w-full text-left px-4 py-2 rounded-lg font-medium transition "+(u===e.name?"bg-cyan-100 text-cyan-800 shadow-sm":"bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:()=>v(e.name),children:[e.name," (",e.login_count||0,")"]},e.id))})]})]}),c.jsxs("div",{className:"w-3/4 p-6 overflow-y-auto bg-white bg-opacity-80 rounded-r-2xl",children:[u?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-xl text-black",children:u}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Select a ",i.toLowerCase().slice(0,-1)," to associate with this task"]})]}),c.jsxs("div",{className:"relative w-1/2",children:[c.jsx("input",{type:"text",placeholder:`Search ${u}`,className:"border px-4 py-2 rounded-xl w-full focus:outline-none focus:ring-2 focus:ring-cyan-500 text-black",value:m,onChange:e=>y(e.target.value)}),m&&c.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>y(""),type:"button",children:"Ã—"})]})]}),s?c.jsxs("div",{className:"text-center text-gray-500 mt-20",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),c.jsx("p",{children:"Loading leads..."})]}):x.length>0?c.jsx("ul",{className:"space-y-3",children:x.map(e=>{const t=(e=>{const t=e.lead_login||"Lead";return`${e.customer_name} - ${e.phone||e.email||"No contact"} (${e.status}) [${t}]`})(e),a=(n=e,f.some(e=>e.id===n.id));var n;return c.jsx("li",{className:"p-4 border rounded-xl cursor-pointer transition text-black "+(a?"bg-cyan-100 border-cyan-500 shadow":"hover:bg-gray-100"),onClick:()=>(e=>{const t={...e,name:e.customer_name||e.name,loan_type:u,loanType:u};g([t])})(e),children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-1",children:t}),a&&c.jsx("div",{className:"text-cyan-500",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})},e.id)})}):c.jsx("div",{className:"text-gray-500 text-center mt-20 text-lg",children:m?`No ${i.toLowerCase()} found matching "${m}"`:`No ${i.toLowerCase()} available`})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-lg font-medium",children:"Please select a record type"}),c.jsx("p",{className:"text-sm",children:"Select a record type from the left panel to view records"})]}),u&&c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsxs("button",{className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition",onClick:()=>t(f),disabled:0===f.length,children:["Select (",f.length>0?"1 lead selected":"No lead selected",")"]}),c.jsx("button",{className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition",onClick:e,children:"Cancel"})]})]}),c.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:e,children:"Ã—"})]})})}function $r({onClose:e,onSelect:t,users:a,loadingUsers:n}){const[r,s]=d.useState(""),[o,i]=d.useState([]);return d.useEffect(()=>{a&&a.length},[a]),d.useEffect(()=>{""===r.trim()?i(a):i(a.filter(e=>{const t=e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.name||"",a=r.toLowerCase();return t.toLowerCase().includes(a)||e.name&&e.name.toLowerCase().includes(a)||e.first_name&&e.first_name.toLowerCase().includes(a)||e.last_name&&e.last_name.toLowerCase().includes(a)||e.email&&e.email.toLowerCase().includes(a)||e.role&&e.role.toLowerCase().includes(a)||e.designation&&e.designation.toLowerCase().includes(a)}))},[r,a]),c.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-transparent",children:c.jsxs("div",{className:"bg-transparent backdrop-blur-sm p-6 rounded-2xl shadow-2xl w-[90%] max-w-2xl mx-auto relative",children:[c.jsxs("div",{className:"flex items-center mb-4 bg-white bg-opacity-90 p-3 rounded-t-xl",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),c.jsx("h3",{className:"font-bold text-lg text-black",children:"Assign Task"})]}),c.jsxs("div",{className:"mb-4 bg-white bg-opacity-90 p-3 rounded-md",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:"Assign to"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),c.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-cyan-400 rounded text-black font-bold",value:r,onChange:e=>s(e.target.value),placeholder:"Search or enter assignee name"}),r&&c.jsx("button",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",onClick:()=>s(""),type:"button",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 border rounded-lg bg-white bg-opacity-90",children:n?c.jsxs("div",{className:"p-6 text-center text-gray-500",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-500 mx-auto mb-2"}),c.jsx("p",{children:"Loading users..."})]}):o.length>0?o.map(a=>{const n=a.first_name&&a.last_name?`${a.first_name} ${a.last_name}`.trim():a.name,r=n.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return c.jsxs("div",{className:"p-3 border-b last:border-b-0 cursor-pointer text-black transition hover:bg-gray-100 flex items-center",onClick:()=>{return t({id:(n=a).id,user_id:n.id,name:n.name,first_name:n.first_name,last_name:n.last_name,designation:n.designation,email:n.email}),void e();var n},children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3 flex-shrink-0 text-sm font-medium",children:r}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium text-sm",children:n}),a.designation&&c.jsx("span",{className:"text-xs text-gray-600",children:a.designation})]})]},a.id)}):""!==r.trim()&&c.jsx("div",{className:"p-3 text-gray-500 text-center",children:"No matching assignees found."})}),c.jsxs("div",{className:"flex justify-end gap-4 mt-4 bg-white bg-opacity-90 p-3 rounded-b-xl",children:[c.jsx("button",{className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition",onClick:()=>{if(r){const e=a.find(e=>(e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.name||"").toLowerCase()===r.toLowerCase()||e.name&&e.name.toLowerCase()===r.toLowerCase()||e.first_name&&e.first_name.toLowerCase()===r.toLowerCase()||e.last_name&&e.last_name.toLowerCase()===r.toLowerCase());t(e?{user_id:e.id,name:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`.trim():e.name,first_name:e.first_name,last_name:e.last_name,designation:e.designation,email:e.email}:{user_id:null,name:r,designation:""})}s(""),e()},children:"Assign"}),c.jsx("button",{className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition",onClick:e,children:"Cancel"})]}),c.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:e,children:"Ã—"})]})})}const Br=Object.freeze(Object.defineProperty({__proto__:null,default:function({onClose:e,onSave:t,preselectedLead:a}){const[n,r]=d.useState([]),[s,o]=d.useState([]),[i,l]=d.useState([]),[u,p]=d.useState(!1),[m,h]=d.useState(!1),[x,v]=d.useState(!1),[b,w]=d.useState(!!a);d.useEffect(()=>{if(a&&a._id){const e={id:a._id,lead_id:a._id,name:a.full_name||`${a.first_name||""} ${a.last_name||""}`.trim()||"Customer",lead_number:a.lead_number||"",loan_type:a.loan_type||a.loanType||""};T(t=>({...t,associateWithRecords:[e]})),e.loan_type}},[a]);const _=()=>{try{const e=localStorage.getItem("userId");if(e)return e;const t=localStorage.getItem("user");if(t){const e=JSON.parse(t);return e.id||e._id||e.user_id}return null}catch(e){return null}},k=d.useCallback(async()=>{if(_()){p(!0);try{const e=await y.tasks.getUsersForAssignment();let t=[];e&&e.users&&Array.isArray(e.users)&&(t=e.users.map(e=>({id:e.user_id||e.id,name:e.name||`${e.first_name||""} ${e.last_name||""}`.trim(),first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",role:e.role||"",designation:e.role||e.designation||""})));const a=t.filter(e=>e.name);r(a)}catch(e){r([])}finally{p(!1)}}},[]),D=d.useCallback(async()=>{const e=_();if(e){h(!0);try{const t=await fetch(`${Or}/tasks/loan-types-with-leads?user_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();o(a.loan_types||[])}catch(t){o([])}finally{h(!1)}}},[]),N=d.useCallback(async(e,t="leads",a="",n=5)=>{const r=_();if(r&&e){v(!0);try{let s=`${Or}/tasks/leads-logins-by-type?loan_type=${encodeURIComponent(e)}&record_type=${encodeURIComponent(t)}&user_id=${r}&limit=${n}`;a&&a.trim()&&(s+=`&search=${encodeURIComponent(a.trim())}`);const o=await fetch(s);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const i=await o.json();l(i.leads||[])}catch(s){l([])}finally{v(!1)}}},[]);d.useEffect(()=>{k(),D()},[k,D]);const C=(()=>{try{const t=_(),a=localStorage.getItem("userName"),n=localStorage.getItem("userFirstName"),r=localStorage.getItem("userLastName");let s="Current User";if(a)s=a;else if(n&&r)s=`${n} ${r}`;else if(n)s=n;else{const t=localStorage.getItem("user");if(t)try{const e=JSON.parse(t);e.name?s=e.name:e.fullName?s=e.fullName:e.firstName&&e.lastName?s=`${e.firstName} ${e.lastName}`:e.firstName?s=e.firstName:e.username?s=e.username:e.email&&(s=e.email)}catch(e){}}return{user_id:t,name:s}}catch(t){return{user_id:null,name:"Current User"}}})(),[S,T]=d.useState({createdBy:C,subject:"",message:"",attachments:[],taskType:"",associateWithRecords:[],assignedTo:[],dueDateOption:"today",dueDate:g(new Date),dueTime:"08:00 AM",customDate:null,repeatOption:"none",repeatCustomDays:[]});d.useEffect(()=>{0===S.assignedTo.length&&S.createdBy&&S.createdBy.user_id&&T(e=>({...e,assignedTo:[e.createdBy]}))},[S.createdBy,S.assignedTo.length]);const[j,E]=d.useState(!0),[M,L]=d.useState(f(new Date)),[P,I]=d.useState(!1),[A,R]=d.useState(!1),[O,F]=d.useState(!1),[$,B]=d.useState(!1),[Y,W]=d.useState(!1),[U,H]=d.useState("below"),z=d.useRef(null),K=d.useRef(null);d.useEffect(()=>{if(A&&K.current){const e=K.current.getBoundingClientRect(),t=window.innerHeight-e.bottom,a=e.top;H(t<400&&a>t?"above":"below")}},[A]),d.useEffect(()=>{},[S.dueDate,S.dueTime,S.subject,S.assignedTo]),d.useEffect(()=>{z.current&&(z.current.style.height="auto",z.current.style.height=z.current.scrollHeight+"px")},[S.message]);const V=(e,t)=>{T(a=>({...a,[e]:t}))},Q=e=>{["type","assignTo","priority","deadline","leadId","taskType","repeatOption","repeatCustomDays","dueDateOption","customDate"].includes(e)||"string"!=typeof S[e]||T(t=>({...t,[e]:t[e].toUpperCase()}))},q=()=>g(new Date),G=()=>{const e=new Date;return e.setDate(e.getDate()+1),g(e)},J=d.useCallback(a=>{if(a.preventDefault(),!S.subject.trim())return void alert("Please enter a subject");if(!S.message.trim())return void alert("Please enter a message");if(!S.taskType)return void alert("Please select a task type");let n=S.dueDate;const r={subject:S.subject,task_details:S.message,task_type:S.taskType||"To-Do",status:"Pending",priority:"Medium",due_date:n,due_time:S.dueTime,is_urgent:"urgent"===S.dueDateOption||!1,created_by:S.createdBy?.user_id||_(),assigned_to:S.assignedTo?.map(e=>e.user_id||e)||[S.createdBy?.user_id||_()],notes:"",user_id:_()};if(S.repeatOption&&"none"!==S.repeatOption){r.is_recurring=!0;let e=S.repeatOption,t=1;"custom"===S.repeatOption&&S.repeatCustomDays&&S.repeatCustomDays.length>0?(e="weekly",r.recurring_config={pattern:"weekly",interval:1,weekdays:S.repeatCustomDays,start_date:n}):r.recurring_config={pattern:e,interval:t,start_date:n}}if(S.associateWithRecords&&S.associateWithRecords.length>0){const e=S.associateWithRecords[0];if(e&&(e.id||e._id||e.lead_id)){const t=e.id||e._id||e.lead_id;r.lead_id=t}if(e&&(e.loan_type||e.loanType)){const t=e.loan_type||e.loanType;r.loan_type=t}}t&&t({taskData:r,attachments:S.attachments||[]}),e&&e(),E(!1)},[S,t,e]);return j?c.jsxs("div",{className:"bg-transparent fixed inset-0 z-50 flex items-center justify-center",children:[c.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-3xl mx-auto space-y-6 max-h-[90vh] overflow-y-auto",children:[c.jsx("button",{className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold",onClick:()=>{E(!1),e&&e()},"aria-label":"Close",type:"button",children:"Ã—"}),c.jsxs("form",{onSubmit:J,children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Date & Time"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:M,readOnly:!0})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"createdBy",children:"Created By"}),c.jsx("input",{id:"createdBy",type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:S.createdBy?.name||"Current User",readOnly:!0})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"subject",children:"Subject"}),c.jsx("input",{id:"subject",type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold",value:S.subject,onChange:e=>V("subject",e.target.value),onBlur:()=>Q("subject"),placeholder:"Enter subject",required:!0})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"message",children:"Message"}),c.jsx("textarea",{ref:z,id:"message",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold resize-none overflow-hidden",rows:3,value:S.message,onChange:e=>V("message",e.target.value),onBlur:()=>Q("message"),placeholder:"Enter message",required:!0,style:{minHeight:"3rem",maxHeight:"400px",transition:"height 0.2s"}})]}),c.jsxs("div",{className:"flex flex-col items-start mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:"Attachments"}),c.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-cyan-500 text-white font-bold rounded-lg shadow cursor-pointer hover:bg-cyan-600 transition",children:["ðŸ“Ž Photo/PDF",c.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:e=>{const t=Array.from(e.target.files);if(t.length>0){const a=["image/jpeg","image/png","image/gif","application/pdf"],n=10485760,r=[],s=[];if(t.forEach(e=>{a.includes(e.type)?e.size>n?s.push({file:e,reason:"File size exceeds 10MB limit."}):r.push(e):s.push({file:e,reason:"Invalid file type. Only JPEG, PNG, GIF images and PDF files are allowed."})}),s.length>0){const e=s.map(({file:e,reason:t})=>`${e.name}: ${t}`);alert("Some files were rejected:\n\n"+e.join("\n"))}if(r.length>0){const t=r.map(e=>({id:`new_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,file:e,name:e.name,url:URL.createObjectURL(e),isNew:!0}));T(e=>({...e,attachments:[...e.attachments,...t]})),e.target.value=""}else e.target.value=""}},multiple:!0})]}),S.attachments&&S.attachments.length>0&&c.jsxs("div",{className:"mt-3 w-full",children:[c.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Selected Files:"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.attachments.map((e,t)=>c.jsxs("div",{className:"flex items-center bg-gray-100 p-2 rounded-lg relative border-2 border-blue-200",children:[e.url&&e.url.match(/\.(jpeg|jpg|gif|png)$/i)?c.jsx("img",{src:e.url,alt:`Preview ${t}`,className:"w-16 h-16 object-cover rounded-lg mr-2",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/64x64?text=Error"}}):c.jsx("div",{className:"w-16 h-16 flex items-center justify-center bg-gray-200 rounded-lg mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),c.jsxs("div",{className:"flex flex-col flex-1",children:[c.jsx("span",{className:"text-sm text-black font-medium truncate",children:e.name}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-xs text-green-600",children:"Ready to upload"}),e.file&&c.jsxs("span",{className:"text-xs text-gray-500",children:[(e.file.size/1024/1024).toFixed(2)," MB"]})]})]}),c.jsx("button",{type:"button",className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",onClick:()=>{return(t=e).url&&t.url.startsWith("blob:")&&URL.revokeObjectURL(t.url),void T(e=>({...e,attachments:e.attachments.filter(e=>e.id!==t.id)}));var t},title:"Remove attachment",children:"Ã—"})]},e.id))})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"taskType",children:"Task"}),c.jsxs("select",{id:"taskType",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:S.taskType,onChange:e=>V("taskType",e.target.value),required:!0,children:[c.jsx("option",{value:"",children:"Select Task"}),c.jsx("option",{value:"To-Do",children:"To-Do"}),c.jsx("option",{value:"Call",children:"Call"}),c.jsx("option",{value:"Pendency",children:"Pendency"}),c.jsx("option",{value:"Processing",children:"Processing"}),c.jsx("option",{value:"Completed",children:"Completed"})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Associate with records"}),c.jsx("button",{type:"button",className:"w-full px-3 py-2 border border-cyan-400 rounded bg-gray-100 text-black font-bold text-left transition-opacity "+(b?"cursor-not-allowed opacity-75":"hover:bg-gray-200 cursor-pointer"),onClick:()=>!b&&I(!0),disabled:b,children:S.associateWithRecords.length>0?1===S.associateWithRecords.length?`${S.associateWithRecords[0].name||S.associateWithRecords[0].customer_name||"Selected Lead"}${b?" (Pre-selected from lead)":""}`:`${S.associateWithRecords.length} record(s) selected${b?" (Pre-selected from lead)":""}`:"Associated with 0 records"}),b&&c.jsx("p",{className:"text-sm text-cyan-600 mt-1",children:"Lead is already pre-selected from the current view"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Assignee"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 border border-cyan-400 rounded-md bg-white p-1 pr-2 min-h-[42px]",children:[" ",S.assignedTo.map((e,t)=>{const a=e?.first_name&&e?.last_name?`${e.first_name} ${e.last_name}`.trim():e?.name||e,n=e?.user_id||e?.id||e;return c.jsxs("div",{className:"bg-blue-100 text-blue-800 py-1 px-3 rounded-md flex items-center",children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-2 text-xs flex-shrink-0",children:a.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase()}),c.jsx("span",{children:a}),c.jsx("button",{type:"button",className:"ml-2 text-blue-500 hover:text-blue-700",onClick:()=>{return t=e,void T(e=>({...e,assignedTo:e.assignedTo.filter(e=>(e.user_id||e.id||e)!==(t.user_id||t.id||t))}));var t},children:"Ã—"})]},n)}),c.jsx("button",{type:"button",className:"text-blue-600 font-medium hover:text-blue-800 ml-auto",onClick:()=>B(!0),children:"+ Add more"})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("label",{className:"block font-bold text-gray-700 mb-1",children:["Due date ","custom"===S.dueDateOption&&S.dueDate&&c.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(Selected: ",S.dueDate,")"]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsxs("select",{ref:K,className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:S.dueDateOption,onChange:e=>{const t=e.target.value;"today"===t?(V("dueDateOption","today"),V("dueDate",q()),V("customDate",null),R(!1)):"tomorrow"===t?(V("dueDateOption","tomorrow"),V("dueDate",G()),V("customDate",null),R(!1)):"custom"===t&&(V("dueDateOption","custom"),V("dueDate",S.customDate?g(S.customDate):""),R(!0))},onFocus:e=>{"custom"===S.dueDateOption&&R(!0)},required:!0,children:[c.jsxs("option",{value:"today",children:["Today (",q(),")"]}),c.jsxs("option",{value:"tomorrow",children:["Tomorrow (",G(),")"]}),c.jsx("option",{value:"custom",children:"Custom Date"})]}),"custom"===S.dueDateOption&&A&&c.jsx("div",{className:"absolute bg-white border border-cyan-400 rounded shadow-lg z-[9999] "+("above"===U?"bottom-full mb-2":"top-full mt-2"),children:c.jsx(Pr,{selected:S.customDate||new Date,onChange:e=>{V("customDate",e),V("dueDate",g(e)),R(!1)},inline:!0,showYearDropdown:!0,scrollableYearDropdown:!0,yearDropdownItemNumber:100,dateFormat:"dd MMM yyyy",className:"border border-cyan-400 rounded p-2"})})]}),c.jsx("div",{className:"flex-1 relative",children:c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100 focus:outline-none focus:ring-2 focus:ring-cyan-500 cursor-pointer",value:S.dueTime,readOnly:!0,onClick:()=>F(!0),placeholder:"HH:MM AM/PM",required:!0})})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Repeat Task"}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:S.repeatOption||"none",onChange:e=>{const t=e.target.value;T(e=>({...e,repeatOption:t,..."custom"!==t&&{repeatCustomDays:[]}})),W("custom"===t)},children:[c.jsx("option",{value:"none",children:"Don't repeat"}),c.jsx("option",{value:"daily",children:"Daily"}),c.jsx("option",{value:"weekly",children:"Weekly"}),c.jsx("option",{value:"monthly",children:"Monthly"}),c.jsx("option",{value:"custom",children:"Custom Repeat"})]}),"custom"===S.repeatOption&&Y&&c.jsxs("div",{className:"mt-2 p-4 border border-cyan-400 rounded bg-white",children:[c.jsx("div",{className:"mb-2 font-medium text-gray-700",children:"Select days:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",className:"mr-1 w-4 h-4 text-cyan-600 focus:ring-cyan-500",checked:S.repeatCustomDays?.includes(e)||!1,onChange:t=>{const a=t.target.checked;T(t=>{const n=t.repeatCustomDays||[];return a&&!n.includes(e)?{...t,repeatCustomDays:[...n,e]}:!a&&n.includes(e)?{...t,repeatCustomDays:n.filter(t=>t!==e)}:t})}}),c.jsx("span",{className:"text-sm text-black",children:e})]},e))})]})]})]}),c.jsx("div",{className:"flex gap-4 mt-6",children:c.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-cyan-600 text-white font-bold rounded-lg shadow hover:bg-cyan-700 transition text-lg",children:"Create Task"})})]})]}),P&&c.jsx(Fr,{onClose:()=>I(!1),onSelect:e=>{V("associateWithRecords",e),I(!1)},loanTypes:s,leads:i,loadingLoanTypes:m,loadingLeads:x,onFetchLeads:N}),O&&c.jsx(Rr,{initialTime:S.dueTime,onSelectTime:e=>{V("dueTime",e),F(!1)},onClose:()=>F(!1)}),$&&c.jsx($r,{onClose:()=>B(!1),onSelect:e=>{var t;t=e,T(e=>{const a=t.user_id||t.id||t;return e.assignedTo.some(e=>(e.user_id||e.id||e)===a)?e:{...e,assignedTo:[...e.assignedTo,t]}}),B(!1)},users:n,loadingUsers:u})]}):null}},Symbol.toStringTag,{value:"Module"}));function Yr(){return g(new Date)}function Wr(){const e=new Date;return e.setDate(e.getDate()+1),g(e)}function Ur({onClose:e,onSelect:t}){const[a,n]=d.useState(""),[r,s]=d.useState([]),[o,i]=d.useState(!0);d.useEffect(()=>{(async()=>{try{i(!0);const e=await y.tasks.getUsersForAssignment();let t=[];e&&e.users&&Array.isArray(e.users)&&(t=e.users.map(e=>({id:e.user_id||e.id,name:e.name||`${e.first_name||""} ${e.last_name||""}`.trim(),first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",designation:e.role||e.designation||""}))),s(t.filter(e=>e.name))}catch(e){s([])}finally{i(!1)}})()},[]);const[l,u]=d.useState([]);return d.useEffect(()=>{""===a.trim()?u(r):u(r.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())))},[a,r]),c.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-transparent",children:c.jsxs("div",{className:"bg-transparent backdrop-blur-sm p-6 rounded-2xl shadow-2xl w-[90%] max-w-5xl mx-auto relative",children:[c.jsxs("div",{className:"flex items-center mb-4 bg-white bg-opacity-90 p-3 rounded-t-xl",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),c.jsx("h3",{className:"font-bold text-lg text-black",children:"Assign Task"})]}),c.jsxs("div",{className:"mb-4 bg-white bg-opacity-90 p-3 rounded-md",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:"Assign to"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:c.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),c.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2 border border-cyan-400 rounded text-black font-bold",value:a,onChange:e=>n(e.target.value),placeholder:"Search or enter assignee name"}),a&&c.jsx("button",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",onClick:()=>n(""),type:"button",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),o?c.jsx("div",{className:"text-center p-4 bg-white bg-opacity-90 rounded-lg",children:"Loading users..."}):c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 border rounded-lg bg-white bg-opacity-90",children:l.length>0?l.map(a=>{const n=a.first_name&&a.last_name?`${a.first_name} ${a.last_name}`.trim():a.name,r=n.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return c.jsxs("li",{className:"p-3 border-b last:border-b-0 cursor-pointer text-black transition hover:bg-gray-100 flex items-center",onClick:()=>(t(a),void e()),children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3 flex-shrink-0 text-sm font-medium",children:r}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium text-sm",children:n}),a.designation&&c.jsx("span",{className:"text-xs text-gray-600",children:a.designation})]})]},a.id)}):""!==a.trim()?c.jsx("li",{className:"p-3 text-gray-500 text-center",children:"No matching assignees found."}):null}),c.jsxs("div",{className:"flex justify-end gap-4 mt-4 bg-white bg-opacity-90 p-3 rounded-b-xl",children:[c.jsx("button",{className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition",onClick:()=>{if(a){const e=r.find(e=>e.name.toLowerCase()===a.toLowerCase());t(e?{id:e.id,name:e.name,first_name:e.first_name,last_name:e.last_name,designation:e.designation,email:e.email}:{name:a})}n(""),e()},children:"Assign"}),c.jsx("button",{className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition",onClick:e,children:"Cancel"})]}),c.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:e,children:"Ã—"})]})})}function Hr({onClose:e,onSelect:t,loanTypes:a,leads:n,loadingLoanTypes:r,loadingLeads:s,onFetchLeads:o}){const[i,l]=d.useState(""),[u,p]=d.useState(""),[m,h]=d.useState(""),[f,g]=d.useState([]),y=u&&n?""===m.trim()?n:n.filter(e=>e.customer_name.toLowerCase().includes(m.toLowerCase())||e.phone&&e.phone.toLowerCase().includes(m.toLowerCase())||e.email&&e.email.toLowerCase().includes(m.toLowerCase())||e.status.toLowerCase().includes(m.toLowerCase())):[],x=e=>{p(e),h("");const t=i.toLowerCase();o(e,t)};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent",children:c.jsxs("div",{className:"bg-transparent backdrop-blur-sm p-6 rounded-2xl shadow-2xl w-[90%] max-w-5xl mx-auto flex max-h-[90vh] overflow-hidden relative",children:[c.jsxs("div",{className:"w-1/4 border-r p-4 bg-white bg-opacity-80 rounded-l-2xl",children:[c.jsx("h3",{className:"font-bold mb-4 text-lg text-black",children:"Record Types"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{className:"w-full text-left px-4 py-3 rounded-xl font-medium transition "+("Leads"===i?"bg-cyan-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{l("Leads"),p(""),h("")},children:"Leads"}),"Leads"===i&&c.jsx("div",{className:"ml-4 space-y-2 mt-2 border-l-2 border-cyan-300 pl-3",children:r?c.jsx("div",{className:"text-gray-500 text-sm",children:"Loading loan types..."}):a.map(e=>c.jsxs("button",{className:"w-full text-left px-4 py-2 rounded-lg font-medium transition "+(u===e.name?"bg-cyan-100 text-cyan-800 shadow-sm":"bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:()=>x(e.name),children:[e.name," (",e.lead_count||0,")"]},e.id))}),c.jsx("button",{className:"w-full text-left px-4 py-3 rounded-xl font-medium transition "+("Login"===i?"bg-cyan-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>{l("Login"),p(""),h("")},children:"Login"}),"Login"===i&&c.jsx("div",{className:"ml-4 space-y-2 mt-2 border-l-2 border-cyan-300 pl-3",children:r?c.jsx("div",{className:"text-gray-500 text-sm",children:"Loading loan types..."}):a.map(e=>c.jsxs("button",{className:"w-full text-left px-4 py-2 rounded-lg font-medium transition "+(u===e.name?"bg-cyan-100 text-cyan-800 shadow-sm":"bg-gray-50 text-gray-700 hover:bg-gray-100"),onClick:()=>x(e.name),children:[e.name," (",e.login_count||0,")"]},e.id))})]})]}),c.jsxs("div",{className:"w-3/4 p-6 overflow-y-auto bg-white bg-opacity-80 rounded-r-2xl",children:[u?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-xl text-black",children:u}),c.jsxs("p",{className:"text-gray-600 text-sm",children:["Select a ",i.toLowerCase().slice(0,-1)," to associate with this task"]})]}),c.jsxs("div",{className:"relative w-1/2",children:[c.jsx("input",{type:"text",placeholder:`Search ${u}`,className:"border px-4 py-2 rounded-xl w-full focus:outline-none focus:ring-2 focus:ring-cyan-500 text-black",value:m,onChange:e=>h(e.target.value)}),m&&c.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>h(""),type:"button",children:"Ã—"})]})]}),s?c.jsxs("div",{className:"text-center text-gray-500 mt-20",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto mb-4"}),c.jsx("p",{children:"Loading leads..."})]}):y.length>0?c.jsx("ul",{className:"space-y-3",children:y.map(e=>{const t=(e=>{const t=e.lead_login||"Lead";return`${e.customer_name} - ${e.phone||e.email||"No contact"} (${e.status}) [${t}]`})(e),a=(n=e,f.some(e=>e.id===n.id));var n;return c.jsx("li",{className:"p-4 border rounded-xl cursor-pointer transition text-black "+(a?"bg-cyan-100 border-cyan-500 shadow":"hover:bg-gray-100"),onClick:()=>(e=>{const t={...e,name:e.customer_name||e.name,loan_type:u,loanType:u};g([t])})(e),children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-1",children:t}),a&&c.jsx("div",{className:"text-cyan-500",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})},e.id)})}):c.jsx("div",{className:"text-gray-500 text-center mt-20 text-lg",children:m?`No ${i.toLowerCase()} found matching "${m}"`:`No ${i.toLowerCase()} available`})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-lg font-medium",children:"Please select a record type"}),c.jsx("p",{className:"text-sm",children:"Select a record type from the left panel to view records"})]}),u&&c.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[c.jsxs("button",{className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition",onClick:()=>t(f),disabled:0===f.length,children:["Select (",f.length>0?"1 lead selected":"No lead selected",")"]}),c.jsx("button",{className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition",onClick:e,children:"Cancel"})]})]}),c.jsx("button",{className:"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-2xl font-bold",onClick:e,children:"Ã—"})]})})}const zr=Object.freeze(Object.defineProperty({__proto__:null,default:function({taskData:e,onSave:t,onClose:a,currentUserId:n,apiBaseUrl:r=tt,onStatusChange:s}){if(!e&&!a)return null;const o=r,i=e=>{if(!e||"object"!=typeof e)return{id:"",createdBy:"Unknown",status:"PENDING",title:"",description:"",assign:"Unassigned",assigned_users:[],assignedTo:[],priority:"medium",dueDate:"",dueDateOption:"today",dueTime:"08:00 AM",customDate:null,repeatOption:"none",repeatCustomDays:[],created_by:"",comments:[],attachments:[],removedAttachments:[],newAttachments:[],newComment:"",showAttachments:!1,associateWithRecords:[],lead_id:null,loan_type:null,lead_name:null};if(e.id&&e.subject){let t=e.status?.toUpperCase()||"PENDING";return"Failed"!==e.status&&"FAILED"!==e.status||(t="FAILED"),(e.notes||e.message||e.task_details||"").includes("[SYSTEM_FAILED_TASK]")&&(t="FAILED"),{id:e.id,createdBy:e.createdBy||e.creator_name||"Unknown",status:t,title:e.subject||"",description:e.message||e.task_details||"",assign:e.assign||"Unassigned",assigned_users:e.assigned_to||[],assignedTo:Array.isArray(e.assigned_users)?e.assigned_users.map(e=>({id:e.user_id||e.id,name:e.name})):[],priority:e.priority||"medium",dueDate:e.date||e.due_date||"",dueDateOption:"custom",dueTime:"08:00 AM",customDate:null,repeatOption:"none",repeatCustomDays:[],created_by:e.created_by||"",comments:[],attachments:Array.isArray(e.attachments)?e.attachments.map(t=>{let a="";if(t.file_path){let e=t.file_path;e=e.replace(/^\/+/,""),a=e.startsWith("media/tasks/")||e.startsWith("media/")?`${o}/${e}`:`${o}/media/tasks/${e}`}else if(t.url)a=t.url.startsWith("http")?t.url:`${o}${t.url}`;else{const n=t.attachment_id||t.id||t._id;n&&e.id&&(a=`${o}/tasks/${e.id}/attachments/${n}/download`)}return{id:t.attachment_id||t.id||`backend_${Math.random().toString(36).substr(2,9)}`,name:t.filename||t.name||"Unknown File",url:a,isFromBackend:!0,size:t.file_size||t.size,mimeType:t.mime_type||t.type}}):[],removedAttachments:[],newAttachments:[],newComment:"",showAttachments:e.attachments&&Array.isArray(e.attachments)&&e.attachments.length>0,associateWithRecords:[],lead_id:e.lead_id||null,loan_type:e.loan_type||null,lead_name:e.lead_name||e.customer_name||null}}let t=e.status?.toUpperCase()||"PENDING";return(e.notes||e.task_details||"").includes("[SYSTEM_FAILED_TASK]")&&(t="FAILED"),{id:e._id||e.id||"",createdBy:e.created_by_name||"Unknown",status:t,title:e.title||"",description:e.description||"",assign:Array.isArray(e.assigned_users_details)&&e.assigned_users_details.length>0?e.assigned_users_details.map(e=>e.name).join(", "):"Unassigned",assigned_users:e.assigned_users||[],assignedTo:Array.isArray(e.assigned_users_details)?e.assigned_users_details.map(e=>({id:e.user_id||e._id||e.id,name:e.name||`${e.first_name||""} ${e.last_name||""}`.trim(),first_name:e.first_name||"",last_name:e.last_name||"",designation:e.role||e.designation||"",email:e.email||""})):[],priority:e.priority||"medium",dueDate:e.due_date||"",dueDateOption:"custom",dueTime:"08:00 AM",customDate:null,repeatOption:"none",repeatCustomDays:[],created_by:e.created_by||"",comments:e.comments&&Array.isArray(e.comments)?e.comments.map(e=>({id:e.id,user:e.created_by_name||"Unknown",text:e.content,time:new Date(e.created_at).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})})):[],attachments:e.attachments&&Array.isArray(e.attachments)?e.attachments.map(t=>{let a="";try{if(t.file_path){let e=t.file_path;a=e.startsWith("/")?`${tt}${e}`:e.startsWith("media/")?`${tt}/${e}`:`${tt}/media/tasks/${e}`}else if(t.url)a=t.url.startsWith("http")?t.url:`${tt}${t.url}`;else{const n=t.attachment_id||t.id||t._id;if(n&&(e._id||e.id)){const t=e._id||e.id;a=`${tt}/tasks/${t}/attachments/${n}/download`}}}catch(n){a=""}return{id:t.attachment_id||t.id||`backend_${Math.random().toString(36).substr(2,9)}`,name:t.filename||t.name||"Unknown File",url:a,isFromBackend:!0,size:t.file_size||t.size,mimeType:t.mime_type||t.type,uploadedBy:t.uploaded_by,uploadedAt:t.uploaded_at,hasError:!a}}).filter(e=>e.name&&"Unknown File"!==e.name):[],removedAttachments:[],newAttachments:[],newComment:"",showAttachments:e.attachments&&Array.isArray(e.attachments)&&e.attachments.length>0,associateWithRecords:[],lead_id:e.lead_id||null,loan_type:e.loan_type||null,lead_name:e.lead_name||e.lead_info?.customer_name||null}},[l,u]=d.useState(()=>i(e||null)),[p,m]=d.useState(!0),[h,g]=d.useState(f(new Date)),[x,v]=d.useState(!0),[b,w]=d.useState(!1),[_,k]=d.useState(!1),[D,N]=d.useState(!1),[C,S]=d.useState(null),[T,j]=d.useState(!1),[E,M]=d.useState([]),[L,P]=d.useState(!1),[I,A]=d.useState(!1),[R,O]=d.useState(navigator.onLine),[F,$]=d.useState("all"),[B,Y]=d.useState([]),[W,U]=d.useState([]),[H,z]=d.useState([]),[K,V]=d.useState(!1),[Q,q]=d.useState(!1),[G,J]=d.useState(!1),[X,Z]=d.useState(!1),[ee,te]=d.useState(!1),[ae,ne]=d.useState(!1),[re,se]=d.useState(!1),[oe,ie]=d.useState("below"),le=d.useRef(null);d.useEffect(()=>{const e=()=>{O(!0),Qe.success("Connection restored")},t=()=>{O(!1),Qe.error("Connection lost. Please check your internet.")};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);const ce=d.useRef(null);d.useEffect(()=>{if(ee&&le.current){const e=le.current.getBoundingClientRect(),t=window.innerHeight-e.bottom,a=e.top;ie(t<400&&a>t?"above":"below")}},[ee]);const de=()=>{try{const e=localStorage.getItem("userId");if(e)return e;const t=localStorage.getItem("user");if(t){const e=JSON.parse(t);return e.id||e._id||e.user_id}return null}catch(e){return null}};d.useEffect(()=>{if(e){const t=i(e);ue(t,e),w(!1)}},[e]);const ue=async(e,t)=>{try{if((!e.assignedTo||0===e.assignedTo.length)&&t.assigned_to&&Array.isArray(t.assigned_to)&&t.assigned_to.length>0){const a=await y.tasks.getUsersForAssignment();if(a&&a.users&&Array.isArray(a.users)){const e=a.users.map(e=>({id:e.user_id||e.id,user_id:e.user_id||e.id,name:e.name||`${e.first_name||""} ${e.last_name||""}`.trim(),first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",designation:e.role||e.designation||""})),n=t.assigned_to.map(t=>e.find(e=>e.id===t||e.user_id===t||String(e.id)===String(t)||String(e.user_id)===String(t))).filter(e=>void 0!==e);u(e=>({...e,assignedTo:n,assign:n.length>0?n.map(e=>e.name).join(", "):"Unassigned"}))}else u(e)}else u(e)}catch(a){u(e)}};d.useEffect(()=>{},[l]),d.useEffect(()=>{x&&l.id&&(async()=>{if(l.id&&!L){P(!0);try{const e=await y.tasks.getComments(l.id);u(t=>({...t,comments:e.comments?e.comments.map(e=>({id:e.id,user:e.created_by_name||"Unknown",text:e.content,time:new Date(e.created_at).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0,hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"short",year:"numeric"})})):[]}))}catch(e){500===e.response?.status?Qe.error("Server error while loading comments. Please try again later."):404===e.response?.status?Qe.warning("Comments not found for this task."):Qe.error("Failed to load comments. Please check your connection."),u(e=>({...e,comments:[]}))}finally{P(!1)}}})()},[x,l.id]),d.useEffect(()=>{b&&l.id&&(async()=>{if(l.id&&!I){A(!0);try{const e=await y.tasks.getHistory(l.id),t=e.history||e||[];M(t.map(e=>{let t=e.action||"Activity recorded";if(t=t.replace(/TaskStatus\./g,""),"created"===e.action_type)t=`TASK CREATED - ${e.details?.task_title||"New Task"}`;else if("status_changed"===e.action_type){const a=e.details?.old_status?.replace("TaskStatus.","")||"Unknown",n=e.details?.new_status?.replace("TaskStatus.","")||"Unknown";t=`STATUS CHANGED: ${a.toUpperCase()} â†’ ${n.toUpperCase()}`}else"comment_added"===e.action_type?t=`COMMENT ADDED: "${e.details?.comment_preview||"Comment"}"`:"assignment_changed"===e.action_type?t=`ASSIGNMENT CHANGED: ${e.details?.old_assignees?.join(", ")||"None"} â†’ ${e.details?.new_assignees?.join(", ")||"None"}`:"updated"===e.action_type&&(t=e.details?.change_summary?.replace(/TaskStatus\./g,"").toUpperCase()||t.toUpperCase());return{id:e.id,date:e.created_at?new Date(e.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase():"UNKNOWN DATE",time:e.created_at?new Date(e.created_at).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!0}).toUpperCase():"",createdBy:(e.created_by_name||"Unknown").toUpperCase(),changes:t.toUpperCase(),actionType:e.action_type||"unknown"}}))}catch(e){500===e.response?.status?Qe.error("Server error while loading history. Using fallback data."):404===e.response?.status?Qe.warning("History not found for this task. Using fallback data."):Qe.error("Failed to load history. Using fallback data."),M([{id:1,date:"24 JUN 2025",createdBy:"ADMIN",changes:"REOPEN"},{id:2,date:"24 JUN 2025",createdBy:"ADMIN",changes:"TASK CLOSED"},{id:3,date:"11 JUN 2025",createdBy:"ADMIN",changes:"REOPEN"},{id:4,date:"11 JUN 2025",createdBy:"ADMIN",changes:"TASK CLOSED"},{id:5,date:"11 JUN 2025",createdBy:"ADMIN",changes:"OPEN TASK"}])}finally{A(!1)}}})()},[b,l.id]),d.useEffect(()=>{ce.current&&(ce.current.style.height="auto",ce.current.style.height=ce.current.scrollHeight+"px")},[l.description]),d.useEffect(()=>{},[]),d.useEffect(()=>{if(l&&l.lead_id){const e={id:l.lead_id,lead_id:l.lead_id,name:l.lead_name||l.customer_name||"Associated Lead",lead_number:l.lead_number||"",loan_type:l.loan_type||""};l.associateWithRecords&&0!==l.associateWithRecords.length||u(t=>({...t,associateWithRecords:[e]}))}},[l?.lead_id,l?.lead_name,l?.customer_name,l?.loan_type]);const pe=async()=>{N(!0),S(null);try{const e="COMPLETED"===l.status||"FAILED"===l.status?"PENDING":"COMPLETED",a={PENDING:"Pending",IN_PROGRESS:"In Progress",COMPLETED:"Completed",FAILED:"Failed",CANCELLED:"Cancelled"}[e]||"Pending",n=l.status,r="FAILED"===n&&"PENDING"===e?(l.notes||"").replace("[SYSTEM_FAILED_TASK]","").trim():l.notes,o="FAILED"===n&&"PENDING"===e?(l.description||"").replace("[SYSTEM_FAILED_TASK]","").trim():l.description;if(u(t=>({...t,status:e,notes:r,description:o})),s&&"COMPLETED"===e&&s({taskId:l.id,newStatus:a,previousStatus:n,shouldSwitchToCompleteTab:!0,immediate:!0}),t){let r=[];Array.isArray(l.assigned_users)&&(r=l.assigned_users.map(e=>"string"==typeof e?e:e.user_id||e.id||e._id).filter(Boolean));const s={subject:l.title||"",task_details:"FAILED"===n&&"PENDING"===e?(l.description||"").replace("[SYSTEM_FAILED_TASK]","").trim():l.description||"",priority:l.priority||"Medium",status:a,assigned_to:r,due_date:l.dueDate||null,due_time:l.dueTime||"08:00 AM",task_type:l.taskType||l.typeTask||"To-Do",is_urgent:l.isUrgent||l.is_urgent||!1,notes:"FAILED"===n&&"PENDING"===e?(l.notes||"").replace("[SYSTEM_FAILED_TASK]","").trim():l.notes||"",repeat_option:l.repeatOption||"none",repeat_custom_days:l.repeatCustomDays||[],...l.lead_id&&{lead_id:l.lead_id},...l.loan_type&&{loan_type:l.loan_type},_id:l.id,id:l.id,title:l.title,description:"FAILED"===n&&"PENDING"===e?(l.description||"").replace("[SYSTEM_FAILED_TASK]","").trim():l.description,message:"FAILED"===n&&"PENDING"===e?(l.description||"").replace("[SYSTEM_FAILED_TASK]","").trim():l.description,date:l.dueDate,time:l.dueTime,typeTask:l.taskType||l.typeTask,keepModalOpen:!0};await t(s),Qe.success(`Task ${a.toLowerCase()} successfully`)}}catch(e){u(e=>({...e,status:l.status})),500===e.response?.status?(S("Server error while updating status. Please try again later."),Qe.error("Server error: Unable to update task status. Please try again later.")):404===e.response?.status?(S("Task not found. It may have been deleted."),Qe.error("Task not found. It may have been deleted by another user.")):403===e.response?.status?(S("You don't have permission to update this task status."),Qe.error("Permission denied: You cannot update this task status.")):navigator.onLine?(S("Failed to update task status. Please try again."),Qe.error("Failed to update task status. Please try again.")):(S("No internet connection. Please check your network."),Qe.error("Network error: Please check your internet connection."))}finally{N(!1)}},me=(e,t)=>{u(a=>({...a,[e]:t}))},he=async e=>{if(e.preventDefault(),!l.newComment.trim())return;const t=l.newComment.trim();N(!0);try{const e=await y.tasks.addComment(l.id,t);u(e=>({...e,newComment:""}));const a=(new Date).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0,hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"short",year:"numeric"}),n={id:e.id||Date.now(),user:e.created_by_name||"You",text:t,time:e.created_at?new Date(e.created_at).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0,hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"short",year:"numeric"}):a};u(e=>({...e,comments:[n,...e.comments]})),Qe.success("Comment added successfully")}catch(a){u(e=>({...e,newComment:t})),500===a.response?.status?Qe.error("Server error: Unable to add comment. Please try again later."):404===a.response?.status?Qe.error("Task not found. Comment could not be added."):403===a.response?.status?Qe.error("Permission denied: You cannot add comments to this task."):navigator.onLine?Qe.error("Failed to add comment. Please try again."):Qe.error("Network error: Please check your internet connection.")}finally{N(!1)}},fe=()=>{m(!1),w(!1),a&&a()};return l&&l.id?c.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-transparent",style:{backdropFilter:"blur(3px)"},children:[c.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-5xl mx-auto space-y-6 max-h-[90vh] overflow-y-auto",children:[c.jsx("button",{className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold",onClick:fe,"aria-label":"Close",type:"button",children:"Ã—"}),c.jsx("h2",{className:"text-xl font-bold text-green-600 mb-4",children:"EDIT TASK"}),!R&&c.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("span",{children:"No internet connection. Some features may not work properly."})]}),C&&c.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 flex items-center",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("span",{children:C})]}),c.jsxs("form",{onSubmit:async e=>{e.preventDefault(),N(!0),S(null);try{const e={PENDING:"Pending",IN_PROGRESS:"In Progress",COMPLETED:"Completed",CANCELLED:"Cancelled"},n={subject:l.title,task_details:l.description,priority:l.priority||"medium",status:e[l.status]||"Pending",assigned_to:l.assigned_users||[],due_date:l.dueDate||null,due_time:l.dueTime||"08:00 AM",repeat_option:l.repeatOption||"none",repeat_custom_days:l.repeatCustomDays||[]};if(l.associateWithRecords&&l.associateWithRecords.length>0){const e=l.associateWithRecords[0];(e.id||e.lead_id)&&(n.lead_id=e.id||e.lead_id,n.lead_name=e.name||e.customer_name,n.loan_type=e.loan_type||e.loanType)}if(!n.subject.trim())return void S("Title is required");if(!n.task_details.trim())return void S("Description is required");l.newAttachments;let r=!1;try{r=!1}catch(a){r=!1}if(!r&&t){const e={...n,_id:l.id,id:l.id,subject:l.title,message:l.description,title:l.title,description:l.description,attachmentsToRemove:l.removedAttachments.filter(e=>e.id).map(e=>e.id),newAttachments:l.newAttachments||[],newComment:l.newComment,comments:l.comments||[]},a=await t(e);u(a?e=>({...e,...i(a),newAttachments:[],removedAttachments:[]}):e=>({...e,title:n.subject,description:n.task_details,priority:n.priority,status:l.status,assigned_users:n.assigned_to,dueDate:n.due_date,newAttachments:[],removedAttachments:[]})),Qe.success("Task updated successfully")}j(!1)}catch(n){500===n.response?.status?(S("Server error occurred. Please try again later."),Qe.error("Server error: Unable to update task. Please try again later.")):404===n.response?.status?(S("Task not found. It may have been deleted."),Qe.error("Task not found. It may have been deleted by another user.")):403===n.response?.status?(S("You don't have permission to update this task."),Qe.error("Permission denied: You cannot update this task.")):400===n.response?.status?(S("Invalid task data. Please check your inputs."),Qe.error("Invalid data: Please check all required fields.")):navigator.onLine?(S("Failed to update task. Please try again."),Qe.error("Failed to update task. Please try again.")):(S("No internet connection. Please check your network."),Qe.error("Network error: Please check your internet connection."))}finally{N(!1)}},children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Date & Time"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:h,readOnly:!0})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"createdBy",children:"Created By"}),c.jsx("input",{id:"createdBy",type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:l.createdBy,onChange:e=>me("createdBy",e.target.value),required:!0,readOnly:!0})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"title",children:"Title"}),c.jsx("input",{id:"title",type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold "+(T?"":"bg-gray-100"),value:l.title,onChange:e=>me("title",e.target.value),placeholder:"Enter task title",required:!0,readOnly:!T})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",htmlFor:"description",children:"Task Description"}),c.jsx("textarea",{ref:ce,id:"description",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold resize-none overflow-hidden "+(T?"":"bg-gray-100"),rows:3,value:l.description,onChange:e=>me("description",e.target.value),placeholder:"Enter task description...",required:!0,readOnly:!T,style:{minHeight:"3rem",maxHeight:"400px",transition:"height 0.2s"}})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Associate with records"}),c.jsx("div",{className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold min-h-[42px] flex items-center "+(T?"cursor-pointer hover:bg-gray-50":"bg-gray-100 cursor-not-allowed"),onClick:()=>{T&&((async()=>{const e=de();if(e){V(!0);try{const t=await fetch(`${o}/tasks/users-for-assignment?user_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(a&&a.users&&Array.isArray(a.users)){const e=a.users.map(e=>({id:e.user_id||e._id||e.id,name:e.name||e.username||`${e.first_name||""} ${e.last_name||""}`.trim(),email:e.email||"",role:e.role||""})).filter(e=>e.name&&e.id);Y(e)}else if(a&&Array.isArray(a)){const e=a.map(e=>({id:e.user_id||e._id||e.id,name:e.name||e.username||`${e.first_name||""} ${e.last_name||""}`.trim(),email:e.email||"",role:e.role||""})).filter(e=>e.name&&e.id);Y(e)}else Y([])}catch(t){Y([])}finally{V(!1)}}})(),(async()=>{const e=de();if(e){q(!0);try{const t=await fetch(`${o}/tasks/loan-types-with-leads?user_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=(await t.json()).loan_types||[];U(a)}catch(t){U([])}finally{q(!1)}}})(),Z(!0))},children:l.associateWithRecords&&l.associateWithRecords.length>0?1===l.associateWithRecords.length?`${l.associateWithRecords[0].name||l.associateWithRecords[0].customer_name||"Selected Lead"}`:`${l.associateWithRecords.length} record(s) selected`:"Associated with 0 records"})]}),c.jsxs("div",{className:"flex flex-col items-start mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-2",children:"Attachment"}),c.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-cyan-500 text-white font-bold rounded-lg shadow cursor-pointer hover:bg-cyan-600 transition "+(T?"":"opacity-50 cursor-not-allowed"),children:["Photo/PDF",c.jsx("input",{type:"file",accept:"image/*,application/pdf",className:"hidden",onChange:e=>{const t=Array.from(e.target.files);if(t.length>0){const a=["image/jpeg","image/png","image/gif","application/pdf"],n=10485760,r=[],s=[];if(t.forEach(e=>{a.includes(e.type)?e.size>n?s.push({file:e,reason:"File size exceeds 10MB limit."}):r.push(e):s.push({file:e,reason:"Invalid file type. Only JPEG, PNG, GIF images and PDF files are allowed."})}),s.length>0){const e=s.map(({file:e,reason:t})=>`${e.name}: ${t}`);alert("Some files were rejected:\n\n"+e.join("\n"))}if(r.length>0){const t=r.map(e=>({id:`new_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,file:e,name:e.name,url:URL.createObjectURL(e),isNew:!0,isFromBackend:!1}));u(e=>({...e,attachments:[...e.attachments,...t],newAttachments:[...e.newAttachments,...t],showAttachments:!0})),e.target.value=""}else e.target.value=""}},multiple:!0,disabled:!T})]}),c.jsx("h4",{className:"font-semibold text-gray-700 mt-4 mb-2 w-full",children:l.attachments.filter(e=>e.isFromBackend).length>0?"Previous Attachments":""}),l.attachments.filter(e=>e.isFromBackend).length>0&&c.jsx("div",{className:"mt-2 grid grid-cols-2 gap-4 w-full",children:l.attachments.filter(e=>e.isFromBackend).map((e,t)=>c.jsxs("div",{className:"flex items-center bg-gray-100 p-2 rounded-lg relative border-2 border-green-200",children:[e.url&&(e.url.match(/\.(jpeg|jpg|gif|png)$/i)||e.mimeType&&e.mimeType.startsWith("image/"))?c.jsx("img",{src:e.url,alt:`Preview ${t}`,className:"w-20 h-20 object-cover rounded-lg mr-2",onError:t=>{t.target.onerror=null,t.target.src="https://via.placeholder.com/80x80?text=Error+Loading",e.url.includes("/tasks/")&&e.url.includes("/attachments/")&&e.file_path&&(e.file_path.startsWith("/"),e.file_path)}}):c.jsx("div",{className:"w-20 h-20 flex items-center justify-center bg-gray-200 rounded-lg mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),c.jsxs("div",{className:"flex flex-col flex-1",children:[c.jsx("span",{className:"text-sm text-black font-medium truncate",children:e.name}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View"}),e.uploadedAt&&c.jsxs("span",{className:"text-xs text-gray-500",children:["Uploaded: ",new Date(e.uploadedAt).toLocaleString("en-IN",{timeZone:"Asia/Kolkata"})]})]})]}),T&&c.jsx("button",{type:"button",className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",onClick:()=>{return t=e,void u(e=>({...e,attachments:e.attachments.filter(e=>e.id!==t.id),removedAttachments:[...e.removedAttachments,t]}));var t},title:"Remove attachment",children:"Ã—"})]},`backend-${t}`))}),c.jsx("h4",{className:"font-semibold text-gray-700 mt-4 mb-2 w-full",children:l.attachments.filter(e=>!e.isFromBackend).length>0?"New Attachments":""}),l.attachments.filter(e=>!e.isFromBackend).length>0?c.jsx("div",{className:"mt-2 grid grid-cols-2 gap-4 w-full",children:l.attachments.filter(e=>!e.isFromBackend).map((e,t)=>c.jsxs("div",{className:"flex items-center bg-gray-100 p-2 rounded-lg relative border-2 border-blue-200",children:[e.url&&e.url.match(/\.(jpeg|jpg|gif|png)$/i)?c.jsx("img",{src:e.url,alt:`Preview ${t}`,className:"w-20 h-20 object-cover rounded-lg mr-2",onError:e=>{e.target.onerror=null,e.target.src="https://via.placeholder.com/80x80?text=Error"}}):c.jsx("div",{className:"w-20 h-20 flex items-center justify-center bg-gray-200 rounded-lg mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),c.jsxs("div",{className:"flex flex-col flex-1",children:[c.jsx("span",{className:"text-sm text-black font-medium truncate",children:e.name}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"Preview"}),c.jsx("span",{className:"text-xs text-green-600",children:"New file - not yet uploaded"})]})]}),T&&c.jsx("button",{type:"button",className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",onClick:()=>{return(t=e).url&&t.url.startsWith("blob:")&&URL.revokeObjectURL(t.url),void u(e=>({...e,attachments:e.attachments.filter(e=>e.id!==t.id),newAttachments:e.newAttachments.filter(e=>e.id!==t.id)}));var t},title:"Remove attachment",children:"Ã—"})]},`new-${t}`))}):null,0===l.attachments.length&&c.jsx("div",{className:"mt-2 p-4 bg-gray-100 rounded-lg text-gray-500 text-center w-full",children:"No attachments available. Add some using the button above."})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Assignee"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 border border-cyan-400 rounded-md bg-white p-1 pr-2 min-h-[42px]",children:[l.assignedTo&&l.assignedTo.map((e,t)=>{const a="string"==typeof e?{name:e,first_name:"",last_name:"",designation:""}:e,n=a.first_name&&a.last_name?`${a.first_name} ${a.last_name}`.trim():a.name||e,r=a.designation||"";return c.jsxs("div",{className:"bg-green-100 text-green-800 py-2 px-3 rounded-md flex items-center",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3 text-xs flex-shrink-0 font-medium",children:n.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase()}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium text-sm",children:n}),r&&c.jsx("span",{className:"text-xs text-green-600 opacity-80",children:r})]}),T&&c.jsx("button",{type:"button",className:"ml-3 text-green-500 hover:text-green-700 font-bold text-lg",onClick:()=>{return e=n,void u(t=>{const a=t.assignedTo.filter(t=>"string"==typeof t?t!==e:t.name!==e),n=t.assigned_users.filter((a,n)=>{const r=t.assignedTo[n];return"string"==typeof r?r!==e:r.name!==e}),r=a.map(e=>"string"==typeof e?e:e.name);return{...t,assignedTo:a,assign:r.join(", "),assigned_users:n}});var e},children:"Ã—"})]},t)}),T&&c.jsx("button",{type:"button",className:"text-green-600 font-medium hover:text-green-800 ml-auto",onClick:()=>k(!0),children:"+ Add more"})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("label",{className:"block font-bold text-gray-700 mb-1",children:["Due date ","custom"===l.dueDateOption&&l.dueDate&&c.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(Selected: ",l.dueDate,")"]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsxs("select",{ref:le,className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:l.dueDateOption||"today",onChange:e=>{if(!T)return;const t=e.target.value;"today"===t?(me("dueDateOption","today"),me("dueDate",Yr()),me("customDate",null),te(!1)):"tomorrow"===t?(me("dueDateOption","tomorrow"),me("dueDate",Wr()),me("customDate",null),te(!1)):"custom"===t&&(me("dueDateOption","custom"),me("dueDate",l.customDate?formatDateToDDMonYYYY(l.customDate):""),te(!0))},onFocus:e=>{T&&"custom"===l.dueDateOption&&te(!0)},disabled:!T,required:!0,children:[c.jsxs("option",{value:"today",children:["Today (",Yr(),")"]}),c.jsxs("option",{value:"tomorrow",children:["Tomorrow (",Wr(),")"]}),c.jsx("option",{value:"custom",children:"Custom Date"})]}),"custom"===l.dueDateOption&&ee&&T&&c.jsx("div",{className:"absolute bg-white border border-cyan-400 rounded shadow-lg z-[9999] "+("above"===oe?"bottom-full mb-2":"top-full mt-2"),children:c.jsx(Pr,{selected:l.customDate||new Date,onChange:e=>{me("customDate",e),me("dueDate",formatDateToDDMonYYYY(e)),te(!1)},inline:!0,showYearDropdown:!0,scrollableYearDropdown:!0,yearDropdownItemNumber:100,dateFormat:"dd MMM yyyy",className:"border border-cyan-400 rounded p-2"})})]}),c.jsx("div",{className:"flex-1 relative",children:c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold focus:outline-none focus:ring-2 focus:ring-cyan-500 "+(T?"bg-gray-100 cursor-pointer":"bg-gray-100 cursor-not-allowed"),value:l.dueTime||"08:00 AM",readOnly:!0,onClick:()=>T&&ne(!0),placeholder:"HH:MM AM/PM",required:!0})})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Repeat Task"}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:l.repeatOption||"none",onChange:e=>{if(!T)return;const t=e.target.value;me("repeatOption",t),se("custom"===t)},disabled:!T,children:[c.jsx("option",{value:"none",children:"Don't repeat"}),c.jsx("option",{value:"daily",children:"Daily"}),c.jsx("option",{value:"weekly",children:"Weekly"}),c.jsx("option",{value:"monthly",children:"Monthly"}),c.jsx("option",{value:"custom",children:"Custom Repeat"})]}),"custom"===l.repeatOption&&re&&T&&c.jsxs("div",{className:"mt-2 p-4 border border-cyan-400 rounded bg-white",children:[c.jsx("div",{className:"mb-2 font-medium text-gray-700",children:"Select days:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",className:"mr-1 w-4 h-4 text-cyan-600 focus:ring-cyan-500",checked:l.repeatCustomDays?.includes(e)||!1,onChange:t=>{const a=t.target.checked;u(t=>{const n=t.repeatCustomDays||[];return a&&!n.includes(e)?{...t,repeatCustomDays:[...n,e]}:!a&&n.includes(e)?{...t,repeatCustomDays:n.filter(t=>t!==e)}:t})}}),c.jsx("span",{className:"text-sm text-black",children:e})]},e))})]})]})]}),c.jsxs("div",{className:"flex gap-4 mt-6",children:[void 0,"COMPLETED"===l.status||"FAILED"===l.status?c.jsxs(c.Fragment,{children:[void 0,c.jsx("button",{type:"button",className:"flex-1 px-6 py-3 bg-green-600 text-white font-bold rounded-lg shadow hover:bg-green-700 transition text-lg",onClick:pe,disabled:D,children:D?"Updating...":"Reopen Task"}),!T&&c.jsx("button",{type:"button",className:"flex-1 px-6 py-3 bg-orange-600 text-white font-bold rounded-lg shadow hover:bg-orange-700 transition text-lg",onClick:()=>j(!0),children:"Edit Task"})]}):c.jsxs(c.Fragment,{children:[void 0,c.jsx("button",{type:"button",className:"flex-1 px-6 py-3 bg-green-600 text-white font-bold rounded-lg shadow hover:bg-green-700 transition text-lg",onClick:pe,disabled:D,children:D?"Updating...":"Complete Task"}),c.jsx("button",{type:"button",className:"flex-1 px-6 py-3 bg-red-600 text-white font-bold rounded-lg shadow hover:bg-red-700 transition text-lg",onClick:async()=>{N(!0),S(null);try{const e="FAILED"===l.status?"PENDING":"FAILED",a={PENDING:"Pending",IN_PROGRESS:"In Progress",COMPLETED:"Completed",FAILED:"Cancelled",CANCELLED:"Cancelled"}[e]||"Pending",n=l.status;if(u(t=>({...t,status:e})),s&&"FAILED"===e&&s({taskId:l.id,newStatus:a,previousStatus:n,shouldSwitchToFailedTab:!0,immediate:!0}),t){let n=[];Array.isArray(l.assigned_users)&&(n=l.assigned_users.map(e=>"string"==typeof e?e:e.user_id||e.id||e._id).filter(Boolean));const r={subject:l.title||"",task_details:l.description||"",priority:l.priority||"Medium",status:a,assigned_to:n,due_date:l.dueDate||null,due_time:l.dueTime||"08:00 AM",task_type:l.taskType||l.typeTask||"To-Do",is_urgent:l.isUrgent||l.is_urgent||!1,notes:"FAILED"===e?`${l.notes||""}\n[SYSTEM_FAILED_TASK]`.trim():l.notes||"",repeat_option:l.repeatOption||"none",repeat_custom_days:l.repeatCustomDays||[],...l.lead_id&&{lead_id:l.lead_id},...l.loan_type&&{loan_type:l.loan_type},_id:l.id,id:l.id,title:l.title,description:l.description,message:l.description,date:l.dueDate,time:l.dueTime,typeTask:l.taskType||l.typeTask,uiStatus:e,isFailedTask:"FAILED"===e,keepModalOpen:!0};await t(r),Qe.success(`Task ${a.toLowerCase()} successfully`)}}catch(e){u(e=>({...e,status:l.status})),500===e.response?.status?(S("Server error while updating status. Please try again later."),Qe.error("Server error: Unable to update task status. Please try again later.")):404===e.response?.status?(S("Task not found. It may have been deleted."),Qe.error("Task not found. It may have been deleted by another user.")):403===e.response?.status?(S("You don't have permission to update this task status."),Qe.error("Permission denied: You cannot update this task status.")):navigator.onLine?(S("Failed to update task status. Please try again."),Qe.error("Failed to update task status. Please try again.")):(S("No internet connection. Please check your network."),Qe.error("Network error: Please check your internet connection."))}finally{N(!1)}},disabled:D,children:D?"Updating...":"Failed Task"}),!T&&c.jsx("button",{type:"button",className:"flex-1 px-6 py-3 bg-orange-600 text-white font-bold rounded-lg shadow hover:bg-orange-700 transition text-lg",onClick:()=>j(!0),children:"Edit Task"})]}),T&&c.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-cyan-600 text-white font-bold rounded-lg shadow hover:bg-cyan-700 transition text-lg",disabled:D,children:D?"Updating...":"Update Task"})]})]}),c.jsxs("div",{className:"mt-6 border-t pt-4",children:[c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{type:"button",className:"px-4 py-2 font-semibold rounded-lg shadow "+(x?"bg-green-500 text-white hover:bg-green-600":"bg-white text-gray-700 hover:bg-gray-100"),onClick:()=>{v(!x),w(!1)},children:"âž• Comments"}),c.jsx("button",{type:"button",className:"px-4 py-2 font-semibold rounded-lg shadow "+(b?"bg-green-500 text-white hover:bg-green-600":"bg-white text-gray-700 hover:bg-gray-100"),onClick:()=>{w(!0),v(!1)},children:"ðŸ“œ History"})]}),x&&c.jsxs(c.Fragment,{children:[c.jsx("form",{onSubmit:he,className:"mt-4",children:c.jsxs("div",{className:"bg-white border-2 border-green-200 rounded-lg p-3 shadow-sm",children:[c.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ðŸ’¬ ADD COMMENT"}),c.jsx("textarea",{value:l.newComment,onChange:e=>me("newComment",e.target.value),onBlur:()=>{var e;["id","assignTo","priority","status","type","dueDate","dueTime"].includes(e="newComment")||"string"!=typeof l[e]||u(t=>({...t,[e]:t[e].toUpperCase()}))},placeholder:"Type your comment here... (Press Enter for new line, Ctrl+Enter to submit)",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg text-sm text-black font-semibold focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none",disabled:D,rows:3,style:{minHeight:"80px"},onKeyDown:e=>{e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),he(e))}}),c.jsxs("div",{className:"flex justify-between items-center mt-2",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:["Press ",c.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 rounded",children:"Ctrl+Enter"})," to submit"]}),c.jsx("button",{type:"submit",disabled:!l.newComment.trim()||D,className:"px-6 py-2 rounded-lg text-sm font-bold transition-all "+(!l.newComment.trim()||D?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 hover:shadow-md"),children:D?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),c.jsx("span",{children:"ADDING..."})]}):"âž¤ ADD COMMENT"})]})]})}),c.jsx("div",{className:"mt-4 space-y-3 max-h-[400px] overflow-y-auto pr-2",children:L?c.jsxs("div",{className:"text-center py-8 bg-white rounded-lg border-2 border-gray-200",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"}),c.jsx("p",{className:"text-gray-500 mt-2 font-bold",children:"LOADING COMMENTS..."})]}):l.comments&&l.comments.length>0?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-xs font-bold text-gray-500 mb-2 uppercase tracking-wide",children:["ðŸ’¬ ",l.comments.length," ",1===l.comments.length?"Comment":"Comments"]}),l.comments.map((e,t)=>c.jsxs("div",{className:"bg-gradient-to-r from-white to-green-50 border-2 border-green-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-green-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-500 to-green-600 text-white flex items-center justify-center text-sm font-bold shadow-sm",children:(e.user||"U").charAt(0).toUpperCase()}),c.jsx("span",{className:"font-bold text-gray-800 text-sm",children:(e.user||"UNKNOWN USER").toUpperCase()}),c.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-bold px-2 py-0.5 rounded-full",children:["#",t+1]})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[c.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),c.jsx("span",{className:"font-semibold",children:e.time})]})]}),c.jsx("div",{className:"text-sm font-semibold text-gray-800 leading-relaxed whitespace-pre-wrap break-words",children:e.text})]},e.id||t))]}):c.jsxs("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-green-50 rounded-lg border-2 border-dashed border-green-300",children:[c.jsx("div",{className:"text-5xl mb-3",children:"ðŸ’¬"}),c.jsx("p",{className:"text-gray-600 font-bold text-lg",children:"NO COMMENTS YET"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Be the first to share your thoughts!"})]})})]}),b&&c.jsx("div",{className:"mt-4",children:I?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-green-500 mx-auto"}),c.jsx("p",{className:"text-gray-500 mt-3 font-medium",children:"Loading history..."})]}):E&&E.length>0?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between bg-white p-4 rounded-lg border-2 border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-sm font-bold text-gray-700",children:"ðŸ“Š FILTER:"}),c.jsxs("select",{value:F,onChange:e=>$(e.target.value),className:"px-4 py-2 border-2 border-gray-300 rounded-lg text-sm font-semibold text-gray-700 bg-white hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition cursor-pointer",children:[c.jsxs("option",{value:"all",children:["ALL ACTIVITIES (",E.length,")"]}),c.jsxs("option",{value:"created",children:["ðŸ“ CREATED (",E.filter(e=>"created"===e.actionType).length,")"]}),c.jsxs("option",{value:"status",children:["ðŸ”„ STATUS (",E.filter(e=>"status_changed"===e.actionType).length,")"]}),c.jsxs("option",{value:"comment",children:["ðŸ’¬ COMMENTS (",E.filter(e=>"comment_added"===e.actionType).length,")"]}),c.jsxs("option",{value:"assignment",children:["ðŸ‘¤ ASSIGNMENTS (",E.filter(e=>"assignment_changed"===e.actionType).length,")"]}),c.jsxs("option",{value:"updated",children:["âœï¸ UPDATES (",E.filter(e=>"updated"===e.actionType).length,")"]})]})]}),c.jsxs("div",{className:"text-sm font-bold text-gray-600",children:["SHOWING: ",c.jsx("span",{className:"text-blue-600",children:E.filter(e=>"all"===F||("created"===F?"created"===e.actionType:"status"===F?"status_changed"===e.actionType:"comment"===F?"comment_added"===e.actionType:"assignment"===F?"assignment_changed"===e.actionType:"updated"===F&&"updated"===e.actionType)).length})," OF ",c.jsx("span",{className:"text-blue-600",children:E.length})]})]}),c.jsx("div",{className:"bg-white rounded-lg border-2 border-gray-200 shadow-sm overflow-hidden",children:c.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider border-r border-blue-500",children:"#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider border-r border-blue-500",children:"TYPE"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider border-r border-blue-500",children:"DETAILS"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider border-r border-blue-500",children:"USER"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"DATE & TIME"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:(()=>{const e=E.filter(e=>"all"===F||("created"===F?"created"===e.actionType:"status"===F?"status_changed"===e.actionType:"comment"===F?"comment_added"===e.actionType:"assignment"===F?"assignment_changed"===e.actionType:"updated"===F&&"updated"===e.actionType));return 0===e.length?c.jsx("tr",{children:c.jsxs("td",{colSpan:"5",className:"px-4 py-12 text-center",children:[c.jsx("div",{className:"text-4xl mb-3",children:"ðŸ”"}),c.jsx("p",{className:"text-gray-500 font-bold",children:"NO ACTIVITIES FOUND"}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try selecting a different filter"})]})}):e.map((e,t)=>{const a=t%2==0?"bg-gray-50":"bg-white";let n="ðŸ“Œ",r="ACTIVITY",s="bg-gray-100 text-gray-800";return"created"===e.actionType?(n="ðŸ“",r="CREATED",s="bg-blue-100 text-blue-800"):"status_changed"===e.actionType?(n="ðŸ”„",r="STATUS",s="bg-green-100 text-green-800"):"comment_added"===e.actionType?(n="ðŸ’¬",r="COMMENT",s="bg-purple-100 text-purple-800"):"assignment_changed"===e.actionType?(n="ðŸ‘¤",r="ASSIGNMENT",s="bg-orange-100 text-orange-800"):"updated"===e.actionType&&(n="âœï¸",r="UPDATED",s="bg-yellow-100 text-yellow-800"),c.jsxs("tr",{className:`${a} hover:bg-blue-50 transition-colors`,children:[c.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-700 border-r border-gray-200",children:t+1}),c.jsx("td",{className:"px-4 py-3 border-r border-gray-200",children:c.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold ${s}`,children:[n," ",r]})}),c.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-800 border-r border-gray-200",children:e.changes}),c.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-700 border-r border-gray-200",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-600 text-white flex items-center justify-center text-xs font-bold",children:(e.createdBy||"U").charAt(0).toUpperCase()}),(e.createdBy||"UNKNOWN").toUpperCase()]})}),c.jsxs("td",{className:"px-4 py-3 text-sm",children:[c.jsx("div",{className:"font-bold text-gray-700",children:e.date}),c.jsx("div",{className:"font-semibold text-gray-500 text-xs",children:e.time})]})]},e.id||t)})})()})]})})})]}):c.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border-2 border-gray-200 shadow-sm",children:[c.jsx("div",{className:"text-5xl mb-3",children:"ðŸ“‹"}),c.jsx("p",{className:"text-gray-600 font-bold text-lg",children:"NO HISTORY AVAILABLE"}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Activity will appear here as actions are performed"})]})})]})]}),_&&c.jsx(Ur,{onClose:()=>k(!1),onSelect:e=>{var t;t=e,u(e=>{const a="string"==typeof t?t:t.name,n="string"==typeof t?null:t.id;if(!e.assignedTo.some(e=>"string"==typeof e?e===a:e.name===a)){const a=[...e.assignedTo,t],r=n?[...e.assigned_users||[],n]:e.assigned_users||[],s=a.map(e=>"string"==typeof e?e:e.name);return{...e,assignedTo:a,assign:s.join(", "),assigned_users:r}}return e}),k(!1)}}),ae&&c.jsx(Rr,{onClose:()=>ne(!1),onTimeSelect:e=>{u(t=>({...t,dueTime:e})),ne(!1)},initialTime:l.dueTime}),X&&c.jsx(Hr,{onClose:()=>Z(!1),onSelect:e=>{u(t=>({...t,associateWithRecords:e})),Z(!1)},loanTypes:W,leads:H,loadingLoanTypes:Q,loadingLeads:G,onFetchLeads:async(e,t="leads")=>{const a=de();if(a&&e){J(!0);try{const n=await fetch(`${o}/tasks/leads-logins-by-type?loan_type=${encodeURIComponent(e)}&record_type=${encodeURIComponent(t)}&user_id=${a}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=(await n.json()).leads||[];z(r)}catch(n){Qe.error(`Failed to load ${t}`),z([])}finally{J(!1)}}}})]}):c.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center bg-transparent",style:{backdropFilter:"blur(3px)"},children:c.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-md mx-auto text-center",children:[c.jsx("button",{className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold",onClick:fe,"aria-label":"Close",type:"button",children:"Ã—"}),c.jsx("div",{className:"mb-4",children:c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Task Loading Error"}),c.jsxs("div",{className:"text-gray-700 mb-6 space-y-2",children:[c.jsx("p",{children:"Unable to load task data. This could be due to:"}),c.jsxs("ul",{className:"text-left text-sm space-y-1 mt-3",children:[c.jsx("li",{children:"â€¢ Server error (500 Internal Server Error)"}),c.jsx("li",{children:"â€¢ Task not found or deleted"}),c.jsx("li",{children:"â€¢ Network connectivity issues"}),c.jsx("li",{children:"â€¢ Permission restrictions"})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Retry"}),c.jsx("button",{onClick:fe,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Close"})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{tt as A,Br as C,zr as E,et as L,pt as T,nt as a,at as b,Qe as y};
