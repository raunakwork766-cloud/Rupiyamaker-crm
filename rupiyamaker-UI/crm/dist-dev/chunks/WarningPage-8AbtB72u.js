import{j as e}from"./vendor-mui-C1GmDdcn.js";import{r as t}from"./vendor-react-EzoxUMNY.js";import{j as a,n as s,m as n,s as r,T as l,aM as i,q as o,U as d,F as c,t as x,X as m,o as h,p,ab as u,c as g,B as b,h as y,as as f,aL as w}from"./lead-components-CYNneY3r.js";import{K as j}from"./vendor-utils-QXd9EeNt.js";import"./vendor-antd-BB3a0mYC.js";const N="/api",v=t.memo(()=>{const[v,_]=t.useState([]),[k,C]=t.useState([]),[S,L]=t.useState([]),[E,M]=t.useState([]),[T,A]=t.useState([]),[D,$]=t.useState([]),[F,P]=t.useState({}),[U,W]=t.useState({}),[z,I]=t.useState([]),[B,O]=t.useState(null),[R,G]=t.useState(!1),[Y,J]=t.useState(0),[q,H]=t.useState(0),[K,Q]=t.useState(10),[V,X]=t.useState(0),[Z,ee]=t.useState(""),[te,ae]=t.useState(""),[se,ne]=t.useState(!1),[re,le]=t.useState(""),[ie,oe]=t.useState(""),[de,ce]=t.useState(!1),[xe,me]=t.useState(""),[he,pe]=t.useState(""),[ue,ge]=t.useState(!1),[be,ye]=t.useState(""),[fe,we]=t.useState(!1),[je,Ne]=t.useState(""),[ve,_e]=t.useState(""),[ke,Ce]=t.useState(!1),[Se,Le]=t.useState(!1),[Ee,Me]=t.useState(!1),[Te,Ae]=t.useState(!1),[De,$e]=t.useState(!1),[Fe,Pe]=t.useState("warningType"),[Ue,We]=t.useState({warning_type:"",issued_to:[],penalty_amount:"",warning_message:"",warning_action:""}),[ze,Ie]=t.useState(""),[Be,Oe]=t.useState(null),[Re,Ge]=t.useState([]),[Ye,Je]=t.useState([]),[qe,He]=t.useState(null),[Ke,Qe]=t.useState(null),Ve=t.useRef(null),Xe=t.useRef(null),Ze=t.useRef(null),et=t.useRef(null),tt=t.useRef(null),at=t.useRef(null),st=t.useRef(null),[nt,rt]=t.useState(!1),[lt,it]=t.useState(!1),[ot,dt]=t.useState(!1),[ct,xt]=t.useState(!1),[mt,ht]=t.useState(!1),[pt,ut]=t.useState(!1),[gt,bt]=t.useState([]),[yt,ft]=t.useState(!1),[wt,jt]=t.useState([]),[Nt,vt]=t.useState(!1),[_t,kt]=t.useState(!1),[Ct,St]=t.useState({department_id:"",employee_id:"",warning_type:"",start_date:null,end_date:null,penalty_amount_min:"",penalty_amount_max:"",penalty_amount_sort:""}),[Lt,Et]=t.useState({warningType:"",department:"",employee:""}),[Mt,Tt]=t.useState({warningType:!1,department:!1,employee:!1}),[At,Dt]=t.useState({open:!1,message:"",severity:"info"}),$t=(e,t,a,s)=>{if(t.current){const n=300,r=t.current.scrollLeft,l="left"===e?r-n:r+n;t.current.scrollTo({left:l,behavior:"smooth"}),setTimeout(()=>{Ft(t,a,s)},100)}},Ft=(e,t,a)=>{if(e.current){const{scrollLeft:s,scrollWidth:n,clientWidth:r}=e.current;t(s>0),a(s<n-r-1)}},Pt=e=>$t(e,tt,rt,it),Ut=e=>$t(e,at,dt,xt),Wt=e=>$t(e,st,ht,ut),[zt,It]=t.useState([]),[Bt,Ot]=t.useState(!1),Rt=()=>{const e=localStorage.getItem("userData");if(e)try{const{user_id:t}=JSON.parse(e);return t}catch(t){}return null},Gt=()=>{const e=localStorage.getItem("userData");if(e)try{const t=JSON.parse(e);return t.full_name||t.name||`${t.first_name||""} ${t.last_name||""}`.trim()||t.username||"Unknown User"}catch(t){}return"Unknown User"};a("warnings"),Rt();const Yt=()=>s("warnings"),Jt=()=>n("warnings"),qt=()=>Yt(),Ht=()=>Jt(),Kt=()=>{const e=localStorage.getItem("userData");if(e)try{const t=JSON.parse(e),a=t.access_token||t.token;if(a&&"undefined"!==a)return{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}catch(t){}return{"Content-Type":"application/json"}},Qt=(e,t="info")=>{Dt({open:!0,message:e,severity:t})},Vt=()=>{const e=a("warnings");return{can_view_own:!0,can_view_all:Yt(),can_view_team:Jt(),can_add:w("warnings"),can_edit:Jt(),can_delete:(()=>{const e=JSON.parse(localStorage.getItem("userPermissions")||"[]");if(Array.isArray(e))for(const t of e)if(t&&("warnings"===t.page||"Warnings"===t.page)){if(Array.isArray(t.actions))return t.actions.includes("delete")||t.actions.includes("all");if("delete"===t.actions||"all"===t.actions)return!0}return!1})(),can_export:Jt(),permission_level:e}};t.useEffect(()=>{if(!Rt())return void Qt("User not authenticated. Please log in again.","error");const e=Vt();P(e),ea(),ta(),aa(),sa(),na(),ra(),la()},[]),t.useEffect(()=>{const e=()=>{const e=Vt();P(e)};return window.addEventListener("permissionsUpdated",e),()=>{window.removeEventListener("permissionsUpdated",e)}},[]),t.useEffect(()=>{ra(),la()},[Ct,q,K,Y]),t.useEffect(()=>{},[U]),t.useEffect(()=>{const e=e=>{Ve.current&&!Ve.current.contains(e.target)&&ne(!1),Xe.current&&!Xe.current.contains(e.target)&&ce(!1),Ze.current&&!Ze.current.contains(e.target)&&ge(!1),et.current&&!et.current.contains(e.target)&&we(!1)},t=e=>{"Escape"===e.key&&Xt()};if(de||se||ue||fe)return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[de,se,ue,fe]),t.useEffect(()=>{Ft(tt,rt,it),Ft(at,dt,xt),Ft(st,ht,ut)},[v,z]);const Xt=()=>{ce(!1),ne(!1),ge(!1),we(!1)},Zt=e=>{switch(Xt(),e){case"employee":ne(!0);break;case"department":ce(!0);break;case"warningType":ge(!0);break;case"warningAction":we(!0)}},ea=async()=>{try{const e=Rt(),t=new URLSearchParams;e&&t.append("user_id",e);const a=await fetch(`${N}/warnings/types/list?${t}`,{headers:Kt()});if(a.ok){const e=await a.json();M(e.warning_types||[])}}catch(e){}},ta=async()=>{try{const e=Rt(),t=new URLSearchParams;e&&t.append("user_id",e);const a=await fetch(`${N}/warnings/mistake-types/list?${t}`,{headers:Kt()});if(a.ok){const e=await a.json();A(e.mistake_types||[])}}catch(e){}},aa=async()=>{try{const e=Rt(),t=new URLSearchParams;e&&t.append("user_id",e);const a=await fetch(`${N}/warnings/warning-actions/list?${t}`,{headers:Kt()});if(a.ok){const e=await a.json();$(e.warning_actions||[])}}catch(e){}},sa=async()=>{try{const e=Rt(),t=new URLSearchParams;e&&t.append("user_id",e);const a=await fetch(`${N}/users/?${t}`,{headers:Kt()});if(a.ok){const e=(await a.json()||[]).map(e=>({id:e._id,employee_id:e.employee_id,user_id:e._id,name:`${e.first_name} ${e.last_name}`.trim(),email:e.email,designation:e.designation,department_id:e.department_id,department_name:e.department_name||"Unknown Department"}));C(e)}else await a.text()}catch(e){}},na=async()=>{try{const e=Rt(),t=await fetch(`${N}/departments/?user_id=${e}`,{headers:Kt()});if(t.ok){const e=(await t.json()||[]).map(e=>({id:e._id||e.id,name:e.name,...e}));L(e)}else await t.text()}catch(e){}},ra=async()=>{G(!0);try{const e=Rt();let t=new URLSearchParams({page:q+1,per_page:K,...Object.fromEntries(Object.entries(Ct).filter(([e,t])=>null!==t&&""!==t).map(([e,t])=>t instanceof Date?[e,j(t,"yyyy-MM-dd")]:[e,t]))});e&&t.append("user_id",e),qt()||(Ht()?0===Y?t.append("team_warnings","true"):1===Y&&t.append("my_warnings","true"):0===Y&&t.append("my_warnings","true"));const a=await fetch(`${N}/warnings/?${t}`,{headers:Kt()});if(a.ok){const e=await a.json(),t=e.warnings||[];_(t),X(e.total||0);let s=e.stats||{};if(!s.total_warnings||!s.total_penalty){const e=new Set;let a=0;t.forEach(t=>{(t.issued_to||t.employee_id)&&e.add(t.issued_to||t.employee_id);const s=parseFloat(t.penalty_amount)||0;a+=s}),s={total_warnings:t.length,total_employees:e.size,total_penalty:a,avg_penalty:t.length>0?Math.round(a/t.length):0}}W(s)}}catch(e){}finally{G(!1)}},la=async()=>{try{const e=Rt(),t=new URLSearchParams;e&&t.append("user_id",e),Ct.department_id&&t.append("department_id",Ct.department_id);const a=await fetch(`${N}/warnings/ranking/employees?${t}`,{headers:Kt()});if(a.ok){const e=await a.json();I(e.rankings||[])}}catch(e){}},ia=(e,t)=>{We(a=>{const s={...a,[e]:t};return"issued_to"===e&&t&&t.length>0?xa(null,s.warning_type):"warning_type"===e&&t?xa(null,t):("issued_to"!==e||t&&0!==t.length)&&("warning_type"!==e||t)||(It([]),Ot(!1)),s})},oa=(e,t)=>{St(a=>({...a,[e]:t}))},da=()=>{St({department_id:"",employee_id:"",warning_type:"",start_date:null,end_date:null,penalty_amount_min:"",penalty_amount_max:"",penalty_amount_sort:""}),Et({warningType:"",department:"",employee:""}),Tt({warningType:!1,department:!1,employee:!1})},ca=()=>ze&&""!==ze?k.filter(e=>e.department_id===ze||e.dept_id===ze||e.departmentId===ze):k,xa=(e=null,t=null)=>{const a=e?[e]:Re.length>0?Re:Ue.issued_to&&Ue.issued_to.length>0?Ue.issued_to:[],s=t||Ue.warning_type;if(!a.length||!s)return It([]),void Ot(!1);if(a.length>0&&s){const e=v.filter(e=>{const t=e.issued_to||e.employee_id,n=t&&a.some(e=>e.toString()===t.toString()),r=e.warning_type===s;return n&&r});if(It(e),Ot(e.length>0),e.length>0){const t=[...new Set(e.map(e=>e.issued_to_name))],n=a.map(e=>k.find(t=>t._id===e)?.name||"Unknown");1===a.length?Qt(`Found ${e.length} previous "${s}" warning(s) for ${n[0]}`,"info"):Qt(`Found ${e.length} previous "${s}" warning(s) across ${t.length} of the selected employees`,"info")}}},ma=(e=[],t=null)=>{const a=e||[],s=t||Ue.warning_type;if(!a.length||!s)return It([]),void Ot(!1);if(a.length>0&&s){const e=v.filter(e=>{const t=e.issued_to||e.employee_id,n=t&&a.some(e=>e.toString()===t.toString()),r=e.warning_type===s;return n&&r});if(It(e),Ot(e.length>0),e.length>0){const t=[...new Set(e.map(e=>e.issued_to_name))],n=a.map(e=>k.find(t=>t._id===e)?.name||"Unknown");1===a.length?Qt(`Found ${e.length} previous "${s}" warning(s) for ${n[0]}`,"info"):Qt(`Found ${e.length} previous "${s}" warning(s) across ${t.length} of the selected employees`,"info")}}},ha=()=>{ae(""),le(""),Ge([]),Je([]),oe(""),me(""),pe(""),ye(""),Ne(""),Xt()},pa=async e=>{try{const t=Rt(),a=await fetch(`${N}/warnings/${e}?user_id=${t}`,{method:"DELETE",headers:Kt()});if(a.ok){const e=await a.json();if(e.success)return Qt("Warning deleted successfully","success"),ra(),!0;throw new Error(e.message||"Failed to delete warning")}{const e=await a.json();throw new Error(e.detail||"Failed to delete warning")}}catch(t){throw t}},ua=()=>{kt(!_t),_t&&(jt([]),vt(!1))},ga=e=>{wt.includes(e)?(jt(wt.filter(t=>t!==e)),vt(!1)):jt([...wt,e])},ba=()=>{jt(Nt?[]:paginatedWarnings.map(e=>e.id)),vt(!Nt)},ya=async()=>{if(0===wt.length)return void Qt("No warnings selected for deletion","error");if(!window.confirm(`Are you sure you want to delete ${wt.length} warning(s)?`))return;let e=0,t=0;const a=[];G(!0);try{for(const n of wt)try{await pa(n),e++}catch(s){t++,a.push(`Warning ${n}: ${s.message||"Unknown error"}`)}e>0&&0===t?Qt(`Successfully deleted ${e} warning(s)`,"success"):e>0&&t>0?Qt(`Deleted ${e} warning(s), but ${t} failed. Check console for details.`,"warning"):t>0&&Qt("Failed to delete warnings. Check console for details.","error"),jt([]),vt(!1),kt(!1),await ra()}catch(s){Qt("Error deleting warnings","error")}finally{G(!1)}},fa=()=>{jt([]),vt(!1),kt(!1)},wa=async()=>{try{if(!Ke||!Ke.id)return void Qt("No warning selected for deletion","error");const e=Rt(),t=await fetch(`${N}/warnings/${Ke.id}?user_id=${e}`,{method:"DELETE",headers:Kt()});if(t.ok){const e=await t.json();e.success?(Qt("Warning deleted successfully","success"),Ae(!1),Qe(null),ra()):Qt(e.message||"Failed to delete warning","error")}else{const e=await t.json();Qt(e.detail||"Failed to delete warning","error")}}catch(e){Qt("Error deleting warning","error")}},ja=()=>{We({warning_type:"",issued_to:"",penalty_amount:"",warning_message:"",warning_action:""}),Ie(""),It([]),Ot(!1),ha(),Ce(!0)},Na=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(t){return"Invalid Date"}},va=v.filter(e=>{const t=!Ct.warning_type||e.warning_type===Ct.warning_type,a=!Ct.department_id||e.department_id===Ct.department_id,s=!Ct.employee_id||e.issued_to===Ct.employee_id;let n=!0;const r=parseFloat(e.penalty_amount)||0;Ct.penalty_amount_min&&""!==Ct.penalty_amount_min&&(n=n&&r>=parseFloat(Ct.penalty_amount_min)),Ct.penalty_amount_max&&""!==Ct.penalty_amount_max&&(n=n&&r<=parseFloat(Ct.penalty_amount_max));const l=!Z||e.issued_to_name?.toLowerCase().includes(Z.toLowerCase())||e.warning_type?.toLowerCase().includes(Z.toLowerCase())||e.department_name?.toLowerCase().includes(Z.toLowerCase())||e.issued_by_name?.toLowerCase().includes(Z.toLowerCase());let i=!0;if(Ct.start_date){const t=new Date(e.issued_date),a=new Date(Ct.start_date);i=i&&t>=a}if(Ct.end_date){const t=new Date(e.issued_date),a=new Date(Ct.end_date);i=i&&t<=a}return t&&a&&s&&n&&l&&i}).sort((e,t)=>"asc"===Ct.penalty_amount_sort?parseFloat(e.penalty_amount||0)-parseFloat(t.penalty_amount||0):"desc"===Ct.penalty_amount_sort?parseFloat(t.penalty_amount||0)-parseFloat(e.penalty_amount||0):0),_a=e=>({"Late Arrival":"bg-yellow-500","Late Lunch":"bg-blue-500",Abuse:"bg-red-500","Early Leave":"bg-purple-500"}[e]||"bg-gray-500");if(B)return e.jsx("div",{className:"min-h-screen bg-black text-white font-sans flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-400 mb-4",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Please refresh the page to try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Refresh Page"})]})});try{return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n    .sticky-table-container {\n      max-height: 600px;\n      overflow-y: auto;\n      overflow-x: auto;\n      border-radius: 12px;\n    }\n    \n    .sticky-header {\n      position: sticky;\n      top: 0;\n      background: white;\n      z-index: 10;\n      box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    }\n    \n    .sticky-th {\n      position: sticky;\n      top: 0;\n      background: white;\n      z-index: 10;\n      border-bottom: 2px solid #e5e7eb;\n    }\n    \n    .similar-warnings-row:nth-child(even) {\n      background-color: #f9fafb;\n    }\n    \n    .similar-warnings-row:nth-child(odd) {\n      background-color: #ffffff;\n    }\n    \n    .similar-warnings-row:hover {\n      background-color: #f3f4f6 !important;\n    }\n  "}),e.jsxs("div",{className:"min-h-screen bg-black text-white font-sans overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 opacity-[0.02] pointer-events-none z-0",style:{backgroundImage:"radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0)",backgroundSize:"20px 20px"}}),e.jsx("div",{className:"relative z-10 flex h-screen",children:e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{}),e.jsx("div",{className:"flex flex-wrap gap-3",children:F.can_add&&e.jsxs("button",{className:"bg-[#03b0f5] hover:bg-red-700 text-white px-4 py-2 rounded flex items-center gap-2",onClick:ja,children:[e.jsx(r,{className:"w-4 h-4"}),"Issue Warning"]})})]}),e.jsxs("div",{className:"bg-black rounded-xl shadow-lg",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3 px-7 mt-4 mb-6",children:qt()?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>J(0),className:`flex items-center gap-2 px-5 py-2 rounded-full font-bold text-base shadow transition-all duration-200 ${0===Y?"bg-[#03b0f5] text-white":"bg-white text-[#03b0f5] hover:bg-blue-50"}\n                      `,style:{minWidth:144,justifyContent:"center",fontSize:"1.18rem"},children:[e.jsx(l,{className:"w-4 h-4"}),"All Warnings"]}),e.jsxs("button",{onClick:()=>J(1),className:`flex items-center gap-2 px-5 py-2 rounded-full font-bold text-base shadow transition-all duration-200 ${1===Y?"bg-[#03b0f5] text-white":"bg-white text-[#03b0f5] hover:bg-blue-50"}\n                      `,style:{minWidth:144,justifyContent:"center",fontSize:"1.18rem"},children:[e.jsx(i,{className:"w-4 h-4"}),"Warnings Ranking"]})]}):Ht()?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>J(0),className:`flex items-center gap-2 px-5 py-2 rounded-full font-bold text-base shadow transition-all duration-200 ${0===Y?"bg-[#03b0f5] text-white":"bg-white text-[#03b0f5] hover:bg-blue-50"}\n                      `,style:{minWidth:144,justifyContent:"center",fontSize:"1.18rem"},children:[e.jsx(o,{className:"w-4 h-4"}),"Team Warnings"]}),e.jsxs("button",{onClick:()=>J(1),className:`flex items-center gap-2 px-5 py-2 rounded-full font-bold text-base shadow transition-all duration-200 ${1===Y?"bg-[#03b0f5] text-white":"bg-white text-[#03b0f5] hover:bg-blue-50"}\n                      `,style:{minWidth:144,justifyContent:"center",fontSize:"1.18rem"},children:[e.jsx(d,{className:"w-4 h-4"}),"My Warnings"]})]}):e.jsxs("button",{onClick:()=>J(0),className:`flex items-center gap-2 px-5 py-2 rounded-full font-bold text-base shadow\n                      ${0===Y?"bg-[#03b0f5] text-white":"bg-white text-[#03b0f5]"}\n                    `,style:{minWidth:144,justifyContent:"center",fontSize:"1.18rem"},children:[e.jsx(d,{className:"w-4 h-4"}),"My Warnings"]})}),e.jsx("div",{className:"p-6",children:R?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-cyan-500"}),e.jsx("span",{className:"ml-3 text-cyan-500 font-semibold mt-2",children:"Loading..."})]})}):e.jsx(e.Fragment,{children:qt()?e.jsxs(e.Fragment,{children:[0===Y&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[null,!F?.can_delete&&!qt()||_t?(F?.can_delete||qt())&&_t?e.jsxs("div",{className:"flex items-center gap-6 bg-gray-900 rounded-lg p-3",children:[e.jsxs("label",{className:"flex items-center cursor-pointer text-[#03B0F5] font-bold",children:[e.jsx("input",{type:"checkbox",className:"accent-blue-500 mr-2 cursor-pointer",checked:Nt,onChange:ba,style:{width:18,height:18}}),"Select All"]}),e.jsxs("span",{className:"text-white font-semibold",children:[wt.length," row",1!==wt.length?"s":""," selected"]}),e.jsxs("button",{className:"px-3 py-1 bg-red-600 text-white rounded font-bold hover:bg-red-700 transition",onClick:ya,disabled:0===wt.length,children:["Delete (",wt.length,")"]}),e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded font-bold hover:bg-gray-700 transition",onClick:fa,children:"Cancel"})]}):null:e.jsx("button",{onClick:ua,className:"bg-[#03B0F5] text-white px-5 py-3 rounded-lg font-bold shadow hover:bg-[#0280b5] transition text-base",children:"Select"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"px-4 py-2 rounded hover:bg-gray-700 transition flex items-center gap-2 "+(Object.values(Ct).some(e=>e&&""!==e)?"bg-[#03b0f5] text-white":"bg-gray-600 text-white"),onClick:()=>$e(!0),children:[e.jsx(c,{className:"w-4 h-4"}),"More Filters",Object.values(Ct).some(e=>e&&""!==e)&&e.jsx("span",{className:"bg-white text-[#03b0f5] px-2 py-1 rounded-full text-xs font-bold",children:"Active"})]}),e.jsxs("div",{className:"relative w-[350px]",children:[e.jsx("input",{type:"text",placeholder:"Search by employee, type, department...",value:Z,onChange:e=>ee(e.target.value),className:"w-full py-3 pl-12 pr-4 bg-[#1b2230] text-gray-300 rounded-lg border border-gray-600 focus:outline-none focus:border-[#03b0f5] focus:ring-1 focus:ring-[#03b0f5] text-sm placeholder-gray-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(x,{className:"w-5 h-5 text-gray-500"})}),Z&&e.jsx("button",{onClick:()=>ee(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-300",children:e.jsx(m,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"relative",children:[nt&&e.jsx("button",{onClick:()=>Pt("left"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll left",children:e.jsx(h,{className:"w-9 h-9"})}),lt&&e.jsx("button",{onClick:()=>Pt("right"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll right",children:e.jsx(p,{className:"w-9 h-9"})}),e.jsx("div",{ref:tt,className:"bg-black rounded-lg overflow-x-auto max-h-[calc(100vh-200px)] overflow-y-auto px-2",onScroll:()=>Ft(tt,rt,it),children:e.jsxs("table",{className:"min-w-[616px] w-full rounded-xl overflow-hidden",children:[e.jsx("thead",{className:"bg-white sticky top-0 z-10 sticky-header",children:e.jsxs("tr",{children:[_t&&e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:e.jsx("input",{type:"checkbox",checked:Nt,onChange:ba,className:"rounded border-gray-300"})}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"#"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"DATE & TIME"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"ISSUED BY"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"DEPARTMENT"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"ISSUED TO"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"MISTAKE TYPE"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"WARNING ACTION"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"PENALTY AMOUNT"})]})}),e.jsx("tbody",{children:0===va.length?e.jsx("tr",{children:e.jsx("td",{colSpan:_t?"9":"8",className:"text-center py-10 text-gray-500",children:"No warnings found"})}):va.map((t,a)=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800 transition cursor-pointer",onClick:()=>{He(t),Me(!0)},children:[_t&&e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",onClick:e=>e.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:wt.includes(t.id),onChange:()=>ga(t.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white font-semibold",children:q*K+a+1}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-gray-300",children:new Date(t.issued_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","")}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-md",children:t.issued_by_name?.charAt(0)?.toUpperCase()||"U"}),e.jsx("div",{className:"text-white font-semibold",children:t.issued_by_name||"Unknown"})]})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-gray-300",children:t.department_name||"N/A"}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-md",children:t.issued_to_name?.charAt(0)?.toUpperCase()||"U"}),e.jsx("div",{className:"text-white font-semibold",children:t.issued_to_name||"N/A"})]})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium text-white ${_a(t.warning_type)}`,children:t.warning_type||"N/A"})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 rounded text-sm font-medium text-white bg-blue-600",children:t.warning_action||"No Action"})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-red-400 font-semibold",children:e.jsxs("span",{children:["â‚¹",Number(t.penalty_amount||0).toLocaleString("en-IN")]})})]},t.id))})]})})]}),V>K&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-gray-400",children:["Showing ",Math.min(q*K+1,V)," to ",Math.min((q+1)*K,V)," of ",V," warnings"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(Math.max(0,q-1)),disabled:0===q,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-white",children:["Page ",q+1," of ",Math.ceil(V/K)]}),e.jsx("button",{onClick:()=>H(Math.min(Math.ceil(V/K)-1,q+1)),disabled:q>=Math.ceil(V/K)-1,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Next"})]})]})]}),1===Y&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Employee Rankings"}),e.jsxs("div",{className:"text-base text-gray-300 bg-[#1b2230] px-4 py-2 rounded-lg border border-gray-600",children:["Top ",z.length," employees by warnings"]})]}),e.jsxs("div",{className:"relative",children:[ot&&e.jsx("button",{onClick:()=>Ut("left"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll left",children:e.jsx(h,{className:"w-9 h-9"})}),ct&&e.jsx("button",{onClick:()=>Ut("right"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll right",children:e.jsx(p,{className:"w-9 h-9"})}),e.jsx("div",{ref:at,className:"overflow-auto max-h-[600px]",onScroll:()=>Ft(at,dt,xt),children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white sticky top-0 z-5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap",children:"RANK"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap",children:"EMPLOYEE"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap",children:"DEPARTMENT"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap",children:"TOTAL WARNINGS"}),e.jsx("th",{className:"py-1 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap",children:"TOTAL PENALTY"})]})}),e.jsx("tbody",{children:z.map((t,a)=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800 transition cursor-pointer",children:[e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-md "+(t.rank<=3?"bg-yellow-500":"bg-gray-600"),children:t.rank}),t.rank<=3&&e.jsx("span",{className:"text-lg",children:"ðŸ†"})]})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-red-500 to-red-600 flex items-center justify-center text-white font-bold text-md",children:t.employee_name?.charAt(0)?.toUpperCase()||"U"}),e.jsx("span",{className:"text-white",children:t.employee_name})]})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white",children:t.department_name}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 rounded text-sm font-medium "+(t.total_warnings>5?"bg-red-500 text-white":"bg-orange-500 text-white"),children:t.total_warnings})}),e.jsxs("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-red-400 font-semibold",children:["â‚¹",Number(t.total_penalty).toLocaleString("en-IN")]})]},t.employee_id))})]})})]})]})]}):Ht()?e.jsxs(e.Fragment,{children:[0===Y&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-3"}),e.jsxs("div",{className:"flex items-center gap-3",children:[null,!F?.can_delete&&!qt()||_t?(F?.can_delete||qt())&&_t?e.jsxs("div",{className:"flex items-center gap-6 bg-gray-900 rounded-lg p-3",children:[e.jsxs("label",{className:"flex items-center cursor-pointer text-[#03B0F5] font-bold",children:[e.jsx("input",{type:"checkbox",className:"accent-blue-500 mr-2 cursor-pointer",checked:Nt,onChange:ba,style:{width:18,height:18}}),"Select All"]}),e.jsxs("span",{className:"text-white font-semibold",children:[wt.length," row",1!==wt.length?"s":""," selected"]}),e.jsxs("button",{className:"px-3 py-1 bg-red-600 text-white rounded font-bold hover:bg-red-700 transition",onClick:ya,disabled:0===wt.length,children:["Delete (",wt.length,")"]}),e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded font-bold hover:bg-gray-700 transition",onClick:fa,children:"Cancel"})]}):null:e.jsx("button",{onClick:ua,className:"bg-[#03B0F5] text-white px-5 py-3 rounded-lg font-bold shadow hover:bg-[#0280b5] transition text-base",children:"Select"}),e.jsxs("button",{className:"px-4 py-2 rounded hover:bg-gray-700 transition flex items-center gap-2 "+(Object.values(Ct).some(e=>e&&""!==e)?"bg-[#03b0f5] text-white":"bg-gray-600 text-white"),onClick:()=>$e(!0),children:[e.jsx(c,{className:"w-4 h-4"}),"More Filters",Object.values(Ct).some(e=>e&&""!==e)&&e.jsx("span",{className:"bg-white text-[#03b0f5] px-2 py-1 rounded-full text-xs font-bold",children:"Active"})]}),e.jsxs("div",{className:"relative w-[350px]",children:[e.jsx("input",{type:"text",placeholder:"Search by employee, type, department...",value:Z,onChange:e=>ee(e.target.value),className:"w-full py-3 pl-12 pr-4 bg-[#1b2230] text-gray-300 rounded-lg border border-gray-600 focus:outline-none focus:border-[#03b0f5] focus:ring-1 focus:ring-[#03b0f5] text-sm placeholder-gray-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(x,{className:"w-5 h-5 text-gray-500"})}),Z&&e.jsx("button",{onClick:()=>ee(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-300",children:e.jsx(m,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"relative",children:[nt&&e.jsx("button",{onClick:()=>Pt("left"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll left",children:e.jsx(h,{className:"w-9 h-9"})}),lt&&e.jsx("button",{onClick:()=>Pt("right"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll right",children:e.jsx(p,{className:"w-9 h-9"})}),e.jsx("div",{ref:tt,className:"overflow-auto max-h-[600px] sticky-table-container",onScroll:()=>Ft(tt,rt,it),children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white sticky top-0 z-10 sticky-header",children:e.jsxs("tr",{children:[_t&&e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:e.jsx("input",{type:"checkbox",checked:Nt,onChange:ba,className:"rounded border-gray-300"})}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"#"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"DATE & TIME"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"EMPLOYEE"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"WARNING TYPE"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"PENALTY"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-center whitespace-nowrap sticky-th",children:"ACTIONS"})]})}),e.jsx("tbody",{children:0===va.length?e.jsx("tr",{children:e.jsx("td",{colSpan:_t?"7":"6",className:"text-center py-10 text-gray-500",children:"No warnings found"})}):va.map((t,a)=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800 transition cursor-pointer",onClick:()=>{He(t),Me(!0)},children:[_t&&e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",onClick:e=>e.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:wt.includes(t.id),onChange:()=>ga(t.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white font-semibold",children:q*K+a+1}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-gray-300",children:new Date(t.issued_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","")}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-md",children:t.issued_to_name?.charAt(0)?.toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:t.issued_to_name}),e.jsx("div",{className:"text-gray-400 text-sm",children:t.department_name})]})]})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium text-white ${_a(t.warning_type)}`,children:t.warning_type})}),e.jsxs("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-red-400 font-semibold",children:["â‚¹",Number(t.penalty_amount).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-center py-3 px-3 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:F.can_delete&&e.jsx("button",{onClick:e=>{e.stopPropagation(),Qe(t),Ae(!0)},className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:e.jsx(u,{className:"w-4 h-4"})})})})]},t.id))})]})})]}),V>K&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-gray-400",children:["Showing ",Math.min(q*K+1,V)," to ",Math.min((q+1)*K,V)," of ",V," warnings"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(Math.max(0,q-1)),disabled:0===q,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-white",children:["Page ",q+1," of ",Math.ceil(V/K)]}),e.jsx("button",{onClick:()=>H(Math.min(Math.ceil(V/K)-1,q+1)),disabled:q>=Math.ceil(V/K)-1,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Next"})]})]})]}),1===Y&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-3"}),e.jsxs("div",{className:"flex items-center gap-3",children:[null,!F?.can_delete&&!qt()||_t?(F?.can_delete||qt())&&_t?e.jsxs("div",{className:"flex items-center gap-6 bg-gray-900 rounded-lg p-3",children:[e.jsxs("label",{className:"flex items-center cursor-pointer text-[#03B0F5] font-bold",children:[e.jsx("input",{type:"checkbox",className:"accent-blue-500 mr-2 cursor-pointer",checked:Nt,onChange:ba,style:{width:18,height:18}}),"Select All"]}),e.jsxs("span",{className:"text-white font-semibold",children:[wt.length," row",1!==wt.length?"s":""," selected"]}),e.jsxs("button",{className:"px-3 py-1 bg-red-600 text-white rounded font-bold hover:bg-red-700 transition",onClick:ya,disabled:0===wt.length,children:["Delete (",wt.length,")"]}),e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded font-bold hover:bg-gray-700 transition",onClick:fa,children:"Cancel"})]}):null:e.jsx("button",{onClick:ua,className:"bg-[#03B0F5] text-white px-5 py-3 rounded-lg font-bold shadow hover:bg-[#0280b5] transition text-base",children:"Select"}),e.jsxs("div",{className:"relative w-[350px]",children:[e.jsx("input",{type:"text",placeholder:"Search my warnings...",value:Z,onChange:e=>ee(e.target.value),className:"w-full py-3 pl-12 pr-4 bg-[#1b2230] text-gray-300 rounded-lg border border-gray-600 focus:outline-none focus:border-[#03b0f5] focus:ring-1 focus:ring-[#03b0f5] text-sm placeholder-gray-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(x,{className:"w-5 h-5 text-gray-500"})}),Z&&e.jsx("button",{onClick:()=>ee(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-300",children:e.jsx(m,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"relative",children:[mt&&e.jsx("button",{onClick:()=>Wt("left"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll left",children:e.jsx(h,{className:"w-9 h-9"})}),pt&&e.jsx("button",{onClick:()=>Wt("right"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll right",children:e.jsx(p,{className:"w-9 h-9"})}),e.jsx("div",{ref:st,className:"overflow-auto max-h-[600px] sticky-table-container",onScroll:()=>Ft(st,ht,ut),children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white sticky top-0 z-10 sticky-header",children:e.jsxs("tr",{children:[_t&&e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:e.jsx("input",{type:"checkbox",checked:Nt,onChange:ba,className:"rounded border-gray-300"})}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"#"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"DATE & TIME"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"WARNING TYPE"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"PENALTY"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"ISSUED BY"})]})}),e.jsx("tbody",{children:0===va.length?e.jsx("tr",{children:e.jsx("td",{colSpan:_t?"6":"5",className:"text-center py-10 text-gray-500",children:"No warnings found"})}):va.map((t,a)=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800 transition cursor-pointer",onClick:()=>{He(t),Me(!0)},children:[_t&&e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",onClick:e=>e.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:wt.includes(t.id),onChange:()=>ga(t.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white font-semibold",children:q*K+a+1}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-gray-300",children:new Date(t.issued_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","")}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium text-white ${_a(t.warning_type)}`,children:t.warning_type})}),e.jsxs("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-red-400 font-semibold",children:["â‚¹",Number(t.penalty_amount).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white",children:t.issued_by_name})]},t.id))})]})})]}),V>K&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-gray-400",children:["Showing ",Math.min(q*K+1,V)," to ",Math.min((q+1)*K,V)," of ",V," warnings"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(Math.max(0,q-1)),disabled:0===q,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-white",children:["Page ",q+1," of ",Math.ceil(V/K)]}),e.jsx("button",{onClick:()=>H(Math.min(Math.ceil(V/K)-1,q+1)),disabled:q>=Math.ceil(V/K)-1,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Next"})]})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-3"}),e.jsxs("div",{className:"flex items-center gap-3",children:[null,!F?.can_delete&&!qt()||_t?(F?.can_delete||qt())&&_t?e.jsxs("div",{className:"flex items-center gap-6 bg-gray-900 rounded-lg p-3",children:[e.jsxs("label",{className:"flex items-center cursor-pointer text-[#03B0F5] font-bold",children:[e.jsx("input",{type:"checkbox",className:"accent-blue-500 mr-2 cursor-pointer",checked:Nt,onChange:ba,style:{width:18,height:18}}),"Select All"]}),e.jsxs("span",{className:"text-white font-semibold",children:[wt.length," row",1!==wt.length?"s":""," selected"]}),e.jsxs("button",{className:"px-3 py-1 bg-red-600 text-white rounded font-bold hover:bg-red-700 transition",onClick:ya,disabled:0===wt.length,children:["Delete (",wt.length,")"]}),e.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded font-bold hover:bg-gray-700 transition",onClick:fa,children:"Cancel"})]}):null:e.jsx("button",{onClick:ua,className:"bg-[#03B0F5] text-white px-5 py-3 rounded-lg font-bold shadow hover:bg-[#0280b5] transition text-base",children:"Select"}),e.jsxs("div",{className:"relative w-[350px]",children:[e.jsx("input",{type:"text",placeholder:"Search my warnings...",value:Z,onChange:e=>ee(e.target.value),className:"w-full py-3 pl-12 pr-4 bg-[#1b2230] text-gray-300 rounded-lg border border-gray-600 focus:outline-none focus:border-[#03b0f5] focus:ring-1 focus:ring-[#03b0f5] text-sm placeholder-gray-500"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(x,{className:"w-5 h-5 text-gray-500"})}),Z&&e.jsx("button",{onClick:()=>ee(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-300",children:e.jsx(m,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"relative",children:[mt&&e.jsx("button",{onClick:()=>Wt("left"),className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll left",children:e.jsx(h,{className:"w-9 h-9"})}),pt&&e.jsx("button",{onClick:()=>Wt("right"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-50 text-white p-4 rounded-full shadow-lg transition-all duration-200 opacity-20 hover:opacity-100",style:{backgroundColor:"rgba(37, 99, 235, 1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(29, 78, 216, 1)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(37, 99, 235, 1)","aria-label":"Scroll right",children:e.jsx(p,{className:"w-9 h-9"})}),e.jsx("div",{ref:st,className:"overflow-auto max-h-[600px] sticky-table-container",onScroll:()=>Ft(st,ht,ut),children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-white sticky top-0 z-10 sticky-header",children:e.jsxs("tr",{children:[_t&&e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:e.jsx("input",{type:"checkbox",checked:Nt,onChange:ba,className:"rounded border-gray-300"})}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"#"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"DATE & TIME"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"WARNING TYPE"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"PENALTY"}),e.jsx("th",{className:"py-3 px-3 text-lg font-extrabold text-[#03b0f5] text-left whitespace-nowrap sticky-th",children:"ISSUED BY"})]})}),e.jsx("tbody",{children:0===va.length?e.jsx("tr",{children:e.jsx("td",{colSpan:_t?"6":"5",className:"text-center py-10 text-gray-500",children:"No warnings found"})}):va.map((t,a)=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800 transition cursor-pointer",onClick:()=>{He(t),Me(!0)},children:[_t&&e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",onClick:e=>e.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:wt.includes(t.id),onChange:()=>ga(t.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white font-semibold",children:q*K+a+1}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-gray-300",children:new Date(t.issued_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","")}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium text-white ${_a(t.warning_type)}`,children:t.warning_type})}),e.jsxs("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-red-400 font-semibold",children:["â‚¹",Number(t.penalty_amount).toLocaleString("en-IN")]}),e.jsx("td",{className:"text-left py-3 px-3 text-md whitespace-nowrap text-white",children:t.issued_by_name})]},t.id))})]})})]}),V>K&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"text-gray-400",children:["Showing ",Math.min(q*K+1,V)," to ",Math.min((q+1)*K,V)," of ",V," warnings"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(Math.max(0,q-1)),disabled:0===q,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Previous"}),e.jsxs("span",{className:"px-3 py-2 text-white",children:["Page ",q+1," of ",Math.ceil(V/K)]}),e.jsx("button",{onClick:()=>H(Math.min(Math.ceil(V/K)-1,q+1)),disabled:q>=Math.ceil(V/K)-1,className:"px-3 py-2 bg-gray-600 text-white rounded disabled:opacity-50 hover:bg-gray-700 transition",children:"Next"})]})]})]})})})]})]})})}),ke&&e.jsx("div",{className:"bg-transparent fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-4xl mx-auto space-y-6 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold",onClick:()=>{Ce(!1),We({warning_type:"",issued_to:"",penalty_amount:"",warning_message:"",warning_action:""}),Ie(""),bt([]),It([]),Ot(!1),ha()},"aria-label":"Close",type:"button",children:"Ã—"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{if(!(Ue.warning_type&&Ue.issued_to.length&&Ue.penalty_amount&&Ue.warning_action)){const e=[];Ue.warning_type||e.push("Warning Type"),Ue.issued_to.length||e.push("Employee(s)"),Ue.penalty_amount||e.push("Penalty Amount"),Ue.warning_action||e.push("Warning Action");const t=`Please fill in all required fields: ${e.join(", ")}`;return void Qt(t,"error")}const e=Rt(),t=Ue.issued_to.map(async t=>{const a={warning_type:Ue.warning_type,issued_to:t,penalty_amount:parseFloat(Ue.penalty_amount),warning_message:Ue.warning_message||"",warning_action:Ue.warning_action},s=await fetch(`${N}/warnings/?user_id=${e}`,{method:"POST",headers:Kt(),body:JSON.stringify(a)});if(!s.ok){const e=await s.json();throw new Error(`Failed to create warning for employee ${t}: ${e.detail||e.message||"Unknown error"}`)}return s.json()}),a=(await Promise.all(t)).filter(e=>e.success).length;if(a===Ue.issued_to.length)Qt(`Successfully created ${a} warning(s) for ${a} employee(s)`,"success"),Ce(!1),We({warning_type:"",issued_to:[],penalty_amount:"",warning_message:"",warning_action:""}),Ie(""),Ge([]),Je([]),It([]),Ot(!1),ha(),ra();else{const e=Ue.issued_to.length-a;Qt(`Created ${a} warnings, but ${e} failed`,"warning"),ra()}}catch(e){Qt("Error creating warnings: "+e.message,"error")}})()},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Date & Time"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",",""),readOnly:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Issued By"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:Gt(),readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",ref:Xe,children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Department"}),e.jsxs("div",{className:"w-full px-3 py-2 border border-cyan-400 rounded bg-white cursor-pointer flex justify-between items-center",onClick:()=>Zt("department"),children:[e.jsx("span",{className:xe?"text-black":"text-gray-500",children:xe||"Select Departments"}),e.jsx("svg",{className:"w-4 h-4 transition-transform "+(de?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),de&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search departments...",value:ie,onChange:e=>oe(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 text-black",autoFocus:!0})]})}),e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-black",onClick:()=>{Ie(""),me("All Departments"),oe(""),ce(!1)},children:"All Departments"}),S.filter(e=>e.name.toLowerCase().includes(ie.toLowerCase())).map(t=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-black",onClick:()=>{Ie(t.id),me(t.name),oe(""),ce(!1)},children:t.name},t.id)),0===S.filter(e=>e.name.toLowerCase().includes(ie.toLowerCase())).length&&ie&&e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No departments found"})]})]})]}),e.jsxs("div",{className:"relative flex-1",ref:Ve,children:[e.jsxs("label",{className:"block font-bold text-gray-700 mb-1",children:["Issued To (Select multiple employees) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 border border-cyan-400 rounded-md bg-white p-1 pr-2 min-h-[42px]",children:[Ye.length>0?Ye.map(t=>{const a=t.name.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return e.jsxs("div",{className:"bg-blue-100 text-blue-800 py-1 px-3 rounded-md flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-2 text-xs flex-shrink-0",children:a}),e.jsx("span",{children:t.name}),e.jsx("button",{type:"button",className:"ml-2 text-blue-500 hover:text-blue-700",onClick:()=>(e=>{const t=Re.filter(t=>t!==e),a=Ye.filter(t=>t.id!==e);Ge(t),Je(a),We(e=>({...e,issued_to:t})),0===t.length?(It([]),Ot(!1)):ma(t,Ue.warning_type)})(t.id),children:"Ã—"})]},t.id)}):e.jsx("span",{className:"text-gray-500 py-1 px-2",children:"Select the Employees"}),e.jsx("button",{type:"button",className:"text-blue-600 font-medium hover:text-blue-800 ml-auto",onClick:()=>Zt("employee"),children:Ye.length>0?"+ Add more":"+ Add employees"})]}),se&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[e.jsx("div",{className:"p-3 bg-white bg-opacity-90 rounded-t-md",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search employees...",value:te,onChange:e=>ae(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-cyan-400 rounded text-black font-bold focus:outline-none focus:border-blue-500",autoFocus:!0}),te&&e.jsx("button",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",onClick:()=>ae(""),type:"button",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto mb-4 border rounded-lg bg-white bg-opacity-90",children:[ca().filter(e=>e.name&&e.name.toLowerCase().includes(te.toLowerCase())).map(t=>{const a=t._id||t.id||t.user_id||t.employee_id,s=Re.includes(a),n=t.name||t.employee_name||t.full_name||"Unknown",r=n.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return e.jsxs("div",{className:"p-3 border-b last:border-b-0 cursor-pointer text-black transition hover:bg-gray-100 flex items-center "+(s?"bg-blue-50":""),onClick:()=>(e=>{const t=e._id||e.id||e.user_id||e.employee_id,a=e.name||e.employee_name||e.full_name||"Unknown",s=e.designation||e.role||e.position||e.job_title||"";if(Re.includes(t))return;const n=s?`${a} (${s})`:a,r=[...Re,t],l=[...Ye,{id:t,name:n}];Ge(r),Je(l),We(e=>({...e,issued_to:r})),ae(""),ma(r,Ue.warning_type)})(t),children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#03B0F5] text-white flex items-center justify-center mr-3 flex-shrink-0 text-sm font-medium",children:r}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:n}),e.jsx("span",{className:"text-xs text-gray-600",children:t.department_name||t.department||"Unknown Department"})]}),e.jsx("div",{className:`w-5 h-5 border rounded ${s?"bg-blue-500 border-blue-500":"border-gray-300"} flex items-center justify-center`,children:s&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},a)}),0===ca().filter(e=>e.name&&e.name.toLowerCase().includes(te.toLowerCase())).length&&te&&e.jsx("div",{className:"p-3 text-gray-500 text-center",children:"No employees found"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",ref:Ze,children:[e.jsxs("label",{className:"block font-bold text-gray-700 mb-1",children:["Mistake Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"w-full px-3 py-2 border border-cyan-400 rounded bg-white cursor-pointer flex justify-between items-center",onClick:()=>Zt("warningType"),children:[e.jsx("span",{className:be?"text-black":"text-gray-500",children:be||"Select Mistake Type"}),e.jsx("svg",{className:"w-4 h-4 transition-transform "+(ue?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),ue&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search mistake types...",value:he,onChange:e=>pe(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 text-black",autoFocus:!0})]})}),e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[T.filter(e=>(e.label||e.value||"").toLowerCase().includes(he.toLowerCase())).map(t=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-black",onClick:()=>{ia("warning_type",t.value),ye(t.label||t.value),pe(""),ge(!1)},children:t.label||t.value},t.value)),0===T.filter(e=>(e.label||e.value||"").toLowerCase().includes(he.toLowerCase())).length&&he&&e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No mistake types found"})]})]})]}),e.jsxs("div",{className:"relative flex-1",ref:et,children:[e.jsxs("label",{className:"block font-bold text-gray-700 mb-1",children:["Warning Action ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"w-full px-3 py-2 border border-cyan-400 rounded bg-white cursor-pointer flex justify-between items-center",onClick:()=>Zt("warningAction"),children:[e.jsx("span",{className:je?"text-black":"text-gray-500",children:je||"Select Warning Action"}),e.jsx("svg",{className:"w-4 h-4 transition-transform "+(fe?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),fe&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Search warning actions...",value:ve,onChange:e=>_e(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500 text-black",autoFocus:!0})]})}),e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[D.filter(e=>(e.label||e.value||"").toLowerCase().includes(ve.toLowerCase())).map(t=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-black",onClick:()=>{ia("warning_action",t.value),Ne(t.label||t.value),_e(""),we(!1)},children:t.label||t.value},t.value)),0===D.filter(e=>(e.label||e.value||"").toLowerCase().includes(ve.toLowerCase())).length&&ve&&e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No warning actions found"})]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Penalty Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"â‚¹"}),e.jsx("input",{type:"text",value:Ue.penalty_amount,onChange:e=>ia("penalty_amount",e.target.value),className:"w-full pl-8 pr-3 py-2 border border-cyan-400 rounded text-black font-bold",placeholder:"Enter penalty amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),e.jsxs("button",{type:"button",onClick:()=>document.getElementById("fileInput").click(),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2 hover:bg-blue-600 transition",children:[e.jsx(g,{className:"w-4 h-4"}),"Photo/PDF"]}),e.jsx("input",{id:"fileInput",type:"file",multiple:!0,accept:"image/*,.pdf",onChange:e=>{const t=Array.from(e.target.files);bt(e=>[...e,...t])},className:"hidden"}),gt.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:gt.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.name}),e.jsx("span",{className:"text-xs text-green-600",children:"Ready to upload"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[(t.size/1048576).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",onClick:()=>{bt(e=>e.filter((e,t)=>t!==a))},className:"text-red-500 hover:text-red-700",children:e.jsx(m,{className:"w-4 h-4"})})]},a))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Warning Message"}),e.jsx("textarea",{value:Ue.warning_message,onChange:e=>ia("warning_message",e.target.value),rows:4,className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold resize-none",placeholder:"Enter warning message..."})]}),e.jsx("div",{className:"flex gap-4 mt-6",children:e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-cyan-600 text-white font-bold rounded-lg shadow hover:bg-cyan-700 transition text-lg",children:"Issue Warning"})})]}),Bt&&zt.length>0&&e.jsxs("div",{className:"mt-8 border-t pt-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4 mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{className:"h-6 w-6 text-orange-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:Ue.warning_type&&Re.length>0?`Similar "${Ue.warning_type}" Warnings Found`:"Previous Warnings Found"}),e.jsx("p",{className:"text-sm text-gray-600",children:Ue.warning_type&&Re.length>0?`Showing all employees who have received "${Ue.warning_type}" warnings`:"Showing previous warnings for selected employee(s)"})]})]}),e.jsx("div",{className:"bg-blue-100 px-3 py-1 rounded-full",children:e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[zt.length," warning",1!==zt.length?"s":""," found"]})})]}),Ue.warning_type&&Re.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:[...new Set(zt.map(e=>e.issued_to_name))].length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Affected Employees"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["â‚¹",zt.reduce((e,t)=>e+(parseFloat(t.penalty_amount)||0),0).toLocaleString("en-IN")]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Penalties"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["â‚¹",Math.round(zt.reduce((e,t)=>e+(parseFloat(t.penalty_amount)||0),0)/zt.length).toLocaleString("en-IN")]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Penalty"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-lg",children:Ue.warning_type?`"${Ue.warning_type}" Warning History`:"Warning History"}),e.jsxs("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded text-sm",children:[zt.length," record",1!==zt.length?"s":""]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"DATE & TIME"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"ISSUED BY"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"EMPLOYEE"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"DEPARTMENT"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"MISTAKE TYPE"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"ACTION"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"PENALTY"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-bold text-gray-600",children:"MESSAGE"})]})}),e.jsx("tbody",{children:zt.sort((e,t)=>new Date(t.issued_date)-new Date(e.issued_date)).map((t,a)=>e.jsxs("tr",{className:"border-b similar-warnings-row",children:[e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-100 to-cyan-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:a+1})})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[e.jsx("div",{className:"font-medium",children:new Date(t.issued_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.issued_date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-white",children:(t.issued_by_name||"U").charAt(0).toUpperCase()})}),e.jsx("div",{className:"font-medium text-gray-700",children:t.issued_by_name||"Unknown"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-white",children:(t.issued_to_name||"U").charAt(0).toUpperCase()})}),e.jsx("div",{className:"font-medium text-gray-700",children:t.issued_to_name||"Unknown"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.department_name||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white "+("Late Arrival"===t.warning_type?"bg-yellow-500":"Late Lunch"===t.warning_type?"bg-blue-500":"Abuse"===t.warning_type?"bg-red-500":"Early Leave"===t.warning_type?"bg-purple-500":"bg-gray-500"),children:t.warning_type})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-xs font-medium",children:t.warning_action||"No Action"})}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-red-600",children:["â‚¹",Number(t.penalty_amount||0).toLocaleString("en-IN")]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-xs",children:e.jsx("div",{className:"truncate",title:t.warning_message||"No message provided",children:t.warning_message||"No message provided"})})]},`${t.id||a}`))})]})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-t",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-sm text-gray-600",children:[e.jsx("div",{children:Ue.warning_type?e.jsxs("span",{children:[e.jsx("strong",{children:[...new Set(zt.map(e=>e.issued_to_name))].length})," different employee(s) have received ",e.jsxs("strong",{children:['"',Ue.warning_type,'"']})," warnings"]}):e.jsxs("span",{children:["Showing ",e.jsx("strong",{children:zt.length})," warning(s) for selected employee(s)"]})}),e.jsxs("div",{children:["Most recent: ",e.jsx("strong",{children:new Date(Math.max(...zt.map(e=>new Date(e.issued_date)))).toLocaleDateString("en-GB")})]})]})})]})]})]})}),Ee&&qe&&e.jsx("div",{className:"bg-transparent fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-2xl mx-auto space-y-2 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>Me(!1),className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold","aria-label":"Close",type:"button",children:"Ã—"}),e.jsx("h2",{className:"text-xl font-bold text-blue-500 mb-4",children:"WARNING DETAILS"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Date & Time"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:qe.issued_date?new Date(qe.issued_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",",""):Na(qe.issued_date),readOnly:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Created By"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:qe.issued_by_name||"Unknown",readOnly:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:qe.department_name||"N/A",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Employee"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:qe.issued_to_name||"Unknown Employee",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Mistake Type"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:qe.warning_type||"N/A",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Warning Action"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:qe.warning_action||"N/A",readOnly:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Penalty Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-black font-bold",children:"â‚¹"}),e.jsx("input",{type:"text",className:"w-full pl-8 pr-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:Number(qe.penalty_amount).toLocaleString("en-IN"),readOnly:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Warning Message"}),e.jsx("textarea",{value:qe.warning_message||"No message provided",rows:4,className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100 resize-none",readOnly:!0})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 mt-6",children:e.jsx("button",{onClick:()=>Me(!1),className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition font-bold",children:"Close"})})]})}),Se&&e.jsx("div",{className:"bg-transparent fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-2xl mx-auto space-y-2 max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>Le(!1),className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold","aria-label":"Close",type:"button",children:"Ã—"}),e.jsx("h2",{className:"text-xl font-bold text-blue-500 mb-4",children:"EDIT WARNING"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{if(!Be||!Be.id)return void Qt("No warning selected for editing","error");const e=Rt(),t={warning_type:Ue.warning_type,penalty_amount:parseFloat(Ue.penalty_amount),warning_message:Ue.warning_message||""},a=await fetch(`${N}/warnings/${Be.id}?user_id=${e}`,{method:"PUT",headers:Kt(),body:JSON.stringify(t)});if(a.ok){const e=await a.json();e.success?(Qt("Warning updated successfully","success"),Le(!1),Oe(null),We({warning_type:"",issued_to:"",penalty_amount:"",warning_message:"",warning_action:""}),ra()):Qt(e.message||"Failed to update warning","error")}else{const e=await a.json();Qt(e.detail||"Failed to update warning","error")}}catch(e){Qt("Error updating warning","error")}})()},children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Date & Time"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:Be?new Date(Be.issue_date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",",""):"",readOnly:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Created By"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:Be?Be.issued_by_name||"Unknown":"",readOnly:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:Be?Be.department_name||"N/A":"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Employee"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold bg-gray-100",value:Be?Be.issued_to_name||"Unknown Employee":"",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Mistake Type *"}),e.jsxs("select",{value:Ue.warning_type,onChange:e=>ia("warning_type",e.target.value),className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold",required:!0,children:[e.jsx("option",{value:"",children:"Select Mistake Type"}),T.map(t=>{const a=t.value||t,s=t.label||t;return e.jsx("option",{value:a,children:s},a)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Penalty Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-black font-bold",children:"â‚¹"}),e.jsx("input",{type:"number",value:Ue.penalty_amount,onChange:e=>ia("penalty_amount",e.target.value),className:"w-full pl-8 pr-3 py-2 border border-cyan-400 rounded text-black font-bold",placeholder:"Enter penalty amount",required:!0,min:"0"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block font-bold text-gray-700 mb-1",children:"Warning Message"}),e.jsx("textarea",{value:Ue.warning_message,onChange:e=>ia("warning_message",e.target.value),rows:4,className:"w-full px-3 py-2 border border-cyan-400 rounded text-black font-bold resize-none",placeholder:"Enter detailed warning message..."})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>Le(!1),className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition font-bold",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-3 bg-cyan-600 text-white rounded-xl shadow hover:bg-cyan-700 transition font-bold",children:"Update Warning"})]})]})]})}),Te&&Ke&&e.jsx("div",{className:"bg-transparent fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-2xl w-full max-w-md mx-auto space-y-2",children:[e.jsx("button",{onClick:()=>Ae(!1),className:"absolute right-2 top-2 text-gray-500 hover:text-red-500 transition text-2xl font-bold","aria-label":"Close",type:"button",children:"Ã—"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"CONFIRM DELETE"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(l,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Delete Warning"}),e.jsx("p",{className:"text-gray-600",children:"This action cannot be undone"})]})]}),e.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete the warning issued to ",e.jsx("strong",{children:Ke.issued_to_name})," for ",e.jsx("strong",{children:Ke.warning_type}),"?"]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 mt-6",children:[e.jsx("button",{onClick:()=>Ae(!1),className:"px-6 py-3 bg-gray-400 text-white rounded-xl shadow hover:bg-gray-500 transition font-bold",children:"Cancel"}),e.jsx("button",{onClick:wa,className:"px-6 py-3 bg-red-600 text-white rounded-xl shadow hover:bg-red-700 transition font-bold",children:"Delete Warning"})]})]})}),De&&e.jsx("div",{className:"bg-transparent fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-[#1b2230] border border-gray-600 rounded-xl shadow-2xl p-1 w-[700px] max-w-[90vw] h-[550px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Filter Warnings"}),e.jsx("button",{onClick:()=>$e(!1),className:"text-gray-400 hover:text-white text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 flex-1 overflow-hidden",children:[e.jsxs("div",{className:"col-span-1 border-r border-gray-600 pr-4",children:[e.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Filter Categories"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>Pe("warningType"),className:"w-full text-left px-4 py-3 rounded-lg transition-colors "+("warningType"===Fe?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#2a3441]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base",children:"Warning Type"})]}),Ct.warning_type&&e.jsx("span",{className:"bg-red-500 text-white text-sm rounded-full h-6 w-6 flex items-center justify-center",children:"1"})]})}),e.jsx("button",{onClick:()=>Pe("department"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("department"===Fe?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#2a3441]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Department"]}),Ct.department_id&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"1"})]})}),e.jsx("button",{onClick:()=>Pe("employee"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("employee"===Fe?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#2a3441]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),"Employee"]}),Ct.employee_id&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"1"})]})}),e.jsx("button",{onClick:()=>Pe("dateRange"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("dateRange"===Fe?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#2a3441]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Issue Date and Time"]}),(Ct.start_date||Ct.end_date)&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"1"})]})}),e.jsx("button",{onClick:()=>Pe("penalty_amount"),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+("penalty_amount"===Fe?"bg-blue-600 text-white":"text-gray-300 hover:bg-[#2a3441]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Penalty Amount"]}),(Ct.penalty_amount_min||Ct.penalty_amount_max||Ct.penalty_amount_sort)&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"1"})]})})]})]}),e.jsx("div",{className:"col-span-2 overflow-y-auto",children:e.jsxs("div",{className:"h-full",children:["warningType"===Fe&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Warning Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 z-10"}),e.jsx("input",{type:"text",placeholder:"Search and select warning type...",value:Lt.warningType,onChange:e=>Et(t=>({...t,warningType:e.target.value})),onFocus:()=>Tt(e=>({...e,warningType:!0})),onBlur:()=>setTimeout(()=>Tt(e=>({...e,warningType:!1})),200),className:"w-full pl-10 pr-4 py-2 bg-[#1b2230] border border-gray-600 rounded text-gray-300 focus:outline-none focus:border-blue-500"})]}),(Lt.warningType||Mt.warningType)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 bg-[#1b2230] border border-gray-600 rounded-b mt-1 max-h-40 overflow-y-auto z-20",children:[E.filter(e=>{const t=e.label||e;return!Lt.warningType||t.toLowerCase().includes(Lt.warningType.toLowerCase())}).map(t=>e.jsx("div",{onClick:()=>{oa("warning_type",t.value||t),Et(e=>({...e,warningType:""})),Tt(e=>({...e,warningType:!1}))},className:"px-3 py-2 hover:bg-[#2a3441] cursor-pointer text-gray-300",children:t.label||t},t.value||t)),0===E.filter(e=>{const t=e.label||e;return!Lt.warningType||t.toLowerCase().includes(Lt.warningType.toLowerCase())}).length&&e.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No matching warning types"})]})]}),Ct.warning_type&&e.jsxs("div",{className:"mt-3 px-3 py-2 bg-blue-600 text-white rounded text-sm",children:["Selected: ",Ct.warning_type]}),e.jsx("button",{onClick:()=>oa("warning_type",""),className:"mt-4 text-xs text-blue-400 hover:text-blue-300",children:"Clear Warning Type"})]}),"department"===Fe&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 z-10"}),e.jsx("input",{type:"text",placeholder:"Search and select department...",value:Lt.department,onChange:e=>Et(t=>({...t,department:e.target.value})),onFocus:()=>Tt(e=>({...e,department:!0})),onBlur:()=>setTimeout(()=>Tt(e=>({...e,department:!1})),200),className:"w-full pl-10 pr-4 py-2 bg-[#1b2230] border border-gray-600 rounded text-gray-300 focus:outline-none focus:border-blue-500"})]}),(Lt.department||Mt.department)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 bg-[#1b2230] border border-gray-600 rounded-b mt-1 max-h-40 overflow-y-auto z-20",children:[S.filter(e=>!Lt.department||e.name.toLowerCase().includes(Lt.department.toLowerCase())).map(t=>e.jsx("div",{onClick:()=>{oa("department_id",t.id),Et(e=>({...e,department:""})),Tt(e=>({...e,department:!1}))},className:"px-3 py-2 hover:bg-[#2a3441] cursor-pointer text-gray-300",children:t.name},t.id)),0===S.filter(e=>!Lt.department||e.name.toLowerCase().includes(Lt.department.toLowerCase())).length&&e.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No matching departments"})]})]}),Ct.department_id&&e.jsxs("div",{className:"mt-3 px-3 py-2 bg-blue-600 text-white rounded text-sm",children:["Selected: ",S.find(e=>e.id===parseInt(Ct.department_id))?.name||"Unknown"]}),e.jsx("button",{onClick:()=>oa("department_id",""),className:"mt-4 text-xs text-blue-400 hover:text-blue-300",children:"Clear Department"})]}),"employee"===Fe&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Employee"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 z-10"}),e.jsx("input",{type:"text",placeholder:"Search and select employee...",value:Lt.employee,onChange:e=>Et(t=>({...t,employee:e.target.value})),onFocus:()=>Tt(e=>({...e,employee:!0})),onBlur:()=>setTimeout(()=>Tt(e=>({...e,employee:!1})),200),className:"w-full pl-10 pr-4 py-2 bg-[#1b2230] border border-gray-600 rounded text-gray-300 focus:outline-none focus:border-blue-500"})]}),(Lt.employee||Mt.employee)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 bg-[#1b2230] border border-gray-600 rounded-b mt-1 max-h-40 overflow-y-auto z-20",children:[k.filter(e=>!Lt.employee||e.name.toLowerCase().includes(Lt.employee.toLowerCase())).map(t=>e.jsx("div",{onClick:()=>{oa("employee_id",t.id),Et(e=>({...e,employee:""})),Tt(e=>({...e,employee:!1}))},className:"px-3 py-2 hover:bg-[#2a3441] cursor-pointer text-gray-300",children:t.name},t.id)),0===k.filter(e=>!Lt.employee||e.name.toLowerCase().includes(Lt.employee.toLowerCase())).length&&e.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No matching employees"})]})]}),Ct.employee_id&&e.jsxs("div",{className:"mt-3 px-3 py-2 bg-blue-600 text-white rounded text-sm",children:["Selected: ",k.find(e=>e.id===parseInt(Ct.employee_id))?.name||"Unknown"]}),e.jsx("button",{onClick:()=>oa("employee_id",""),className:"mt-4 text-xs text-blue-400 hover:text-blue-300",children:"Clear Employee"})]}),"penalty_amount"===Fe&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Penalty Amount"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Min Amount"}),e.jsx("input",{type:"number",placeholder:"0",value:Ct.penalty_amount_min,onChange:e=>oa("penalty_amount_min",e.target.value),className:"w-full bg-[#1b2230] border border-gray-600 rounded px-3 py-2 text-gray-300 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Max Amount"}),e.jsx("input",{type:"number",placeholder:"âˆž",value:Ct.penalty_amount_max,onChange:e=>oa("penalty_amount_max",e.target.value),className:"w-full bg-[#1b2230] border border-gray-600 rounded px-3 py-2 text-gray-300 focus:outline-none focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Sort By"}),e.jsxs("select",{value:Ct.penalty_amount_sort,onChange:e=>oa("penalty_amount_sort",e.target.value),className:"w-full bg-[#1b2230] border border-gray-600 rounded px-3 py-2 text-gray-300 focus:outline-none focus:border-blue-500",children:[e.jsx("option",{value:"",children:"No Sorting"}),e.jsx("option",{value:"asc",children:"Low to High"}),e.jsx("option",{value:"desc",children:"High to Low"})]})]}),e.jsx("button",{onClick:()=>{oa("penalty_amount_min",""),oa("penalty_amount_max",""),oa("penalty_amount_sort","")},className:"mt-4 text-xs text-blue-400 hover:text-blue-300",children:"Clear Penalty Amount Filter"})]})]}),"dateRange"===Fe&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-300 mb-4",children:"Issue Date and Time"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"From Date"}),e.jsx("input",{type:"date",value:Ct.start_date||"",onChange:e=>oa("start_date",e.target.value),className:"w-full bg-[#1b2230] border border-gray-600 rounded px-3 py-2 text-gray-300 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-xs mb-1",children:"To Date"}),e.jsx("input",{type:"date",value:Ct.end_date||"",onChange:e=>oa("end_date",e.target.value),className:"w-full bg-[#1b2230] border border-gray-600 rounded px-3 py-2 text-gray-300 focus:outline-none focus:border-blue-500"})]})]}),e.jsx("button",{onClick:()=>{oa("start_date",""),oa("end_date","")},className:"mt-4 text-xs text-blue-400 hover:text-blue-300",children:"Clear Date Range"})]})]})})]}),e.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-600",children:[e.jsx("button",{onClick:da,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Clear All Filters"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Cancel"}),e.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Apply Filters"})]})]})]})}),At.open&&e.jsx("div",{className:"fixed top-4 right-4 z-[1100]",children:e.jsx("div",{className:`p-4 rounded-xl shadow-2xl ${"success"===At.severity?"bg-green-600":"error"===At.severity?"bg-red-600":"warning"===At.severity?"bg-yellow-600":"bg-blue-600"} text-white font-bold`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{children:At.message}),e.jsx("button",{onClick:()=>Dt(e=>({...e,open:!1})),className:"text-white hover:text-gray-200 text-xl font-bold",children:"Ã—"})]})})})]})]})}catch(ka){return O(ka),e.jsx("div",{className:"min-h-screen bg-black text-white font-sans flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-red-400 mb-4",children:"Rendering Error"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Please refresh the page to try again."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Refresh Page"})]})})}});export{v as default};
